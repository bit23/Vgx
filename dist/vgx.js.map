{"version":3,"file":"vgx.js","sourceRoot":"","sources":["../src/core/ReactiveObject.ts","../src/Artboard.ts","../src/Drawing.ts","../src/DrawingContext.ts","../src/DrawingLoader.ts","../src/EntityTransform.ts","../src/core/DictionaryObject.ts","../src/EntityTypeManager.ts","../src/Index.ts","../src/MathUtils.ts","../src/PointDefinition.ts","../src/PointDefinitions.ts","../src/Rect.ts","../src/Shadow.ts","../src/TextUtils.ts","../src/Types.ts","../src/Utils.ts","../src/Vars.ts","../src/ViewTransform.ts","../src/core/Collection.ts","../src/core/Events.ts","../src/core/ReactiveCollection.ts","../src/importers/Importer.ts","../src/importers/ImportersManager.ts","../src/importers/JsonImporter.ts","../src/importers/ScriptImporter.ts","../src/importers/SvgImporter.ts","../src/objectModel/VgxObject.ts","../src/objectModel/VgxDrawable.ts","../src/objectModel/VgxEntity.ts","../src/objectModel/VgxArc.ts","../src/objectModel/VgxFillableEntity.ts","../src/objectModel/VgxCircle.ts","../src/objectModel/VgxCubicCurve.ts","../src/objectModel/VgxDonut.ts","../src/objectModel/VgxEllipse.ts","../src/objectModel/VgxEntityCollection.ts","../src/objectModel/VgxFillable.ts","../src/objectModel/VgxGroup.ts","../src/objectModel/VgxImage.ts","../src/objectModel/VgxLine.ts","../src/objectModel/VgxPath.ts","../src/objectModel/VgxPie.ts","../src/objectModel/VgxPolyline.ts","../src/objectModel/VgxPolygon.ts","../src/objectModel/VgxQuad.ts","../src/objectModel/VgxQuadraticCurve.ts","../src/objectModel/VgxRectangle.ts","../src/objectModel/VgxSquare.ts","../src/objectModel/VgxSymbol.ts","../src/objectModel/VgxText.ts","../src/objectModel/VgxTriangle.ts","../src/objectModel/VgxView.ts","../src/ui/VectorGraphicsView.ts","../src/ui/Viewport.ts","../src/ui/ViewportsLayout.ts","../src/utils/HttpClient.ts","../sample-apps/drawing-render/DrawingRenderApp.ts","../sample-apps/drawing-view/DrawingViewApp.ts","../sample-apps/test-bounds/TestBoundsApp.ts","../sample-apps/viewer/ViewerApp.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nnamespace Vgx {\r\n\r\n\texport interface PropertyChangedArgs extends EventArgs {\r\n\t\treadonly propertyName: string;\r\n\t}\r\n\r\n\texport class ReactiveObject {\r\n\r\n\t\tprivate readonly _events: EventsManager;\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._events = new EventsManager(this);\r\n\t\t\tthis.onPropertyChanged = new EventSet<ReactiveObject, PropertyChangedArgs>(this._events, \"onPropertyChanged\");\r\n\t\t}\r\n\r\n\t\tprotected _raisePropertyChanged(propertyName: string) {\r\n\t\t\tthis._events.trigger(\"onPropertyChanged\", { propertyName });\r\n\t\t}\r\n\r\n\t\tpublic readonly onPropertyChanged: EventSet<ReactiveObject, PropertyChangedArgs>;\r\n\t}\r\n}","\r\n/// <reference path=\"core/ReactiveObject.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\texport class Artboard extends ReactiveObject {\r\n\r\n\t\tprivate _clipContent: boolean;\r\n\t\tprivate _background: BrushDefinition = \"#aaaaaa\";\r\n\t\tprivate _border: BrushDefinition = \"#666666\";\r\n\t\tprivate _borderWidth: number = 1;\r\n\t\tprivate _shadow: Shadow;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\t\tpublic get border() { return this._border; }\r\n\t\tpublic set border(v: BrushDefinition) { \r\n\t\t\tif (this._border != v) {\r\n\t\t\t\tthis._border = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"border\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get borderWidth() { return this._borderWidth; }\r\n\t\tpublic set borderWidth(v: number) { \r\n\t\t\tif (this._borderWidth != v) {\r\n\t\t\t\tthis._borderWidth = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"borderWidth\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get background() { return this._background; }\r\n\t\tpublic set background(v: BrushDefinition) { \r\n\t\t\tif (this._background != v) {\r\n\t\t\t\tthis._background = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"background\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get shadow() { return this._shadow; }\r\n\t\tpublic set shadow(v: Shadow) { \r\n\t\t\tif (this._shadow != v) {\r\n\t\t\t\tthis._shadow = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"shadow\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get clipContent() { return this._clipContent; }\r\n\t\tpublic set clipContent(v: boolean) { \r\n\t\t\tv = !!v;\r\n\t\t\tif (this._clipContent != v) {\r\n\t\t\t\tthis._clipContent = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"clipContent\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get bounds() { return this._bounds; }\r\n\t\tpublic set bounds(v: Rect) { \r\n\t\t\tif (this._bounds != v) {\r\n\t\t\t\tthis._bounds = v; \r\n\t\t\t\tthis._raisePropertyChanged(\"bounds\");\r\n\t\t\t}\r\n\t\t} \r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport class Drawing {\r\n\r\n\t\tpublic static fromJSON(json: string) {\r\n\t\t\tconst jobject = JSON.parse(json);\r\n\t\t\treturn DrawingLoader.loadFromObject(jobject);\r\n\t\t}\r\n\r\n\t\tpublic static fromScript(script: string) {\r\n\t\t\tvar drawing = new Drawing();\r\n\t\t\t// eval(script);\r\n\t\t\t// return drawing;\r\n\r\n\t\t\tconst func = new Function(\"drawing\", script);\r\n\t\t\tfunc.call(null, drawing);\r\n\t\t\treturn drawing;\r\n\t\t}\r\n\r\n\r\n\t\tprivate _usedHandles: string[];\r\n\t\tprivate _children: VgxEntityCollection;\r\n\t\tprivate _isDirty = true;\r\n\t\tprivate _background: BrushDefinition;\r\n\t\tprivate _redrawHandlers: Array<Action>;\r\n\t\tprivate _artboard: Artboard;\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._usedHandles = [];\r\n\t\t\tthis._children = new VgxEntityCollection(this);\r\n\t\t\tthis._children.onCollectionChanged.add(this._onChildrenChanged, this);\r\n\t\t\tthis._redrawHandlers = [];\r\n\t\t}\r\n\r\n\r\n\t\tprivate _onChildrenChanged(s: ReactiveCollection<VgxEntity>, e: CollectionChangedArgs<VgxEntity>) {\r\n\t\t\tthis.isDirty = true;\r\n\t\t}\r\n\r\n\t\tprivate _artboardPropertyChanged(s: ReactiveObject, e: PropertyChangedArgs) {\r\n\r\n\t\t}\r\n\r\n\t\tpublic get background() { return this._background; }\r\n\t\tpublic set background(v: BrushDefinition) {\r\n\t\t\tconst vType = typeof v;\r\n\t\t\tif ((vType === \"number\" || vType === \"string\") || (v instanceof CanvasGradient || v instanceof CanvasPattern)) {\r\n\t\t\t\tif (this._background != v) {\r\n\t\t\t\t\tthis._background = v;\r\n\t\t\t\t\tthis.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get isDirty() { return this._isDirty; }\r\n\t\tpublic set isDirty(v: boolean) {\r\n\t\t\tv = !!v;\r\n\t\t\tif (this._isDirty != v) {\r\n\t\t\t\tthis._isDirty = v;\r\n\t\t\t\t// TODO\r\n\t\t\t\tthis._redrawHandlers.forEach((a: Action) => a());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic get artboard() { return this._artboard; }\r\n\t\tpublic set artboard(v: Artboard) {\r\n\t\t\tif (v instanceof Artboard) {\r\n\t\t\t\tif (this._artboard) {\r\n\t\t\t\t\tthis._artboard.onPropertyChanged.remove(this._artboardPropertyChanged);\r\n\t\t\t\t}\r\n\t\t\t\tthis._artboard = v;\r\n\t\t\t\tthis._artboard.onPropertyChanged.add(this._artboardPropertyChanged, this);\r\n\t\t\t\tthis.isDirty = true;\r\n\t\t\t}\r\n\t\t\telse if (!v) {\r\n\t\t\t\tif (this._artboard) {\r\n\t\t\t\t\tthis._artboard.onPropertyChanged.remove(this._artboardPropertyChanged);\r\n\t\t\t\t}\r\n\t\t\t\tthis._artboard = null;\r\n\t\t\t\tthis.isDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic registerDirtyEventHandler(eventHandler: Action) {\r\n\t\t\tif (typeof eventHandler === \"function\") {\r\n\t\t\t\tthis._redrawHandlers.push(eventHandler);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic unregisterDirtyEventHandler(eventHandler: Action) {\r\n\t\t\tif (typeof eventHandler === \"function\") {\r\n\t\t\t\tlet index;\r\n\t\t\t\twhile ((index = this._redrawHandlers.indexOf(eventHandler)) >= 0) {\r\n\t\t\t\t\tthis._redrawHandlers.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic getFreeHandle() {\r\n\t\t\tlet handle;\r\n\t\t\tdo {\r\n\t\t\t\thandle = Utils.createUUID(false).substr(0, 8);\r\n\t\t\t} while (this._usedHandles.indexOf(handle) != -1);\r\n\t\t\tthis._usedHandles.push(handle);\r\n\t\t\treturn handle;\r\n\t\t}\r\n\r\n\t\tpublic addChild(vgxEntity: VgxEntity) {\r\n\r\n\t\t\tif (vgxEntity.drawing != this) {\r\n\t\t\t\tvgxEntity.addToDrawing(this);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._children.add(vgxEntity);\r\n\t\t\tthis.isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic removeChild(vgxEntity: VgxEntity) {\r\n\r\n\t\t\tconst index = this._children.indexOf(vgxEntity);\r\n\t\t\tif (index < 0) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst result = this._children.elementAt(index);\r\n\t\t\tthis._children.removeAt(index);\r\n\t\t\tthis.isDirty = true;\r\n            return result;\r\n\t\t}\r\n\r\n\t\tpublic getChildren() {\r\n\t\t\treturn this._children;\r\n\t\t}\r\n\r\n\t\tpublic clear() {\r\n\t\t\tthis._children.clear();\r\n\t\t\tthis.isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic getBounds() {\r\n\t\t\tconst result = Rect.empty;\r\n\t\t\tif (this._artboard) {\r\n\t\t\t\treturn this._artboard.bounds;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (this._children.count > 0) {\r\n\t\t\t\t\tfor (const child of this._children) {\r\n\t\t\t\t\t\tconst childBounds = child.getBounds();\r\n\t\t\t\t\t\tresult.union(childBounds);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport class DrawingContext {\r\n\r\n\t\tprivate _drawing: Drawing;\r\n\t\tprivate _canvas: Cgx.CanvasSurface;\r\n\t\tprivate _viewTransform: ViewTransform;\r\n\r\n\t\tprivate _graphics: Cgx.CoreGraphics;\r\n\t\tprivate _shadow: Shadow;\r\n\t\tprivate _scaleStyles = true;\r\n\r\n\r\n\t\tconstructor(drawing: Drawing, canvas: Cgx.CanvasSurface, viewTransform: ViewTransform) {\r\n\t\t\tthis._drawing = drawing;\r\n\t\t\tthis._canvas = canvas;\r\n\t\t\tthis._viewTransform = viewTransform;\r\n\t\t\tthis._graphics = new Cgx.CoreGraphics(this._canvas);\r\n\t\t\tthis._shadow = new Shadow();\r\n\t\t}\r\n\r\n\r\n\t\tpublic _beginRender() {\r\n\t\t\tthis._graphics.pushTransform(this._viewTransform);\r\n\t\t}\r\n\r\n\t\tpublic _endRender() {\r\n\t\t\tthis._graphics.popTransform();\r\n\t\t}\r\n\r\n\t\tpublic _getImageData() {\r\n\t\t\tthis._graphics.getImageData(0, 0, this._canvas.width, this._canvas.height);\r\n\t\t}\r\n\r\n\t\tpublic _attachToDrawing(drawing: Drawing) {\r\n\t\t\tthis._drawing = drawing;\r\n\t\t}\r\n\r\n\t\tpublic get drawing() { return this._drawing; }\r\n\r\n\t\tpublic get fillBrush() { return this._graphics.fillBrush; }\r\n\t\tpublic set fillBrush(v: BrushDefinition) { this._graphics.fillBrush = v; }\r\n\r\n\t\t\r\n\r\n\t\tpublic get fontFamily() { return this._graphics.fontFamily; }\r\n\t\tpublic set fontFamily(v: string) { this._graphics.fontFamily = v; }\r\n\r\n\t\tpublic get fontSize() { return this._graphics.fontSize; }\r\n\t\tpublic set fontSize(v: string) { this._graphics.fontSize = v; }\r\n\r\n\t\t\r\n\r\n\t\tpublic get scaleStyles() { return this._scaleStyles; }\r\n\t\tpublic set scaleStyles(v: boolean) { this._scaleStyles = v; }\r\n\r\n\t\tpublic get shadow() { return this._shadow; }\r\n\t\tpublic set shadow(v: Shadow) { \r\n\t\t\tthis._shadow = v;\r\n\t\t\tthis._graphics.shadow = v; \r\n\t\t}\r\n\r\n\t\tpublic get strokeBrush() { return this._graphics.strokeBrush; }\r\n\t\tpublic set strokeBrush(v: BrushDefinition) { this._graphics.strokeBrush = v; }\r\n\r\n\t\tpublic get strokeWidth() { \r\n\t\t\tif (this._scaleStyles) {\r\n\t\t\t\treturn this._graphics.strokeWidth;\r\n\t\t\t} else {\r\n\t\t\t\treturn this._graphics.strokeWidth * this._viewTransform.viewZoom;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic set strokeWidth(v: number) { \r\n\t\t\tif (this._scaleStyles) {\r\n\t\t\t\tthis._graphics.strokeWidth = v;\r\n\t\t\t} else {\r\n\t\t\t\tthis._graphics.strokeWidth = v / this._viewTransform.viewZoom;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get textBaseline() { return this._graphics.textBaseline; }\r\n\t\tpublic set textBaseline(v: CanvasTextBaseline) { this._graphics.textBaseline = v; }\r\n\t\t\r\n\r\n\r\n\r\n\r\n\t\tpublic clear(fillBrush: BrushDefinition = null) {\r\n\t\t\tthis._graphics.clear(fillBrush);\r\n\t\t}\r\n\r\n\t\tpublic drawArtboard(artboard: Artboard, background: BrushDefinition) {\r\n\r\n\t\t\tconst originalStrokeBrush = this.strokeBrush;\r\n\t\t\tconst originalStrokeWidth = this.strokeWidth;\r\n\t\t\tconst originalShadow = this.shadow;\r\n\t\t\tconst originalFillBrush = this.fillBrush;\r\n\r\n\r\n\t\t\t// this.strokeBrush = null;\r\n\t\t\t// this.fillBrush = \"rgba(0,0,0,0.1)\";\r\n\t\t\t// this._graphics.drawRectangle(2, 2, artboard.size.width, artboard.size.height);\r\n\r\n\r\n\t\t\tthis.strokeBrush = null;\r\n\t\t\tif (artboard.shadow) {\r\n\t\t\t\tthis.shadow = artboard.shadow;\r\n\t\t\t\tthis.strokeBrush = null;\r\n\t\t\t\tthis._graphics.drawRectangle(artboard.bounds.x, artboard.bounds.y, artboard.bounds.width, artboard.bounds.height);\r\n\t\t\t\tthis.shadow = originalShadow;\r\n\t\t\t}\r\n\r\n\t\t\tthis.strokeBrush = artboard.border;\r\n\t\t\tthis.strokeWidth = artboard.borderWidth;\r\n\t\t\tthis.fillBrush = background || \"#ffffff\";\r\n\r\n\t\t\tthis._graphics.drawRectangle(artboard.bounds.x, artboard.bounds.y, artboard.bounds.width, artboard.bounds.height);\r\n\t\t\t\r\n\r\n\t\t\tthis.strokeBrush = originalStrokeBrush;\r\n\t\t\tthis.strokeWidth = originalStrokeWidth;\r\n\t\t\t\r\n\t\t\tthis.fillBrush = originalFillBrush;\r\n\t\t}\r\n\r\n\t\tpublic drawArc (arc: VgxArc) {\r\n\t\t\tthis._graphics.strokeBrush = arc.stroke;\r\n\t\t\tthis.strokeWidth = arc.strokeWidth;\r\n\t\t\tthis._graphics.shadow = arc.shadow;\r\n\t\t\tthis._graphics.drawArc(arc.insertPointX, arc.insertPointY, arc.radius, arc.startAngleRad, arc.endAngleRad, arc.isAntiClockwise, arc.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawLine (line: VgxLine) {\r\n\t\t\tthis._graphics.strokeBrush = line.stroke;\r\n\t\t\tthis.strokeWidth = line.strokeWidth;\r\n\t\t\tthis._graphics.shadow = line.shadow;\r\n\t\t\tthis._graphics.drawLine(line.insertPointX, line.insertPointY, line.endPoint.x, line.endPoint.y, line.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawRectangle (rectangle: VgxRectangle) {\r\n\t\t\tthis._graphics.strokeBrush = rectangle.stroke;\r\n\t\t\tthis.strokeWidth = rectangle.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = rectangle.fill;\r\n\t\t\tthis._graphics.shadow = rectangle.shadow;\r\n\t\t\tif (rectangle.cornersRadius === 0) {\r\n\t\t\t\tthis._graphics.drawRectangle(rectangle.insertPointX, rectangle.insertPointY, rectangle.width, rectangle.height, rectangle.transform);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._graphics.drawRoundedRectangle(rectangle.insertPointX, rectangle.insertPointY, rectangle.width, rectangle.height, rectangle.cornersRadius, rectangle.transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic drawSquare (square: VgxSquare) {\r\n\t\t\tthis._graphics.strokeBrush = square.stroke;\r\n\t\t\tthis.strokeWidth = square.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = square.fill;\r\n\t\t\tthis._graphics.shadow = square.shadow;\r\n\t\t\tif (square.cornersRadius === 0) {\r\n\t\t\t\tthis._graphics.drawSquare(square.insertPointX, square.insertPointY, square.size, square.transform);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._graphics.drawRoundedRectangle(square.insertPointX, square.insertPointY, square.size, square.size, square.cornersRadius, square.transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic drawCircle (circle: VgxCircle) {\r\n\t\t\tthis._graphics.strokeBrush = circle.stroke;\r\n\t\t\tthis.strokeWidth = circle.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = circle.fill;\r\n\t\t\tthis._graphics.shadow = circle.shadow;\r\n\t\t\tthis._graphics.drawCircle(circle.insertPointX, circle.insertPointY, circle.radius, circle.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawEllipse (ellipse: VgxEllipse) {\r\n\t\t\tthis._graphics.strokeBrush = ellipse.stroke;\r\n\t\t\tthis.strokeWidth = ellipse.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = ellipse.fill;\r\n\t\t\tthis._graphics.shadow = ellipse.shadow;\r\n\t\t\tthis._graphics.drawEllipse(ellipse.insertPointX, ellipse.insertPointY, ellipse.xRadius, ellipse.yRadius, ellipse.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawPolyline (polyline: VgxPolyline) {\r\n\t\t\tthis._graphics.strokeBrush = polyline.stroke;\r\n\t\t\tthis.strokeWidth = polyline.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = polyline.fill;\r\n\t\t\tthis._graphics.shadow = polyline.shadow;\r\n\t\t\t// TODO polyline.points.toArray() convert to Iterable<Point>\r\n\t\t\tthis._graphics.drawPolyline(polyline.points.toArray(), polyline.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawPolygon (polygon: VgxPolygon) {\r\n\t\t\tthis._graphics.strokeBrush = polygon.stroke;\r\n\t\t\tthis.strokeWidth = polygon.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = polygon.fill;\r\n\t\t\tthis._graphics.shadow = polygon.shadow;\r\n\t\t\t// TODO polygon.points.toArray() convert to Iterable<Point>\r\n\t\t\tthis._graphics.drawPolygon(polygon.points.toArray(), polygon.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawTriangle (triangle: VgxTriangle) {\r\n\t\t\tthis._graphics.strokeBrush = triangle.stroke;\r\n\t\t\tthis.strokeWidth = triangle.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = triangle.fill;\r\n\t\t\tthis._graphics.shadow = triangle.shadow;\r\n\t\t\tthis._graphics.drawTriangle(triangle.point1, triangle.point2, triangle.point3, triangle.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawQuad (quad: VgxQuad) {\r\n\t\t\tthis._graphics.strokeBrush = quad.stroke;\r\n\t\t\tthis.strokeWidth = quad.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = quad.fill;\r\n\t\t\tthis._graphics.shadow = quad.shadow;\r\n\t\t\tthis._graphics.drawQuad(quad.point1, quad.point2, quad.point3, quad.point4, quad.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawCubicCurve (cubicCurve: VgxCubicCurve) {\r\n\t\t\tthis._graphics.strokeBrush = cubicCurve.stroke;\r\n\t\t\tthis.strokeWidth = cubicCurve.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = cubicCurve.fill;\r\n\t\t\tthis._graphics.shadow = cubicCurve.shadow;\r\n\t\t\t// TODO cubicCurve.points.toArray() convert to Iterable<Point>\r\n\t\t\tthis._graphics.drawCubicCurve(cubicCurve.points.toArray(), cubicCurve.controlPoints1.toArray(), cubicCurve.controlPoints2.toArray(), cubicCurve.isClosed, cubicCurve.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawQuadraticCurve (quadraticCurve: VgxQuadraticCurve) {\r\n\t\t\tthis._graphics.strokeBrush = quadraticCurve.stroke;\r\n\t\t\tthis.strokeWidth = quadraticCurve.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = quadraticCurve.fill;\r\n\t\t\tthis._graphics.shadow = quadraticCurve.shadow;\r\n\t\t\t// TODO quadraticCurve.points.toArray() convert to Iterable<Point>\r\n\t\t\tthis._graphics.drawQuadraticCurve(quadraticCurve.points.toArray(), quadraticCurve.controlPoints.toArray(), quadraticCurve.isClosed, quadraticCurve.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawImage (image: VgxImage) {\r\n\t\t\tthis._graphics.strokeBrush = image.stroke;\r\n\t\t\tthis.strokeWidth = image.strokeWidth;\r\n\t\t\tthis._graphics.shadow = image.shadow;\r\n\t\t\tthis._graphics.drawImage(image.source, image.insertPointX, image.insertPointY, image.width, image.height, image.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawText (text: VgxText, measure: boolean = false) {\r\n\t\t\tthis._graphics.strokeBrush = text.stroke;\r\n\t\t\tthis.strokeWidth = text.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = text.fill;\r\n\t\t\tthis._graphics.shadow = text.shadow;\r\n\t\t\tthis._graphics.fontFamily = text.fontFamily;\r\n\t\t\tthis._graphics.fontSize = text.fontSize + \"px\";\r\n\t\t\tthis._graphics.textAlign = text.alignment;\r\n\t\t\tthis._graphics.textBaseline = text.baseline;\r\n\t\t\tthis._graphics.drawText(text.insertPointX, text.insertPointY, text.source, text.transform);\r\n\t\t\tif (measure)\r\n            \treturn this._graphics.measureText(text.source);\r\n\t\t}\r\n\r\n\t\tpublic drawPath (path: VgxPath) {\r\n\t\t\tthis._graphics.strokeBrush = path.stroke;\r\n\t\t\tthis.strokeWidth = path.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = path.fill;\r\n\t\t\tthis._graphics.shadow = path.shadow;\r\n\t\t\tfor (const path2D of path.figures) {\r\n\t\t\t\tthis._graphics.drawPath2D(path.insertPointX, path.insertPointY, path2D, path.fillRule, path.transform);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic drawPie (pie: VgxPie) {\r\n\t\t\tthis._graphics.strokeBrush = pie.stroke;\r\n\t\t\tthis.strokeWidth = pie.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = pie.fill;\r\n\t\t\tthis._graphics.shadow = pie.shadow;\r\n\t\t\tthis._graphics.drawPie(pie.insertPointX, pie.insertPointY, pie.radius, pie.startAngleRad, pie.endAngleRad, pie.isAntiClockwise, pie.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawDonut (donut: VgxDonut) {\r\n\t\t\tthis._graphics.strokeBrush = donut.stroke;\r\n\t\t\tthis.strokeWidth = donut.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = donut.fill;\r\n\t\t\tthis._graphics.shadow = donut.shadow;\r\n\t\t\tthis._graphics.drawDonut(donut.insertPointX, donut.insertPointY, donut.startRadius, donut.endRadius, donut.startAngleRad, donut.endAngleRad, donut.isAntiClockwise, donut.transform);\r\n\t\t}\r\n\r\n\t\tpublic drawGroup (group: VgxGroup) {\r\n\t\t\tthis._graphics.strokeBrush = group.stroke;\r\n\t\t\tthis.strokeWidth = group.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = group.fill;\r\n\t\t\tthis._graphics.shadow = group.shadow;\r\n\r\n\t\t\tvar t = new Cgx.Transform();\r\n\t\t\tt.translationX = group.insertPointX;\r\n\t\t\tt.translationY = group.insertPointY;\r\n\t\t\tthis._graphics.pushTransform(t);\r\n\r\n\t\t\t// for (const child of group.children) {\r\n\t\t\t// \tif (<VgxDrawable>child) {\r\n\t\t\t// \t\tif ((<VgxDrawable>child).visible) {\r\n\t\t\t// \t\t\t(<VgxDrawable>child).draw(this);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\tthis._drawEntityCollection(group.children);\r\n\r\n\t\t\tthis._graphics.popTransform();\r\n\t\t}\r\n\r\n\t\tpublic drawView (view: VgxView) {\r\n\t\t\tthis._graphics.strokeBrush = view.stroke;\r\n\t\t\tthis.strokeWidth = view.strokeWidth;\r\n\t\t\tthis._graphics.fillBrush = view.fill;\r\n\t\t\tthis._graphics.shadow = view.shadow;\r\n\r\n\t\t\tconst hasClipBounds = view.clip && !Rect.isEmpty(view.clipBounds);\r\n\r\n\t\t\tvar t = new Cgx.Transform();\r\n\t\t\tt.translationX = view.insertPointX;\r\n\t\t\tt.translationY = view.insertPointY;\r\n\t\t\tthis._graphics.pushTransform(t);\r\n\r\n\t\t\tif (hasClipBounds)\r\n\t\t\t{\r\n\t\t\t\tthis._graphics.clipRect(view.clipBounds.x, view.clipBounds.y, view.clipBounds.width, view.clipBounds.height);\r\n\t\t\t}\r\n\r\n\t\t\t// for (const child of view.children) {\r\n\t\t\t// \tif (<VgxDrawable>child) {\r\n\t\t\t// \t\tif ((<VgxDrawable>child).visible) {\r\n\t\t\t// \t\t\t(<VgxDrawable>child).draw(this);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\tthis._drawEntityCollection(view.children);\r\n\r\n\t\t\tif (hasClipBounds)\r\n\t\t\t{\r\n\t\t\t\tthis._graphics.strokeBrush = view.stroke;\r\n\t\t\t\tthis.strokeWidth = view.strokeWidth;\r\n\t\t\t\tthis._graphics.drawRectangle(view.clipBounds.x, view.clipBounds.y, view.clipBounds.width, view.clipBounds.height);\r\n\t\t\t}\r\n\r\n\t\t\tthis._graphics.popTransform();\r\n\t\t}\r\n\r\n\t\tpublic drawAxes () {\r\n\t\t\tvar localOrigin = this._viewTransform.globalToLocalPoint(0, 0);\r\n\t\t\tthis.strokeWidth = 1;\r\n\t\t\tthis._graphics.strokeBrush = \"rgba(255,0,0,0.5)\";\r\n\t\t\tthis._graphics.drawLine(0, localOrigin.y, this._graphics.canvasBuffer.width, localOrigin.y);\r\n\t\t\tthis._graphics.strokeBrush = \"rgba(0,255,0,0.5)\";\r\n\t\t\tthis._graphics.drawLine(localOrigin.x, 0, localOrigin.x, this._graphics.canvasBuffer.height);\r\n\t\t}\r\n\r\n\t\t// public drawSymbol (symbol: VgxSymbol) {\r\n\t\t// \tthis._graphics.strokeBrush = symbol.stroke;\r\n\t\t// \tthis.strokeWidth = symbol.strokeWidth;\r\n\t\t// \tthis._graphics.fillBrush = symbol.fill;\r\n\t\t// \tthis._graphics.shadow = symbol.shadow;\r\n\t\t// \tthis._graphics.drawSymbol(symbol.insertPointX, symbol.insertPointY, symbol.width, symbol.height, symbol.data);\r\n\t\t// }\r\n\r\n\r\n\t\tpublic drawDrawing(drawing: Drawing) {\r\n\r\n\t\t\tif (!drawing.artboard) {\r\n\t\t\t\tif (drawing.background) {\r\n\t\t\t\t\tthis.clear(drawing.background);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.clear(drawing.artboard.background);\r\n\t\t\t}\r\n\r\n\t\t\tthis._beginRender();\r\n\r\n\t\t\tif (drawing.artboard) {\r\n\t\t\t\tthis.drawArtboard(drawing.artboard, drawing.background);\r\n\t\t\t\tif (drawing.artboard.clipContent) {\r\n\t\t\t\t\tthis._graphics.clipRect(drawing.artboard.bounds.x, drawing.artboard.bounds.y, drawing.artboard.bounds.width, drawing.artboard.bounds.height);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar children = drawing.getChildren();\r\n\t\t\t// for (const child of children) {\r\n\t\t\t// \tif (<VgxDrawable>child) {\r\n\t\t\t// \t\tif ((<VgxDrawable>child).visible) {\r\n\t\t\t// \t\t\t// TODO: check view intersection\r\n\t\t\t// \t\t\t(<VgxDrawable>child).draw(this);\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\t\t\tthis._drawEntityCollection(children);\r\n\r\n\t\t\tthis._endRender();\r\n\t\t}\r\n\r\n\t\tprivate _drawEntityCollection(collection: VgxEntityCollection) {\r\n\t\t\tfor (const child of collection) {\r\n\t\t\t\tif (<VgxDrawable>child) {\r\n\t\t\t\t\tif ((<VgxDrawable>child).visible) {\r\n\t\t\t\t\t\t// TODO: check view intersection\r\n\t\t\t\t\t\t(<VgxDrawable>child).draw(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic measureText(text: string) { return this._graphics.measureText(text); }\r\n\r\n\t\tpublic pushTransform(transform: Transform) { return this._graphics.pushTransform(transform); }\r\n\r\n\t\tpublic popTransform() { return this._graphics.popTransform(); }\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\tconst customEntityNamePropertyKey = \"name\";\r\n\tconst customEntityTypeNamePropertyKey = \"typeName\";\r\n\tconst customEntityDefaultValuesPropertyKey = \"defaultValues\";\r\n\r\n\texport class DrawingLoader {\r\n\r\n\t\tprivate static resolveNamespace(nsparts: string[]) {\r\n\t\t\tlet currentObject = window as any;\r\n\t\t\tfor (const part of nsparts) {\r\n\t\t\t\tif (Reflect.has(currentObject, part)) {\r\n\t\t\t\t\tcurrentObject = Reflect.get(currentObject, part);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn currentObject;\r\n\t\t}\r\n\r\n\t\tprivate static getVgxType(entityName: string) {\r\n\t\t\tlet vgxNs = Vgx as any;\r\n\t\t\tconst entityTypeDefinition = EntityTypeManager.getType(entityName);\r\n\t\t\tif (entityTypeDefinition == null) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst nsparts = entityTypeDefinition.typeName.split(\".\");\r\n\t\t\tconst typeName = nsparts[nsparts.length - 1];\r\n\t\t\tlet ns = vgxNs;\r\n\t\t\tif (nsparts.length > 1) {\r\n\t\t\t\tns = DrawingLoader.resolveNamespace(nsparts.slice(0, nsparts.length - 1));\r\n\t\t\t\tif (ns == null) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn Reflect.get(ns, typeName);\r\n\t\t}\r\n\r\n\t\tprivate static loadCustomEntities(jsonCustomEntities: DynamicObject) {\r\n\t\t\tconst drawingCustomEntities = DictionaryObject.fromObject(jsonCustomEntities);\r\n\t\t\tfor (const customEntity of drawingCustomEntities) {\r\n\t\t\t\tif (!Reflect.has(customEntity, customEntityNamePropertyKey))  continue;\r\n\t\t\t\tif (!Reflect.has(customEntity, customEntityTypeNamePropertyKey)) continue;\r\n\t\t\t\tconst customEntityNameProperty = Reflect.get(customEntity, customEntityNamePropertyKey);\r\n\t\t\t\tconst customEntityTypeNameProperty = Reflect.get(customEntity, customEntityTypeNamePropertyKey);\r\n\t\t\t\tconst customEntityDefaultValuesProperty = Reflect.get(customEntity, customEntityDefaultValuesPropertyKey);\r\n\t\t\t\tEntityTypeManager.registerType(customEntityNameProperty, customEntityTypeNameProperty, customEntityDefaultValuesProperty);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic static loadChildEntity(typeName: string, data: DynamicObject) {\r\n\r\n\t\t\tconst type = DrawingLoader.getVgxType(typeName);\r\n\r\n\t\t\tif (typeof type !== \"function\") {\r\n\t\t\t\tthrow new Error(\"invalid type name '\" + typeName + \"'\");\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: migliorare il check\r\n\t\t\tconst instance = new type();\r\n\t\t\tif (instance == null) {\r\n\t\t\t\tthrow new Error(\"invalid type name '\" + typeName + \"'\");\r\n\t\t\t}\r\n\r\n\t\t\t(<VgxEntity>instance).loadData(data);\r\n\r\n\t\t\treturn instance;\r\n\t\t}\r\n\r\n\t\tpublic static loadFromObject = function (jsonDrawing: any) {\r\n\r\n\t\t\tif (!(\"children\" in jsonDrawing))\r\n\t\t\t\tthrow new Error(\"missing 'children' element\");\r\n\r\n\t\t\tvar drawing = new Drawing();\r\n\r\n\t\t\tif (\"customEntities\" in jsonDrawing) {\r\n\t\t\t\tDrawingLoader.loadCustomEntities(jsonDrawing[\"customEntities\"]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (const child of jsonDrawing.children) {\r\n\t\t\t\t//const instance = DrawingLoader.loadChildElement(child);\r\n\t\t\t\tconst instance = DrawingLoader.loadChildEntity(child[0] as string, child[1]);\r\n\t\t\t\tdrawing.addChild(instance);\r\n\t\t\t}\r\n\r\n\t\t\tif (\"background\" in jsonDrawing) {\r\n\t\t\t\tdrawing.background = jsonDrawing[\"background\"];\r\n\t\t\t}\r\n\r\n\t\t\treturn drawing;\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport class EntityTransform extends Cgx.Transform {\r\n\r\n\t\tprivate _entity: VgxEntity;\r\n\r\n\t\tconstructor(entity: VgxEntity) {\r\n\t\t\tsuper();\r\n\r\n\t\t\tthis._entity = entity;\r\n\t\t\tthis._propertyChanged = (propertyName) => {\r\n\t\t\t\tthis._entity.geometryDirty = true;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tprotected _propertyChanged: (propertyName: string) => void;\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport class DictionaryObject<TKey extends any, TValue extends any> \r\n\t\timplements Iterable<KeyValuePair<TKey, TValue>>\r\n\t{\r\n\t\tpublic static fromObject(obj: DynamicObject) {\r\n\t\t\tconst result = new DictionaryObject<string | symbol, any>();\r\n\t\t\tfor (const k of Reflect.ownKeys(obj)) {\r\n\t\t\t\tresult.set(k, Reflect.get(obj, k))\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tprivate _keys: TKey[]; \r\n\t\tprivate _values: TValue[];\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._keys = [];\r\n\t\t\tthis._values = [];\r\n\t\t}\r\n\r\n\r\n\t\tpublic get count() {\r\n\t\t\treturn this._keys.length;\r\n\t\t}\r\n\r\n\t\tpublic get first() {\r\n\t\t\tif (this._values.length == 0) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\treturn this._values[0];\r\n\t\t}\r\n\r\n\t\tpublic get last() {\r\n\t\t\tif (this._values.length == 0) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\treturn this._values[this._values.length - 1];\r\n\t\t}\r\n\r\n\r\n\t\tpublic containsKey(key: TKey) {\r\n\t\t\treturn this._keys.indexOf(key) >= 0;\r\n\t\t}\r\n\r\n\t\tpublic remove(key: TKey) {\r\n\t\t\tconst index = this._keys.indexOf(key);\r\n\t\t\tif (index < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis._keys.splice(index, 1);\r\n\t\t\tthis._values.splice(index, 1);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tpublic get(key: TKey) {\r\n\t\t\tconst index = this._keys.indexOf(key);\r\n\t\t\tif (index < 0) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\treturn this._values[index];\r\n\t\t}\r\n\r\n\t\tpublic set(key: TKey, value: TValue) {\r\n\t\t\tconst index = this._keys.indexOf(key);\r\n\t\t\tif (index < 0) {\r\n\t\t\t\tthis._keys.push(key);\r\n\t\t\t\tthis._values.push(value);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._values[index] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t*[Symbol.iterator](): Iterator<KeyValuePair<TKey, TValue>, any, undefined> {\r\n\t\t\tlet i = 0;\r\n\t\t\twhile(i == this._keys.length) {\r\n\t\t\t\tyield { \r\n\t\t\t\t\tkey: this._keys[i],\r\n\t\t\t\t\tvalue: this._values[i]\t\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","\r\n/// <reference path=\"core/DictionaryObject.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\tinterface EntityTypeDefinition {\r\n\t\tname: string;\r\n\t\ttypeName: string;\r\n\t\tdefaultValues: DynamicObject;\r\n\t}\r\n\r\n\texport class EntityTypeManager {\r\n\r\n\t\tprivate static _registeredTypes: DictionaryObject<string, EntityTypeDefinition> = new DictionaryObject();\r\n\r\n\r\n\t\tpublic static registerType(name: string, typeName: string, defaultValues: DynamicObject = null) {\r\n\t\t\tif (this._registeredTypes.containsKey(name)) {\r\n\t\t\t\tthrow new Error(`type '${name}' already defined`);\r\n\t\t\t}\r\n\t\t\tconst definition = { name, typeName, defaultValues };\r\n\t\t\tthis._registeredTypes.set(name, definition);\r\n\t\t}\r\n\r\n\t\tpublic static getType(name: string, throwException: boolean = false) {\r\n\t\t\tif (!this._registeredTypes.containsKey(name)) {\r\n\t\t\t\tif (throwException) {\r\n\t\t\t\t\tthrow new Error(`type '${name}' doesn't exists`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._registeredTypes.get(name);\r\n\t\t}\r\n\t}\r\n}","\r\n/// <reference path=\"../libs/Cgx/cgx.d.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n}","\r\nnamespace Vgx {\r\n\r\n    export class MathUtils {\r\n\r\n        public static areClose(value1: number, value2: number) {\r\n            if (value1 == value2) {\r\n                return true;\r\n            }\r\n            var n = ((Math.abs(value1) + Math.abs(value2)) + 10.0) * 2.2204460492503131E-16;\r\n            var m = value1 - value2;\r\n            return ((-n < m) && (n > m));\r\n        }\r\n\r\n        public static isOne(value: number) {\r\n            return (Math.abs(value - 1.0) < 2.2204460492503131E-15);\r\n        }\r\n\r\n        public static isZero(value: number) {\r\n            return (Math.abs(value) < 2.2204460492503131E-15);\r\n        }\r\n\r\n        public static interpolatePointWithCubicCurves(points: Cgx.Point[], isClosed: boolean) {\r\n            if (points.length < 3)\r\n                return [];\r\n            var toRet = [];\r\n            //if is close curve then add the first point at the end\r\n            if (isClosed)\r\n                points.push(points[0]);\r\n            for (var i = 0; i < points.length - 1; i++) {\r\n                // Assume we need to calculate the control\r\n                // points between (x1,y1) and (x2,y2).\r\n                // Then x0,y0 - the previous vertex,\r\n                //      x3,y3 - the next one.\r\n                var x1 = points[i].x;\r\n                var y1 = points[i].y;\r\n                var x2 = points[i + 1].x;\r\n                var y2 = points[i + 1].y;\r\n                var x0;\r\n                var y0;\r\n                var previousPoint;\r\n\r\n                if (i == 0) {\r\n                    if (isClosed) {\r\n                        previousPoint = points[points.length - 2]; //last Point2D, but one (due inserted the first at the end)\r\n                        x0 = previousPoint.x;\r\n                        y0 = previousPoint.y;\r\n                    }\r\n                    else {\r\n                        previousPoint = points[i]; //if is the first point the previous one will be it self\r\n                        x0 = previousPoint.x;\r\n                        y0 = previousPoint.y;\r\n                    }\r\n                }\r\n                else {\r\n                    x0 = points[i - 1].x; //Previous Point2D\r\n                    y0 = points[i - 1].y;\r\n                }\r\n                var x3, y3;\r\n                var nextPoint;\r\n                if (i == points.length - 2) {\r\n                    if (isClosed) {\r\n                        nextPoint = points[1]; //second Point2D(due inserted the first at the end)\r\n                        x3 = nextPoint.x;\r\n                        y3 = nextPoint.y;\r\n                    }\r\n                    else {\r\n                        nextPoint = points[i + 1]; //if is the last point the next point will be the last one\r\n                        x3 = nextPoint.x;\r\n                        y3 = nextPoint.y;\r\n                    }\r\n                }\r\n                else {\r\n                    x3 = points[i + 2].x; //Next Point2D\r\n                    y3 = points[i + 2].y;\r\n                }\r\n                var xc1 = (x0 + x1) / 2.0;\r\n                var yc1 = (y0 + y1) / 2.0;\r\n                var xc2 = (x1 + x2) / 2.0;\r\n                var yc2 = (y1 + y2) / 2.0;\r\n                var xc3 = (x2 + x3) / 2.0;\r\n                var yc3 = (y2 + y3) / 2.0;\r\n                var len1 = Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));\r\n                var len2 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\r\n                var len3 = Math.sqrt((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));\r\n                var k1 = len1 / (len1 + len2);\r\n                var k2 = len2 / (len2 + len3);\r\n                var xm1 = xc1 + (xc2 - xc1) * k1;\r\n                var ym1 = yc1 + (yc2 - yc1) * k1;\r\n                var xm2 = xc2 + (xc3 - xc2) * k2;\r\n                var ym2 = yc2 + (yc3 - yc2) * k2;\r\n                var smoothValue = 0.8;\r\n                // Resulting control points. Here smooth_value is mentioned\r\n                // above coefficient K whose value should be in range [0...1].\r\n                var ctrl1_x = xm1 + (xc2 - xm1) * smoothValue + x1 - xm1;\r\n                var ctrl1_y = ym1 + (yc2 - ym1) * smoothValue + y1 - ym1;\r\n                var ctrl2_x = xm2 + (xc2 - xm2) * smoothValue + x2 - xm2;\r\n                var ctrl2_y = ym2 + (yc2 - ym2) * smoothValue + y2 - ym2;\r\n                toRet.push({\r\n                    startPoint: { x: x1, y: y1 },\r\n                    endPoint: { x: x2, y: y2 },\r\n                    firstControlPoint: i == 0 && !isClosed ? { x: x1, y: y1 } : { x: ctrl1_x, y: ctrl1_y },\r\n                    secondControlPoint: i == points.length - 2 && !isClosed ? { x: x2, y: y2 } : { x: ctrl2_x, y: ctrl2_y }\r\n                });\r\n            }\r\n            return toRet;\r\n        }\r\n\r\n        public static getPointsBounds(points: Cgx.Point[]) {\r\n            if (points.length == 0) {\r\n                return Rect.empty;\r\n            }\r\n            if (points.length == 1) {\r\n                return new Rect(points[0].x, points[0].y, 0, 0);\r\n            }\r\n            var minX = Number.MAX_VALUE;\r\n            var minY = Number.MAX_VALUE;\r\n            var maxX = Number.MIN_VALUE;\r\n            var maxY = Number.MIN_VALUE;\r\n            for (var i = 0; i < points.length; i++) {\r\n                var p = points[i];\r\n                minX = Math.min(minX, p.x);\r\n                minY = Math.min(minY, p.y);\r\n                maxX = Math.max(maxX, p.x);\r\n                maxY = Math.max(maxY, p.y);\r\n            }\r\n            return new Rect(minX, minY, maxX - minX, maxY - minY);\r\n        }\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport class PointDefinition {\r\n\r\n\t\tprivate _id: string;\r\n\t\tprivate _figures: any[];\r\n\t\tprivate _vgxPath: VgxPath;\r\n\r\n\t\tconstructor(id: string, figures: any[]) {\r\n\t\t\tthis._id = id;\r\n\t\t\tthis._figures = figures;\r\n\t\t}\r\n\r\n\t\tprivate _buildPath() {\r\n\t\t\tthis._vgxPath = new VgxPath();\r\n\t\t\t// *** copied from DrawingLoader.js\r\n\t\t\tfor (const figure of this._figures) {\r\n\t\t\t\tswitch (figure.type) {\r\n\t\t\t\t\tcase \"arc\":\r\n\t\t\t\t\t\tthis._vgxPath.addArc(figure.insertPointX, figure.insertPointY, figure.radius, figure.startAngle || 0, figure.endAngle || Math.PI * 2, figure.optClockwise || null);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"rect\":\r\n\t\t\t\t\t\tthis._vgxPath.addRect(figure.insertPointX, figure.insertPointY, figure.width, figure.height);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"ellipse\":\r\n\t\t\t\t\t\tthis._vgxPath.addEllipse(figure.insertPointX, figure.insertPointY, figure.radiusX, figure.radiusY, figure.rotation || 0, figure.startAngle || 0, figure.endAngle || Math.PI * 2, figure.optClockwise || null);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"path\":\r\n\t\t\t\t\t\tthis._vgxPath.addFigure(figure.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// ***\r\n\t\t}\r\n\r\n\t\tpublic anchorX = 0;\r\n\t\tpublic anchorY = 0;\r\n\r\n\t\tpublic get id() { return this._id; }\r\n\r\n\t\tpublic getPath() {\r\n\t\t\tif (this._vgxPath == null) {\r\n\t\t\t\tthis._buildPath();\r\n\t\t\t}\r\n\t\t\treturn this._vgxPath;\r\n\t\t}\r\n\t}\r\n}","/// <reference path=\"PointDefinition.ts\" />\r\n \r\nnamespace Vgx {\r\n\r\n    export class PointDefinitions {\r\n\r\n        private static _type1 = new PointDefinition(\r\n            \"type1\", \r\n            [\r\n                {\r\n                    type: \"path\",\r\n                    data: \"M 0.0,0.5 L 1.0,0.5 M 0.5,0.0 L 0.5,1.0\"\r\n                },\r\n                {\r\n                    type: \"ellipse\",\r\n                    insertPointX: 0.5,\r\n                    insertPointY: 0.5,\r\n                    radiusX: 0.5,\r\n                    radiusY: 0.5,\r\n                    startAngle: 0,\r\n                    endAngle: 2 * Math.PI\r\n                }\r\n            ], \r\n            //0.5, \r\n            //0.5\r\n        );\r\n\r\n        private static _type2 = new PointDefinition(\r\n            \"type2\", \r\n            [\r\n                {\r\n                    type: \"path\",\r\n                    data: \"M -0.353553390,-0.353553390 L 0.353553390,0.353553390 M -0.353553390,0.353553390 L 0.353553390,-0.353553390\"\r\n                },\r\n                {\r\n                    type: \"ellipse\",\r\n                    insertPointX: 0.0,\r\n                    insertPointY: 0.0,\r\n                    radiusX: 0.5,\r\n                    radiusY: 0.5,\r\n                    startAngle: 0,\r\n                    endAngle: 2 * Math.PI\r\n                }\r\n            ], \r\n            //0.5, \r\n            //0.5\r\n        );\r\n\r\n\r\n\r\n        public static get type1(): PointDefinition {\r\n            return this._type1;\r\n        }\r\n\r\n        public static get type2(): PointDefinition {\r\n            return this._type2;\r\n        }\r\n\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n\tfunction createEmptyRect() {\r\n\t\treturn new Rect(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\r\n\t}\r\n\r\n\tfunction createInvalidRect() {\r\n\t\treturn new Rect(Number.NaN, Number.NaN, Number.NaN, Number.NaN);\r\n\t}\r\n\r\n\tfunction unite(baseRect: Rect, otherRect: Rect) {\r\n\t\tif (!Rect.isEmpty(otherRect)) {\r\n\t\t\tlet left = Math.min(baseRect.x, otherRect.x);\r\n\t\t\tlet top = Math.min(baseRect.y, otherRect.y);\r\n\t\t\tif ((otherRect.width == Number.POSITIVE_INFINITY) || (baseRect.width == Number.POSITIVE_INFINITY)) {\r\n\t\t\t\tbaseRect.width = Number.POSITIVE_INFINITY;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet right;\r\n\t\t\t\tif (baseRect.width == Number.NEGATIVE_INFINITY || baseRect.x == Number.POSITIVE_INFINITY) {\r\n\t\t\t\t\tright = otherRect.x + otherRect.width;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tright = Math.max(baseRect.x + baseRect.width, otherRect.x + otherRect.width);\r\n\t\t\t\t}\r\n\t\t\t\tbaseRect.width = Math.max(right - left, 0.0);\r\n\t\t\t}\r\n\t\t\tif ((otherRect.height == Number.POSITIVE_INFINITY) || (baseRect.height == Number.POSITIVE_INFINITY)) {\r\n\t\t\t\tbaseRect.height = Number.POSITIVE_INFINITY;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet bottom;\r\n\t\t\t\tif (baseRect.height == Number.NEGATIVE_INFINITY || baseRect.y == Number.POSITIVE_INFINITY) {\r\n\t\t\t\t\tbottom = otherRect.y + otherRect.height;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tbottom = Math.max(baseRect.y + baseRect.height, otherRect.y + otherRect.height);\r\n\t\t\t\t}\r\n\t\t\t\tbaseRect.height = Math.max(bottom - top, 0.0);\r\n\t\t\t}\r\n\t\t\tbaseRect.x = left;\r\n\t\t\tbaseRect.y = top;\r\n\t\t}\r\n\t} \r\n\r\n\texport class Rect {\r\n\r\n\t\tpublic static readonly empty = createEmptyRect();\r\n\r\n\t\tpublic static readonly invalid = createInvalidRect();\r\n\r\n\t\tpublic static isEmpty(rect: Rect) {\r\n\t\t\tif (!Number.isFinite(rect.x) || !Number.isFinite(rect.y))\r\n                    return true;\r\n                return rect.width <= 0 && rect.height <= 0;\r\n\t\t}\r\n\r\n\t\tpublic static equals(rect1: Rect, rect2: Rect) {\r\n\t\t\tif (rect1 == null && rect2 == null) return true;\r\n\t\t\tif (rect1 == null) return false;\r\n\t\t\tif (rect2 == null) return false;\r\n\t\t\tif (rect1.x != rect2.x) return false;\r\n\t\t\tif (rect1.y != rect2.y) return false;\r\n\t\t\tif (rect1.width != rect2.width) return false;\r\n\t\t\tif (rect1.height != rect2.height) return false;\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\r\n\t\tpublic static from(values: {\r\n            x: number;\r\n            y: number;\r\n            width: number;\r\n            height: number;\r\n        }) {\r\n\t\t\treturn new Rect(values.x, values.y, values.width, values.height);\r\n\t\t}\r\n\r\n\t\tconstructor(x?: number, y?: number, width?: number, height?: number) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\t\t} \r\n\r\n\t\tpublic x: number;\r\n\t\tpublic y: number;\r\n\t\tpublic width: number;\r\n\t\tpublic height: number;\r\n\r\n\t\tpublic union(rect: Rect) {\r\n\t\t\tunite(this, rect);\r\n\t\t}\r\n\t}\r\n}","\r\n/// <reference path=\"core/ReactiveObject.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class Shadow extends ReactiveObject implements Cgx.Shadow {\r\n\r\n\t\tpublic static isDefault(shadow: Shadow) {\r\n\t\t\tif (shadow._blur == 0) {\r\n\t\t\t\tif (shadow._color == \"rgba(0,0,0,0)\") {\r\n\t\t\t\t\tif (shadow._offsetX == 0) {\r\n\t\t\t\t\t\tif (shadow._offsetY == 0) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tprivate _blur = 0;\r\n\t\tprivate _color: string = \"rgba(0,0,0,0)\";\r\n\t\tprivate _offsetX = 0;\r\n\t\tprivate _offsetY = 0;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\tpublic get blur () { return this._blur; }\r\n        public set blur (v: number) {\r\n\t\t\tif (typeof (v) === \"number\") {\r\n\t\t\t\tif (this._blur != v) {\r\n\t\t\t\t\tthis._blur = v;\r\n\t\t\t\t\tthis._raisePropertyChanged(\"blur\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get color () { return this._color; }\r\n        public set color (v: string) {\r\n\t\t\tif (typeof (v) === \"number\" || typeof (v) === \"string\") {\r\n\t\t\t\tif (this._color != v) {\r\n\t\t\t\t\tthis._color = v;\r\n\t\t\t\t\tthis._raisePropertyChanged(\"color\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get offsetX () { return this._offsetX; }\r\n        public set offsetX (v: number) {\r\n\t\t\tif (typeof (v) === \"number\") {\r\n\t\t\t\tif (this._offsetX != v) {\r\n\t\t\t\t\tthis._offsetX = v;\r\n\t\t\t\t\tthis._raisePropertyChanged(\"offsetX\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get offsetY () { return this._offsetY; }\r\n        public set offsetY (v: number) {\r\n\t\t\tif (typeof (v) === \"number\") {\r\n\t\t\t\tif (this._offsetY != v) {\r\n\t\t\t\t\tthis._offsetY = v;\r\n\t\t\t\t\tthis._raisePropertyChanged(\"offsetY\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n    export class TextUtils {\r\n\r\n        private static _initialized = false;\r\n        private static _canvasBuffer: HTMLCanvasElement;\r\n        private static _context: CanvasRenderingContext2D;\r\n\r\n        private static initialize() {\r\n            this._canvasBuffer = Cgx.Engine.createCanvas(1, 1);\r\n            this._context = this._canvasBuffer.getContext(\"2d\");\r\n            this._initialized = true;\r\n        }\r\n\r\n        private static ensureInitialized() {\r\n            if (!this._initialized) {\r\n                this.initialize();\r\n            }\r\n        }\r\n\r\n        private static estimateFontHeight(fastHeightEstimation: boolean) {\r\n\r\n            if (fastHeightEstimation) {\r\n                return this.measureTextWidth(\"M\");\r\n            }\r\n            else {\r\n                throw new Error(\"not implemented\");\r\n            }\r\n        }\r\n\r\n        private static measureTextWidth(text: string) {\r\n            return this._context.measureText(text).width;\r\n        }\r\n\r\n\r\n        public static measureText(text: string, fontFamily: string, fontSize: number, fastHeightEstimation: boolean = true) {\r\n            this.ensureInitialized();\r\n            this._context.font = fontSize + \"px \" + fontFamily;\r\n            return new Rect(\r\n                0, 0,\r\n                this.measureTextWidth(text),\r\n                this.estimateFontHeight(fastHeightEstimation)\r\n            );\r\n        }\r\n\r\n        public static getTextMetrics(text: string, fontFamily: string, fontSize: number) {\r\n            this.ensureInitialized();\r\n            this._context.font = fontSize + \"px \" + fontFamily;\r\n            return this._context.measureText(text);\r\n        }\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport type DynamicObject = {[name: string]: any}; \r\n\r\n\texport type TypedObject<T extends any> = {[name: string]: T}; \r\n\r\n\texport type Action = () => void;\r\n\r\n\texport type KeyValuePair<TKey extends any, TValue extends any> = {key: TKey, value: TValue};\r\n\r\n\r\n\t// Cgx types mapping\r\n\r\n\texport type Brush = Cgx.Brush;\r\n\r\n\texport type BrushDefinition = Cgx.BrushDefinition;\r\n\r\n\texport type BrushType = Cgx.BrushType;\r\n\r\n\texport type Transform = Cgx.Transform;\r\n\r\n\texport type Point = Cgx.Point;\r\n\r\n\texport type Size = Cgx.Size;\r\n}","\r\nnamespace Vgx {\r\n\r\n\tlet _lastUUIDDate = Date.now();\r\n\r\n\tfunction hue2rgb(p: number, q: number, t: number) {\r\n\t\tif (t < 0) t += 1;\r\n\t\tif (t > 1) t -= 1;\r\n\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\r\n\t\tif (t < 1 / 2) return q;\r\n\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n\t\treturn p;\r\n\t}\r\n\r\n\texport class Utils {\r\n\r\n\t\tpublic static createUUID(includeSeparators = false) {\r\n\t\t\tlet d = new Date().getTime();\r\n\t\t\twhile (_lastUUIDDate === d) {\r\n\t\t\t\td = new Date().getTime();\r\n\t\t\t}\r\n\t\t\t_lastUUIDDate = d;\r\n\t\t\tlet template = 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx';\r\n\t\t\tif (includeSeparators)\r\n\t\t\t\ttemplate = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\r\n\t\t\treturn template.replace(/[xy]/g, function (c) {\r\n\t\t\t\tvar r = (d + Math.random() * 16) % 16 | 0;\r\n\t\t\t\td = Math.floor(d / 16);\r\n\t\t\t\treturn (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic static createCanvasColorOrBrush(canvas: HTMLCanvasElement, value: any) {\r\n\t\t\tif (typeof (value) === \"number\") {\r\n\t\t\t\treturn \"#\" + value.toString(16);\r\n\t\t\t}\r\n\t\t\telse if (typeof (value) === \"string\") {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t\telse if (value instanceof Array) { // [r,g,b,a] | [r,g,b]\r\n\t\t\t\tif (value.length == 3) {\r\n\t\t\t\t\treturn \"rgb(\" + value.join(\",\") + \")\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (value.length == 4) {\r\n\t\t\t\t\treturn \"rgba(\" + value.join(\",\") + \")\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthrow new Error(\"invalid length\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// TODO\r\n\t\t\telse if (value instanceof Cgx.LinearGradientBrush) {\r\n\t\t\t\treturn canvas.getContext(\"2d\").createLinearGradient(value.x0, value.y0, value.x1, value.y1);\r\n\t\t\t}\r\n\t\t\telse if (value instanceof Cgx.RadialGradientBrush) {\r\n\t\t\t\treturn canvas.getContext(\"2d\").createRadialGradient(value.x0, value.y0, value.r0, value.x1, value.y1, value.r1);\r\n\t\t\t}\r\n\t\t\telse if (value instanceof Cgx.PatternBrush) {\r\n\t\t\t\treturn canvas.getContext(\"2d\").createPattern(value.image, value.repetition);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic static hslToRgb(h: number, s: number, l: number) {\r\n\t\t\tlet r, g, b;\r\n\t\t\tif (s == 0) {\r\n\t\t\t\tr = g = b = l;\r\n\t\t\t} else {\r\n\t\t\t\tvar q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n\t\t\t\tvar p = 2 * l - q;\r\n\t\t\t\tr = hue2rgb(p, q, h + 1 / 3);\r\n\t\t\t\tg = hue2rgb(p, q, h);\r\n\t\t\t\tb = hue2rgb(p, q, h - 1 / 3);\r\n\t\t\t}\r\n\t\t\treturn [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\r\n\t\t}\r\n\r\n\t\tpublic static getEntitiesBounds(entities: Collection<VgxEntity>, originX?: number, originY?: number) {\r\n\t\t\tlet result = new Rect();\r\n\t\t\tfor (const element of entities) {\r\n\t\t\t\tresult.union(element.getBounds());\r\n\t\t\t}\r\n\t\t\tif (typeof originX === \"number\") {\r\n\t\t\t\tresult.x += originX;\r\n\t\t\t}\r\n\t\t\tif (typeof originX === \"number\") {\r\n\t\t\t\tresult.y += originY;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n}","\r\n/// <reference path=\"PointDefinitions.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\texport class Vars {\r\n\r\n\t\tprivate static _pointType = PointDefinitions.type1;\r\n        private static _pointSize = 20;\r\n\r\n        private static _fontFamily = \"Arial\";\r\n        private static _fontSize = 16;\r\n\r\n        private static _vertexSize = 4;\r\n        private static _vertexFill: number | string = \"#ddeeff\";\r\n        private static _vertexStroke: number | string = \"#8888ff\";\r\n        private static _vertexStrokeWidth = 1.3;\r\n\r\n\r\n\t\tpublic static readonly defaultStrokeStyle: number | string = \"transparent\";\r\n\r\n\t\tpublic static readonly defaultStrokeWidth: number = 0;\r\n\r\n\t\tpublic static readonly defaultFillStyle: number | string = 0xffffff;\r\n\r\n\r\n\t\tpublic static get pointType() { return this._pointType; }\r\n\t\tpublic static set pointType(v: PointDefinition) { this._pointType = v; }\r\n\r\n\t\tpublic static get pointSize() { return this._pointSize; }\r\n\t\tpublic static set pointSize(v: number) { this._pointSize = v; }\r\n\r\n\t\tpublic static get fontFamily() { return this._fontFamily; }\r\n\t\tpublic static set fontFamily(v: string) { this._fontFamily = v; }\r\n\r\n\t\tpublic static get fontSize() { return this._fontSize; }\r\n\t\tpublic static set fontSize(v: number) { this._fontSize = v; }\r\n\r\n\t\tpublic static get vertexSize() { return this._vertexSize; }\r\n\t\tpublic static set vertexSize(v: number) { this._vertexSize = v; }\r\n\r\n\t\tpublic static get vertexFillColor() { return this._vertexFill; }\r\n\t\tpublic static set vertexFillColor(v: number | string) { this._vertexFill = v; }\r\n\r\n\t\tpublic static get vertexStrokeColor() { return this._vertexStroke; }\r\n\t\tpublic static set vertexStrokeColor(v: number | string) { this._vertexStroke = v; }\r\n\r\n\t\tpublic static get vertexStrokeWidth() { return this._vertexStrokeWidth; }\r\n\t\tpublic static set vertexStrokeWidth(v: number) { this._vertexStrokeWidth = v; }\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n\t// export class VgxTransform {\r\n\r\n\t// \tprivate _matrix: Cgx.Matrix;\r\n\t// \tprivate _matrixInverted: Cgx.Matrix;\r\n    //     private _isDirty = true;\r\n\t// \tprivate _originX = 0.0;\r\n    //     private _originY = 0.0;\r\n    //     private _translationX = 0.0;\r\n    //     private _translationY = 0.0;\r\n    //     private _scaleX = 1.0;\r\n    //     private _scaleY = 1.0;\r\n    //     private _rotation = 0.0;\r\n\r\n\t// \tconstructor() {\r\n\t// \t\tthis._matrix = new Cgx.Matrix();\r\n\t// \t}\r\n\r\n\t// \tprivate _computeInternalMatrix() {\r\n\t// \t\tthis._matrix.reset();\r\n\r\n\t// \t\tthis._matrix.translate(this._translationX, this._translationY);\r\n\t// \t\tthis._matrix.rotate(this._rotation);\r\n\t// \t\tthis._matrix.scale(this._scaleX, this._scaleY);\r\n\r\n\t// \t\tthis._isDirty = false;\r\n\t// \t\tthis._matrixInverted = null;\r\n\t// \t}\r\n\r\n\t// \tprivate _getMatrixInverted() {\r\n\t// \t\t// update matrix if dirty\r\n\t// \t\tthis.getMatrix();\r\n\r\n\t// \t\tif (this._matrix.hasInverse()) {\r\n\t// \t\t\t// check inverted matrix\r\n\t// \t\t\tif (this._matrixInverted == null) {\r\n\t// \t\t\t\tthis._matrixInverted = Cgx.Matrix.invert(this._matrix);\r\n\t// \t\t\t}\r\n\t// \t\t\treturn this._matrixInverted;\r\n\t// \t\t}\r\n\t// \t\telse {\r\n\t// \t\t\treturn this._matrix;\r\n\t// \t\t}\r\n\t// \t}\r\n\r\n\r\n\t// \tprotected _propertyChanged: (propertyName: string) => void = (p) => { };\r\n\r\n\r\n\t// \tpublic get originX() {\r\n    //         return this._originX;\r\n    //     }\r\n    //     public set originX(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._originX !== v) {\r\n    //                 this._originX = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"originX\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get originY() {\r\n    //         return this._originY;\r\n    //     }\r\n    //     public set originY(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._originY !== v) {\r\n    //                 this._originY = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"originY\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get translationX() {\r\n    //         return this._translationX;\r\n    //     }\r\n    //     public set translationX(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._translationX !== v) {\r\n    //                 this._translationX = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"translationX\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get translationY() {\r\n    //         return this._translationY;\r\n    //     }\r\n    //     public set translationY(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._translationY !== v) {\r\n    //                 this._translationY = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"translationY\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get scaleX() {\r\n    //         return this._scaleX;\r\n    //     }\r\n    //     public set scaleX(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._scaleX !== v) {\r\n    //                 this._scaleX = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"scaleX\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get scaleY() {\r\n    //         return this._scaleY;\r\n    //     }\r\n    //     public set scaleY(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._scaleY !== v) {\r\n    //                 this._scaleY = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"scaleY\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get rotation() {\r\n    //         return this._rotation;\r\n    //     }\r\n    //     public set rotation(v: number) {\r\n    //         if (typeof v === \"number\") {\r\n    //             if (this._rotation !== v) {\r\n    //                 this._rotation = v;\r\n    //                 this._isDirty = true;\r\n    //                 this._propertyChanged(\"rotation\");\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     public get isIdentity() {\r\n    //         if (this._translationX == 0 && this._translationY == 0) {\r\n    //             if (this._scaleX == 1 && this._scaleY == 1) {\r\n    //                 if (this._rotation == 0) {\r\n    //                     return true;\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //         return false;\r\n    //     }\r\n\r\n\r\n\t// \tpublic getMatrix() {\r\n\t// \t\tif (this._isDirty) {\r\n\t// \t\t\tthis._computeInternalMatrix();\r\n\t// \t\t}\r\n\t// \t\treturn this._matrix;\r\n\t// \t}\r\n\r\n\t// \tpublic getMatrixInverted() {\r\n\t// \t\treturn this._getMatrixInverted();\r\n\t// \t}\r\n\r\n\t// \tpublic invalidate() {\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\r\n\t// \tpublic reset() {\r\n    //         this._originX = 0.0;\r\n    //         this._originY = 0.0;\r\n    //         this._translationX = 0.0;\r\n    //         this._translationY = 0.0;\r\n    //         this._scaleX = 1.0;\r\n    //         this._scaleY = 1.0;\r\n    //         this._rotation = 0.0;\r\n    //         this._matrix = null;\r\n    //     }\r\n\r\n\t// \tpublic transformPoint(x: number, y: number) {\r\n    //         return this.getMatrix().transformPoint(x, y);\r\n    //     }\r\n\r\n    //     public transformRect(x: number, y: number, width: number, height: number) {\r\n    //         return this.getMatrix().transformRect(x, y, width, height);\r\n    //     }\r\n\t// }\r\n\r\n\t// export class ViewTransform {\r\n\r\n\t// \tprivate _transform = new VgxTransform();\r\n\r\n\t// \t// private _matrix = new Cgx.Matrix();\r\n\t// \t// private _matrixInverted: Cgx.Matrix;\r\n\t// \tprivate _isDirty = true;\r\n\t// \tprivate _viewZoom = 1;\r\n\t// \tprivate _viewTargetX = 0;\r\n\t// \tprivate _viewTargetY = 0;\r\n\t// \tprivate _viewPixelWidth = 1;\r\n\t// \tprivate _viewPixelHeight = 1;\r\n\t// \tprivate _viewPixelHalfWidth = this._viewPixelWidth * 0.5;\r\n\t// \tprivate _viewPixelHalfHeight = this._viewPixelHeight * 0.5;\r\n\r\n\r\n\t// \t// private _computeInternalMatrix() {\r\n\t// \t// \tthis._matrix.reset();\r\n\r\n\t// \t// \tthis._matrix.translate(this._viewPixelHalfWidth, this._viewPixelHalfHeight);\r\n\t// \t// \tthis._matrix.scale(this._viewZoom, this._viewZoom);\r\n\t// \t// \tthis._matrix.translate(-this._viewTargetX, -this._viewTargetY);\r\n\r\n\t// \t// \tthis._isDirty = false;\r\n\t// \t// \tthis._matrixInverted = null;\r\n\r\n\t// \t// \tthis._setTarget(this._viewTargetX, this._viewTargetY);\r\n\t// \t// }\r\n\r\n\t// \t// private _getMatrixInverted() {\r\n\t// \t// \t// update matrix if dirty\r\n\t// \t// \tthis.getMatrix();\r\n\r\n\t// \t// \tif (this._matrix.hasInverse()) {\r\n\t// \t// \t\t// check inverted matrix\r\n\t// \t// \t\tif (this._matrixInverted == null) {\r\n\t// \t// \t\t\tthis._matrixInverted = Cgx.Matrix.invert(this._matrix);\r\n\t// \t// \t\t}\r\n\t// \t// \t\treturn this._matrixInverted;\r\n\t// \t// \t}\r\n\t// \t// \telse {\r\n\t// \t// \t\treturn this._matrix;\r\n\t// \t// \t}\r\n\t// \t// }\r\n\r\n\t// \tprivate _setMatrixOffset(offsetX: number, offsetY: number) {\r\n\t// \t\tthis._matrix.offsetX = offsetX;\r\n    //         this._matrix.offsetY = offsetY;\r\n\t// \t}\r\n\r\n\t// \tprivate _setTarget(x: number, y: number) {\r\n\t// \t\tconst globalViewRect = this.localToGlobalRect(0, 0, this._viewPixelWidth, this._viewPixelHeight);\r\n    //             var offsetX = -x + (globalViewRect.width * 0.5);\r\n    //             var offsetY = -y + (globalViewRect.height * 0.5);\r\n    //             offsetX *= this._viewZoom;\r\n    //             offsetY *= this._viewZoom;\r\n    //             this._setMatrixOffset(offsetX, offsetY);\r\n    //             this._viewTargetX = x;\r\n    //             this._viewTargetY = y;\r\n\t// \t}\r\n\r\n\r\n\r\n\t// \tpublic get viewTargetX() { return this._viewTargetX; }\r\n\t// \tpublic get viewTargetY() { return this._viewTargetY; }\r\n\t// \tpublic get viewZoom() { return this._viewZoom; }\r\n\r\n\r\n\t// \tpublic getMatrix() {\r\n\t// \t\tif (this._isDirty) {\r\n\t// \t\t\tthis._computeInternalMatrix();\r\n\t// \t\t}\r\n\t// \t\treturn this._matrix;\r\n\t// \t}\r\n\r\n\t// \tpublic getViewBounds() {\r\n\t// \t\treturn this.localToGlobalRect(0, 0, this._viewPixelWidth, this._viewPixelHeight);\r\n\t// \t}\r\n\r\n\t// \tpublic globalToLocalPoint(x: number, y: number) {\r\n\t// \t\treturn this._transform.transformPoint(x, y);\r\n\t// \t}\r\n\r\n\t// \tpublic globalToLocalRect(x: number, y: number, width: number, height: number) {\r\n\t// \t\treturn this._transform.transformRect(x, y, width, height);\r\n\t// \t}\r\n\r\n\t// \tpublic localToGlobalPoint(x: number, y: number) {\r\n\t// \t\treturn this._getMatrixInverted().transformPoint(x, y);\r\n\t// \t}\r\n\r\n\t// \tpublic localToGlobalRect(x: number, y: number, width: number, height: number) {\r\n\t// \t\treturn this._getMatrixInverted().transformRect(x, y, width, height);\r\n\t// \t}\r\n\r\n\t// \tpublic moveViewTarget(dx: number, dy: number) {\r\n\t// \t\tthis._setTarget(this._viewTargetX + dx, this._viewTargetY + dy);\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\r\n\t// \tpublic setViewPixelSize(width: number, height: number) {\r\n\t// \t\tthis._viewPixelWidth = width;\r\n\t// \t\tthis._viewPixelHeight = height;\r\n\t// \t\tthis._viewPixelHalfWidth = this._viewPixelWidth * 0.5;\r\n\t// \t\tthis._viewPixelHalfHeight = this._viewPixelHeight * 0.5;\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\r\n\t// \tpublic setViewTarget(tx: number, ty: number) {\r\n\t// \t\tthis._setTarget(tx, ty);\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\r\n\t// \tpublic setViewZoom(value: number) {\r\n\t// \t\tthis._viewZoom = value;\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\r\n\t// \tpublic setViewZoomTo(value: number, tx: number, ty: number) {\r\n\t// \t\tthis._setTarget(tx, ty);\r\n\t// \t\tthis._viewZoom *= value;\r\n\t// \t\tthis._isDirty = true;\r\n\t// \t}\r\n\t// }\r\n\r\n\texport class ViewTransform implements Cgx.ITransform {\r\n\r\n\t\tprivate _matrix = new Cgx.Matrix();\r\n\t\tprivate _matrixInverted: Cgx.Matrix;\r\n\t\tprivate _isDirty = true;\r\n\t\tprivate _viewZoom = 1;\r\n\t\tprivate _viewTargetX = 0;\r\n\t\tprivate _viewTargetY = 0;\r\n\t\tprivate _viewPixelWidth = 1;\r\n\t\tprivate _viewPixelHeight = 1;\r\n\t\tprivate _viewPixelHalfWidth = this._viewPixelWidth * 0.5;\r\n\t\tprivate _viewPixelHalfHeight = this._viewPixelHeight * 0.5;\r\n\r\n\r\n\t\tprivate _computeInternalMatrix() {\r\n\t\t\tthis._matrix.reset();\r\n\r\n\t\t\tthis._matrix.translate(this._viewPixelHalfWidth, this._viewPixelHalfHeight);\r\n\t\t\tthis._matrix.scale(this._viewZoom, this._viewZoom);\r\n\t\t\tthis._matrix.translate(-this._viewTargetX, -this._viewTargetY);\r\n\r\n\t\t\tthis._isDirty = false;\r\n\t\t\tthis._matrixInverted = null;\r\n\r\n\t\t\tthis._setTarget(this._viewTargetX, this._viewTargetY);\r\n\t\t}\r\n\r\n\t\tprivate _getMatrixInverted() {\r\n\t\t\t// update matrix if dirty\r\n\t\t\tthis.getMatrix();\r\n\r\n\t\t\tif (this._matrix.hasInverse()) {\r\n\t\t\t\t// check inverted matrix\r\n\t\t\t\tif (this._matrixInverted == null) {\r\n\t\t\t\t\tthis._matrixInverted = Cgx.Matrix.invert(this._matrix);\r\n\t\t\t\t}\r\n\t\t\t\treturn this._matrixInverted;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this._matrix;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate _setMatrixOffset(offsetX: number, offsetY: number) {\r\n\t\t\tthis._matrix.offsetX = offsetX;\r\n            this._matrix.offsetY = offsetY;\r\n\t\t}\r\n\r\n\t\tprivate _setTarget(x: number, y: number) {\r\n\t\t\tconst globalViewRect = this.localToGlobalRect(0, 0, this._viewPixelWidth, this._viewPixelHeight);\r\n                var offsetX = -x + (globalViewRect.width * 0.5);\r\n                var offsetY = -y + (globalViewRect.height * 0.5);\r\n                offsetX *= this._viewZoom;\r\n                offsetY *= this._viewZoom;\r\n                this._setMatrixOffset(offsetX, offsetY);\r\n                this._viewTargetX = x;\r\n                this._viewTargetY = y;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tpublic get viewTargetX() { return this._viewTargetX; }\r\n\t\tpublic get viewTargetY() { return this._viewTargetY; }\r\n\t\tpublic get viewZoom() { return this._viewZoom; }\r\n\r\n\r\n\t\tpublic getMatrix() {\r\n\t\t\tif (this._isDirty) {\r\n\t\t\t\tthis._computeInternalMatrix();\r\n\t\t\t}\r\n\t\t\treturn this._matrix;\r\n\t\t}\r\n\r\n\t\tpublic getViewBounds() {\r\n\t\t\treturn this.localToGlobalRect(0, 0, this._viewPixelWidth, this._viewPixelHeight);\r\n\t\t}\r\n\r\n\t\tpublic globalToLocalPoint(x: number, y: number) {\r\n\t\t\treturn this.getMatrix().transformPoint(x, y);\r\n\t\t}\r\n\r\n\t\tpublic globalToLocalRect(x: number, y: number, width: number, height: number) {\r\n\t\t\treturn this.getMatrix().transformRect(x, y, width, height);\r\n\t\t}\r\n\r\n\t\tpublic localToGlobalPoint(x: number, y: number) {\r\n\t\t\treturn this._getMatrixInverted().transformPoint(x, y);\r\n\t\t}\r\n\r\n\t\tpublic localToGlobalRect(x: number, y: number, width: number, height: number) {\r\n\t\t\treturn this._getMatrixInverted().transformRect(x, y, width, height);\r\n\t\t}\r\n\r\n\t\tpublic moveViewTarget(dx: number, dy: number) {\r\n\t\t\tthis._setTarget(this._viewTargetX + dx, this._viewTargetY + dy);\r\n\t\t\tthis._isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic setViewPixelSize(width: number, height: number) {\r\n\t\t\tthis._viewPixelWidth = width;\r\n\t\t\tthis._viewPixelHeight = height;\r\n\t\t\tthis._viewPixelHalfWidth = this._viewPixelWidth * 0.5;\r\n\t\t\tthis._viewPixelHalfHeight = this._viewPixelHeight * 0.5;\r\n\t\t\tthis._isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic setViewTarget(tx: number, ty: number) {\r\n\t\t\tthis._setTarget(tx, ty);\r\n\t\t\tthis._isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic setViewZoom(value: number) {\r\n\t\t\tthis._viewZoom = value;\r\n\t\t\tthis._isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic setViewZoomTo(value: number, tx: number, ty: number) {\r\n\t\t\tthis._setTarget(tx, ty);\r\n\t\t\tthis._viewZoom *= value;\r\n\t\t\tthis._isDirty = true;\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace Vgx {\r\n\r\n    export class Collection<TElement extends any> implements Iterable<TElement> {\r\n\r\n        private _items: TElement[];\r\n\r\n        constructor() {\r\n\t\t\tthis._items = [];\r\n\t\t}\r\n\r\n        *[Symbol.iterator](): Iterator<TElement, any, undefined> {\r\n\t\t\tyield* this._items;\r\n\t\t}\r\n\r\n\r\n        protected _getItems(): ReadonlyArray<TElement> {\r\n            return this._items;\r\n        }\r\n\r\n\r\n        public add(item: TElement) {\r\n\t\t\treturn this.insert(this._items.length - 1, item);\r\n\t\t}\r\n\r\n\t\tpublic addRange(items: TElement[]) {\r\n\t\t\treturn this.insertRange(this._items.length - 1, items);\r\n\t\t}\r\n\r\n\t\tpublic elementAt(index: number) {\r\n\t\t\treturn this._items[index];\r\n\t\t}\r\n\r\n\t\tpublic indexOf(value: any, selector: (x: TElement) => any = null) {\r\n\t\t\tif (typeof selector === \"function\") {\r\n\t\t\t\tlet result = -1;\r\n\t\t\t\tlet i = 0;\r\n\t\t\t\tfor (const element of this._items) {\r\n\t\t\t\t\tif (selector(element) === value) {\r\n\t\t\t\t\t\tresult = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this._items.indexOf(value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n        public toArray() {\r\n            return this._items.slice(0);\r\n        }\r\n\r\n\r\n        public get count() { return this._items.length; }\r\n\r\n\r\n        // virtual\r\n        protected _onClearCompleted(items: TElement[]) {}\r\n        protected _onInsertCompleted(index: number, items: TElement[]) {}\r\n        protected _onRemoveCompleted(index: number, items: TElement[]) {}\r\n\r\n\r\n        public clear() {\r\n\t\t\tconst oldItems = this._items;\r\n\t\t\tthis._items = [];\r\n\t\t\tthis._onClearCompleted(oldItems);\r\n\t\t}\r\n\r\n\t\tpublic insert(index: number, item: TElement) {\r\n\t\t\tif (index < 0)\r\n\t\t\t\tindex = 0;\r\n\t\t\tif (index >= this._items.length)\r\n\t\t\t\tindex = this._items.length;\r\n\t\t\tif (index === this._items.length) {\r\n\t\t\t\tthis._items.push(item);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._items.splice(index, 0, item);\r\n\t\t\t}\r\n\t\t\tthis._onInsertCompleted(index, [item]);\r\n\t\t\treturn index;\r\n\t\t}\r\n\r\n\t\tpublic insertRange(index: number, items: TElement[]) {\r\n\t\t\tlet i;\r\n\t\t\tif (index < 0)\r\n\t\t\t\tindex = 0;\r\n\t\t\tif (index >= this._items.length)\r\n\t\t\t\tindex = this._items.length;\r\n\t\t\tif (index === this._items.length) {\r\n\t\t\t\tfor (const item of items) {\r\n\t\t\t\t\tthis._items.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._items.splice(index, 0, ...items);\r\n\t\t\t}\r\n\t\t\tif (this._items.length > index) {\r\n\t\t\t\tthis._onInsertCompleted(index, items);\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t}\r\n\r\n\t\tpublic remove(value: any, selector: (x: TElement) => any = null) {\r\n\t\t\tlet itemIndex = this.indexOf(value, selector);\r\n\t\t\tif (itemIndex === -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst deletedItems = this._items.splice(itemIndex, 1);\r\n\t\t\tthis._onRemoveCompleted(itemIndex, deletedItems);\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tpublic removeAt(index: number) {\r\n\t\t\tif (index < 0 || index >= this._items.length) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tconst deletedItems = this._items.splice(index, 1);\r\n\t\t\tthis._onRemoveCompleted(index, deletedItems);\r\n\t\t\treturn deletedItems[0];\r\n\t\t}\r\n\r\n\t\tpublic removeAny(predicate: (x: TElement) => boolean) {\r\n\t\t\tlet deletedItems: any[] = [];\r\n\t\t\tlet index = -1;\r\n\t\t\tlet i = 0;\r\n\t\t\tfor (const element of this._items) {\r\n\t\t\t\tif (predicate(element)) {\r\n\t\t\t\t\tdeletedItems.push(element);\r\n\t\t\t\t\tif (index < 0) {\r\n\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._items.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tif (deletedItems.length > 0) {\r\n\t\t\t\tthis._onRemoveCompleted(index, deletedItems );\r\n\t\t\t}\r\n\t\t\treturn deletedItems;\r\n\t\t}\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n    export interface EventArgs { [name: string]: any };\r\n\r\n    export type EventHandler<TOwner, TArgs> = (sender: TOwner, eventArgs: TArgs) => void;\r\n\r\n    export interface EventOptions {\r\n        once: boolean;\r\n    }\r\n\r\n    export interface EventGroup<T, TArgs> {\r\n        eventName: string;\r\n        entries: Array<EventEntry<T, TArgs>>;\r\n    }\r\n\r\n    export interface EventEntry<T, TArgs> {\r\n        handler: EventHandler<T, TArgs>;\r\n        options: EventOptions;\r\n        bindTarget: any\r\n    }\r\n\r\n    export interface IEventSet<TOwner, TArgs> {\r\n        add(handler: EventHandler<TOwner, TArgs>): void;\r\n        once(handler: EventHandler<TOwner, TArgs>): void;\r\n        remove(handler: EventHandler<TOwner, TArgs>): void;\r\n        has(handler: EventHandler<TOwner, TArgs>): boolean;\r\n        trigger(args?: TArgs): void;\r\n        stop(): void;\r\n        resume(): void;\r\n    }\r\n\r\n\r\n    export class EventSet<TOwner, TArgs> implements IEventSet<TOwner, TArgs> {\r\n\r\n        private _eventsManager: EventsManager;\r\n        private _eventName: string;\r\n        private _bindTarget: any;\r\n\r\n        constructor(eventGroup: EventsManager, eventName: string, bindTarget?: any) {\r\n            this._bindTarget = bindTarget;\r\n            this._eventsManager = eventGroup;\r\n            this._eventName = eventName;\r\n        }\r\n\r\n        add(handler: EventHandler<TOwner, TArgs>, bindTarget?: any): void {\r\n            this._eventsManager.attach<TArgs>(this._eventName, handler, { once: false }, bindTarget || this._bindTarget);\r\n        }\r\n        once(handler: EventHandler<TOwner, TArgs>): void {\r\n            this._eventsManager.attach<TArgs>(this._eventName, handler, { once: true }, this._bindTarget);\r\n        }\r\n        remove(handler: EventHandler<TOwner, TArgs>): void {\r\n            this._eventsManager.detach<TArgs>(this._eventName, handler);\r\n        }\r\n        has(handler: EventHandler<TOwner, TArgs>): boolean {\r\n            return this._eventsManager.hasHandler<TArgs>(this._eventName, handler);\r\n        }\r\n        trigger(args?: TArgs): void {\r\n            this._eventsManager.trigger(this._eventName, args);\r\n        }\r\n        stop(): void {\r\n            this._eventsManager.stop(this._eventName);\r\n        }\r\n        resume(): void {\r\n            this._eventsManager.resume(this._eventName);\r\n        }\r\n    }\r\n\r\n    export class EventsManager {\r\n\r\n        private readonly _owner: any;\r\n        private readonly _validEventOptions = [\"once\"];\r\n\r\n        private _events: Map<string, EventGroup<any, any>>;\r\n        private _disabledEventsNames: string[] = [];\r\n\r\n        constructor(owner: any) {\r\n            this._owner = owner;\r\n            this._events = new Map<string, EventGroup<any, any>>();\r\n        }\r\n\r\n\r\n        private getHandlerEntryIndex<TArgs>(evntGroup: EventGroup<any, TArgs>, eventHandler: EventHandler<any, TArgs>): number {\r\n            var positions = evntGroup.entries.map((v, i) => v.handler === eventHandler ? i : -1).filter(v => v >= 0);\r\n            if (positions.length == 0) {\r\n                return -1;\r\n            }\r\n            return positions[0];\r\n        }\r\n\r\n        public attach<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>, eventOptions?: EventOptions, bindTarget?: any) {\r\n\r\n            if (typeof eventHandler !== \"function\") {\r\n                return;\r\n            }\r\n\r\n            let lowerEventName = eventName.toLowerCase();\r\n\r\n            let eventEntry = {\r\n                handler: eventHandler,\r\n                options: eventOptions,\r\n                bindTarget: bindTarget\r\n            };\r\n\r\n            if (this._events.has(lowerEventName)) {\r\n                let eventGroupEntry = this._events.get(lowerEventName);\r\n                eventGroupEntry.entries.push(eventEntry);\r\n            }\r\n            else {\r\n                let eventGroupEntry: EventGroup<any, TArgs> = {\r\n                    eventName: eventName,\r\n                    entries: [eventEntry]\r\n                };\r\n                this._events.set(lowerEventName, eventGroupEntry);\r\n            }\r\n        }\r\n\r\n        public detach<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>) {\r\n\r\n            if (typeof eventHandler !== \"function\") {\r\n                return;\r\n            }\r\n\r\n            let lowerEventName = eventName.toLowerCase();\r\n\r\n            if (!this._events.has(lowerEventName)) {\r\n                return;\r\n            }\r\n\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n\r\n            let entryIndex = this.getHandlerEntryIndex(eventGroupEntry, eventHandler);\r\n            if (entryIndex >= 0) {\r\n                eventGroupEntry.entries.splice(entryIndex, 1);\r\n            }\r\n        }\r\n\r\n        public trigger<TArgs>(eventName: string, args?: TArgs) {\r\n\r\n            var lowerEventName = eventName.toLowerCase();\r\n\r\n            if (!this._events.has(lowerEventName)) {\r\n                return;\r\n            }\r\n\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n\r\n            var disabledEventIndex = this._disabledEventsNames.indexOf(lowerEventName);\r\n            if (disabledEventIndex !== -1 || this._disabledEventsNames.indexOf(\"*\") !== -1)\r\n                return;\r\n\r\n            let handlersToDetach: Array<EventHandler<any, TArgs>> = [];\r\n\r\n            for (let eventEntry of eventGroupEntry.entries) {\r\n\r\n                let handler = eventEntry.handler;\r\n                if (eventEntry.bindTarget) {\r\n                    handler = eventEntry.handler.bind(eventEntry.bindTarget);\r\n                }\r\n\r\n                // TODO: handle options \r\n                let removeAfter = false;\r\n                if (eventEntry.options && \"once\" in eventEntry.options) {\r\n                    removeAfter = !!eventEntry.options.once;\r\n                }\r\n\r\n                handler(this._owner, args);\r\n\r\n                if (removeAfter) {\r\n                    handlersToDetach.push(handler);\r\n                }\r\n            }\r\n\r\n            for (let detachableHandler of handlersToDetach) {\r\n                this.detach(eventName, detachableHandler);\r\n            }\r\n        }\r\n\r\n        public getHandlersCount(eventName: string): number {\r\n            let lowerEventName = eventName.toLowerCase();\r\n            if (!this._events.has(lowerEventName)) {\r\n                return 0;\r\n            }\r\n            return this._events.get(lowerEventName).entries.length;\r\n        }\r\n\r\n        public hasHandler<TArgs>(eventName: string, eventHandler: EventHandler<any, TArgs>): boolean {\r\n            if (typeof eventHandler !== \"function\") {\r\n                return false;\r\n            }\r\n            let lowerEventName = eventName.toLowerCase();\r\n            if (!this._events.has(lowerEventName)) {\r\n                return false;\r\n            }\r\n            let eventGroupEntry = this._events.get(lowerEventName);\r\n            return this.getHandlerEntryIndex(eventGroupEntry, eventHandler) >= 0;\r\n        }\r\n\r\n        public stop(eventName?: string) {\r\n            if (typeof eventName === \"undefined\") {\r\n                this._disabledEventsNames = [\"*\"];\r\n            }\r\n            else if (typeof eventName === \"string\") {\r\n                var eventIndex = this._disabledEventsNames.indexOf(eventName.toLowerCase());\r\n                if (eventIndex != -1)\r\n                    return;\r\n                this._disabledEventsNames.push(eventName.toLowerCase());\r\n            }\r\n        }\r\n\r\n        public resume(eventName?: string) {\r\n            if (typeof eventName === \"undefined\") {\r\n                this._disabledEventsNames = [];\r\n            }\r\n            else if (typeof eventName === \"string\") {\r\n                var eventIndex = this._disabledEventsNames.indexOf(eventName.toLowerCase());\r\n                if (eventIndex == -1)\r\n                    return;\r\n                this._disabledEventsNames.splice(eventIndex, 1);\r\n            }\r\n        }\r\n\r\n        public create<TArgs>(eventName: string) {\r\n            var eventGroupObj = new EventSet<any, TArgs>(this, eventName);\r\n            var descriptor = {\r\n                enumerable: true,\r\n                value: eventGroupObj\r\n            };\r\n            if (!(eventName in this._owner)) {\r\n                Object.defineProperty(this._owner, eventName, descriptor);\r\n            }\r\n            return eventGroupObj;\r\n        }\r\n\r\n        public createEventArgs(data?: { [name: string]: any }): EventArgs {\r\n            var result: EventArgs = {};\r\n            if (typeof data === \"object\") {\r\n                for (let k in Object.keys(data)) {\r\n                    result[k] = data[k];\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n}","/// <reference path=\"Collection.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export enum CollectionChangedAction {\r\n\t\tAdded,\r\n\t\tRemoved,\r\n\t\tCleared\r\n\t}\r\n\r\n\texport interface CollectionChangedArgs<TElement extends any> extends EventArgs {\r\n\t\treadonly action: CollectionChangedAction;\r\n\t\treadonly index: number;\r\n\t\treadonly items: TElement[];\r\n\t}\r\n\r\n\texport class ReactiveCollection<TElement extends any> extends Collection<TElement> {\r\n\r\n\t\tprivate readonly _events: EventsManager;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._events = new EventsManager(this);\r\n\t\t\tthis.onCollectionChanged = new EventSet<ReactiveCollection<TElement>, CollectionChangedArgs<TElement>>(this._events, \"onCollectionChanged\");\r\n\t\t}\r\n\r\n\t\tprivate _raiseCollectionChanged(action: CollectionChangedAction, index: number, items: TElement[]) {\r\n\t\t\tthis._events.trigger(\"onCollectionChanged\", { \r\n\t\t\t\taction,\r\n\t\t\t\tindex,\r\n\t\t\t\titems\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic readonly onCollectionChanged: EventSet<ReactiveCollection<TElement>, CollectionChangedArgs<TElement>>;\r\n\r\n\r\n\t\tprotected _onClearCompleted(items: TElement[]) {\r\n\t\t\tthis._raiseCollectionChanged(CollectionChangedAction.Cleared, 0, items);\r\n\t\t}\r\n\r\n\t\tprotected _onInsertCompleted(index: number, items: TElement[]) {\r\n\t\t\tthis._raiseCollectionChanged(CollectionChangedAction.Added, index, items);\r\n\t\t}\r\n\r\n        protected _onRemoveCompleted(index: number, items: TElement[]) {\r\n\t\t\tthis._raiseCollectionChanged(CollectionChangedAction.Removed, index, items);\r\n\t\t}\r\n\t}\r\n\r\n    // export class ReactiveCollection<TElement extends any> implements Iterable<TElement> {\r\n\r\n\t// \tprivate readonly _events: EventsManager;\r\n\t// \tprivate _items: TElement[];\r\n\r\n\t// \tconstructor() {\r\n\t// \t\tthis._events = new EventsManager(this);\r\n\t// \t\tthis.onCollectionChanged = new EventSet<ReactiveCollection<TElement>, CollectionChangedArgs<TElement>>(this._events, \"onCollectionChanged\");\r\n\t// \t\tthis._items = [];\r\n\t// \t}\r\n\r\n\t// \t*[Symbol.iterator](): Iterator<TElement, any, undefined> {\r\n\t// \t\tyield* this._items;\r\n\t// \t}\r\n\r\n\t// \tprotected _raiseCollectionChanged(action: CollectionChangedAction, index: number, items: TElement[]) {\r\n\t// \t\tthis._events.trigger(\"onCollectionChanged\", { \r\n\t// \t\t\taction,\r\n\t// \t\t\tindex,\r\n\t// \t\t\titems\r\n\t// \t\t});\r\n\t// \t}\r\n\r\n\t// \tpublic readonly onCollectionChanged: EventSet<ReactiveCollection<TElement>, CollectionChangedArgs<TElement>>;\r\n\r\n\r\n\t// \tpublic add(item: TElement) {\r\n\t// \t\treturn this.insert(this._items.length - 1, item);\r\n\t// \t}\r\n\r\n\t// \tpublic addRange(items: TElement[]) {\r\n\t// \t\treturn this.insertRange(this._items.length - 1, items);\r\n\t// \t}\r\n\r\n\t// \tpublic clear() {\r\n\t// \t\tconst oldItems = this._items;\r\n\t// \t\tthis._items = [];\r\n\t// \t\tthis._raiseCollectionChanged(CollectionChangedAction.Cleared, 0, oldItems);\r\n\t// \t}\r\n\r\n\t// \tpublic elementAt(index: number) {\r\n\t// \t\treturn this._items[index];\r\n\t// \t}\r\n\r\n\t// \tpublic indexOf(value: any, selector: (x: TElement) => any = null) {\r\n\t// \t\tif (typeof selector === \"function\") {\r\n\t// \t\t\tlet result = -1;\r\n\t// \t\t\tlet i = 0;\r\n\t// \t\t\tfor (const element of this._items) {\r\n\t// \t\t\t\tif (selector(element) === value) {\r\n\t// \t\t\t\t\tresult = i;\r\n\t// \t\t\t\t\tbreak;\r\n\t// \t\t\t\t}\r\n\t// \t\t\t\ti++;\r\n\t// \t\t\t}\r\n\t// \t\t\treturn result;\r\n\t// \t\t}\r\n\t// \t\telse {\r\n\t// \t\t\treturn this._items.indexOf(value);\r\n\t// \t\t}\r\n\t// \t}\r\n\r\n\t// \tpublic insert(index: number, item: TElement) {\r\n\t// \t\tif (index < 0)\r\n\t// \t\t\tindex = 0;\r\n\t// \t\tif (index >= this._items.length)\r\n\t// \t\t\tindex = this._items.length;\r\n\t// \t\tif (index === this._items.length) {\r\n\t// \t\t\tthis._items.push(item);\r\n\t// \t\t}\r\n\t// \t\telse {\r\n\t// \t\t\tthis._items.splice(index, 0, item);\r\n\t// \t\t}\r\n\t// \t\tthis._raiseCollectionChanged(CollectionChangedAction.Added, index, [item]);\r\n\t// \t\treturn index;\r\n\t// \t}\r\n\r\n\t// \tpublic insertRange(index: number, items: TElement[]) {\r\n\t// \t\tlet i;\r\n\t// \t\tif (index < 0)\r\n\t// \t\t\tindex = 0;\r\n\t// \t\tif (index >= this._items.length)\r\n\t// \t\t\tindex = this._items.length;\r\n\t// \t\tif (index === this._items.length) {\r\n\t// \t\t\tfor (const item of items) {\r\n\t// \t\t\t\tthis._items.push(item);\r\n\t// \t\t\t}\r\n\t// \t\t}\r\n\t// \t\telse {\r\n\t// \t\t\tthis._items.splice(index, 0, ...items);\r\n\t// \t\t}\r\n\t// \t\tif (this._items.length > index) {\r\n\t// \t\t\tthis._raiseCollectionChanged(CollectionChangedAction.Added, index, items);\r\n\t// \t\t}\r\n\t// \t\treturn index;\r\n\t// \t}\r\n\r\n\t// \tpublic remove(value: any, selector: (x: TElement) => any = null) {\r\n\t// \t\tlet itemIndex = this.indexOf(value, selector);\r\n\t// \t\tif (itemIndex === -1) {\r\n\t// \t\t\treturn false;\r\n\t// \t\t}\r\n\t// \t\tconst deletedItems = this._items.splice(itemIndex, 1);\r\n\t// \t\tthis._raiseCollectionChanged(CollectionChangedAction.Removed, itemIndex, deletedItems);\r\n\t// \t\treturn true;\r\n\t// \t}\r\n\r\n\t// \tpublic removeAt(index: number) {\r\n\t// \t\tif (index < 0 || index >= this._items.length) {\r\n\t// \t\t\treturn null;\r\n\t// \t\t}\r\n\t// \t\tconst deletedItems = this._items.splice(index, 1);\r\n\t// \t\tthis._raiseCollectionChanged(CollectionChangedAction.Removed, index, deletedItems);\r\n\t// \t\treturn deletedItems[0];\r\n\t// \t}\r\n\r\n\t// \tpublic removeAny(predicate: (x: TElement) => boolean) {\r\n\t// \t\tlet deletedItems: any[] = [];\r\n\t// \t\tlet index = -1;\r\n\t// \t\tlet i = 0;\r\n\t// \t\tfor (const element of this._items) {\r\n\t// \t\t\tif (predicate(element)) {\r\n\t// \t\t\t\tdeletedItems.push(element);\r\n\t// \t\t\t\tif (index < 0) {\r\n\t// \t\t\t\t\tindex = i;\r\n\t// \t\t\t\t}\r\n\t// \t\t\t\tthis._items.splice(i, 1);\r\n\t// \t\t\t}\r\n\t// \t\t\ti++;\r\n\t// \t\t}\r\n\t// \t\tif (deletedItems.length > 0) {\r\n\t// \t\t\tthis._raiseCollectionChanged(CollectionChangedAction.Removed, index, deletedItems );\r\n\t// \t\t}\r\n\t// \t\treturn deletedItems;\r\n\t// \t}\r\n\r\n    //     public toArray() {\r\n    //         return this._items.slice(0);\r\n    //     }\r\n\r\n\r\n\t// \tpublic get count() { return this._items.length; }\r\n\t// }\r\n}","\r\nnamespace Vgx {\r\n\r\n    export abstract class Importer {\r\n\r\n        public abstract load(source: any) : Promise<Drawing>;\r\n\r\n        // virtual\r\n        public async loadFile(url: string) : Promise<Drawing> {\r\n            const response = await fetch(url);\r\n\t\t    const text = await response.text();\r\n            return this.load(text);\r\n        }\r\n    }\r\n}","\r\n/// <reference path=\"../core/DictionaryObject.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\tinterface ImporterDefinition {\r\n\t\tname: string;\r\n\t\ttypeName: string;\r\n\t\tmimeTypes: string[];\r\n\t\tdefaultValues: DynamicObject;\r\n\t}\r\n\r\n\texport class ImportersManager {\r\n\r\n\t\tprivate static _defaultType: ImporterDefinition;\r\n\t\tprivate static _registeredTypes: DictionaryObject<string, ImporterDefinition> = new DictionaryObject();\r\n\r\n\r\n\t\tpublic static registerType(name: string, typeName: string, mimeTypes: string[] = null, defaultValues: DynamicObject = null) {\r\n\t\t\tif (this._registeredTypes.containsKey(name)) {\r\n\t\t\t\tthrow new Error(`importer '${name}' already defined`);\r\n\t\t\t}\r\n\t\t\tconst definition = { name, typeName, mimeTypes, defaultValues };\r\n\t\t\tthis._registeredTypes.set(name, definition);\r\n\t\t}\r\n\r\n\t\tpublic static registerTypeAsDefault(name: string, typeName: string, mimeTypes: string[] = null, defaultValues: DynamicObject = null) {\r\n\t\t\tthis.registerType(name, typeName, mimeTypes, defaultValues);\r\n\t\t\tthis._defaultType = this._registeredTypes.get(name);\r\n\t\t}\r\n\r\n\t\tpublic static getDefault() {\r\n\t\t\tif (this._defaultType) {\r\n\t\t\t\treturn this._defaultType;\r\n\t\t\t}\r\n\t\t\tif (this._registeredTypes.count > 0) {\r\n\t\t\t\treturn this._registeredTypes.first;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic static getType(name: string, throwException: boolean = false) {\r\n\t\t\tif (!this._registeredTypes.containsKey(name)) {\r\n\t\t\t\tif (throwException) {\r\n\t\t\t\t\tthrow new Error(`type '${name}' doesn't exists`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._registeredTypes.get(name);\r\n\t\t}\r\n\r\n\t\tpublic static getTypeOrDefault(name: string) {\r\n\t\t\tlet type = this.getType(name, false);\r\n\t\t\tif (!type) {\r\n\t\t\t\ttype = this.getDefault();\r\n\t\t\t}\r\n\t\t\treturn type;\r\n\t\t}\r\n\t}\r\n}","\r\n/// <reference path=\"Importer.ts\" />\r\n/// <reference path=\"ImportersManager.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export class JsonImporter extends Importer {\r\n\r\n        public load(source: any): Promise<Drawing> {\r\n            return new Promise<Drawing>((resolve, reject) => {\r\n                try {\r\n                    let drawing: Drawing;\r\n                    if (typeof(source) === \"string\") {\r\n                        const jobject = JSON.parse(source) as DynamicObject;\r\n                        drawing = DrawingLoader.loadFromObject(jobject);\r\n                    }\r\n                    else if (typeof(source) === \"object\") {\r\n                        drawing = DrawingLoader.loadFromObject(source as DynamicObject);\r\n                    }\r\n                    else {\r\n                        throw new Error(`unexpected type ${typeof(source)}`);\r\n                    }\r\n                    resolve(drawing);\r\n                }\r\n                catch(err) {\r\n                    reject(err);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ImportersManager.registerTypeAsDefault(\"json\", \"Vgx.JsonImporter\", [\"application/json\"]);\r\n}","\r\nnamespace Vgx {\r\n\r\n    export class ScriptImporter extends Importer {\r\n\r\n        public load(source: any): Promise<Drawing> {\r\n            \r\n            return new Promise<Drawing>((resolve, reject) => {\r\n                try {\r\n                    var drawing = new Drawing();\r\n                    // eval(script);\r\n                    // resolve(drawing);\r\n        \r\n                    const func = new Function(\"drawing\", source);\r\n                    func.call(null, drawing);\r\n                    resolve(drawing);\r\n                } \r\n                catch (err) {\r\n                    reject(err);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    ImportersManager.registerType(\"script\", \"Vgx.ScriptImporter\", [\"text/javascript \"]);\r\n}","\r\n/// <reference path=\"Importer.ts\" />\r\n/// <reference path=\"ImportersManager.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export class SvgImporter {\r\n\r\n        constructor() {\r\n        }\r\n\r\n        private async loadSvgFile(url: string) : Promise<Drawing> {\r\n\r\n            const response = await fetch(url);\r\n\t\t    const svgCode = await response.text();\r\n            return this.loadSvgCode(svgCode);\r\n        }\r\n\r\n        private loadSvgCode(svgCode: string) : Drawing {\r\n\r\n            const result = new Drawing();\r\n            const parser = new DOMParser();\r\n            const document = parser.parseFromString(svgCode, \"image/svg+xml\");\r\n\r\n            // TODO\r\n\r\n            return result;\r\n        }\r\n\r\n        public async loadSvg(svg: string) : Promise<Drawing> {\r\n            if (svg.startsWith('<')) {\r\n                return this.loadSvgCode(svg);\r\n            }\r\n            return this.loadSvgFile(svg);\r\n        }\r\n    }\r\n\r\n    ImportersManager.registerType(\"svg\", \"Vgx.SvgImporter\", [\"image/svg+xml\"]);\r\n}","\r\nnamespace Vgx {\r\n\r\n\texport abstract class VgxObject {\r\n\r\n\t\tprivate readonly _events: EventsManager;\r\n\r\n\t\tprivate _handle: string;\r\n\t\tprivate _drawing: Drawing;\r\n\t\tprivate _bindings: DynamicObject;\r\n\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._bindings = {};\r\n\t\t\tthis._events = new EventsManager(this);\r\n\t\t\tthis.onHandleCreated = new EventSet<VgxObject, EventArgs>(this._events, \"onHandleCreated\");\r\n\t\t\tthis.onHandleDestroyed = new EventSet<VgxObject, EventArgs>(this._events, \"onHandleDestroyed\");\r\n\t\t}\r\n\r\n\r\n\t\tprivate _addToDrawing() {\r\n\t\t\tthis._handle = this._drawing.getFreeHandle();\r\n\t\t\tif (<VgxEntity>(<unknown>this)) {\r\n\t\t\t\tthis._drawing.addChild(<VgxEntity>(<unknown>this));\r\n\t\t\t\tthis._addedToDrawing();\r\n\t\t\t}\r\n\t\t\tthis._events.trigger(\"onHandleCreated\", {});\r\n\t\t}\r\n\r\n\t\tprivate _removeFromDrawing() {\r\n\t\t\tif (this._handle) {\r\n\t\t\t\tthis._handle = null;\r\n\t\t\t\tthis._events.trigger(\"onHandleDestroyed\", {});\r\n\t\t\t}\r\n\t\t\tif (this._drawing) {\r\n\t\t\t\tif (<VgxEntity>(<unknown>this)) {\r\n\t\t\t\t\tthis._drawing.removeChild(<VgxEntity>(<unknown>this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// virtual\r\n\t\tprotected _addedToDrawing() { }\r\n\r\n\t\tprotected _getValue(propertyName: string, defaultValue: any) {\r\n\t\t\tif (propertyName in this._bindings) {\r\n\t\t\t\treturn this._bindings[propertyName]();\r\n\t\t\t} else {\r\n\t\t\t\treturn defaultValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic abstract getBounds(): Rect;\r\n\r\n\r\n\t\tpublic get drawing() { return this._drawing; }\r\n\r\n\t\tpublic get handle() { return this._handle; }\r\n\r\n\r\n\t\tpublic addToDrawing(drawing: Drawing) {\r\n\t\t\tif (this._drawing != drawing) {\r\n\t\t\t\t// rimuove l'oggetto da un eventuale drawing precedente\r\n\t\t\t\tthis.removeFromDrawing();\r\n\t\t\t\t// memorizza il nuovo drawing\r\n\t\t\t\tthis._drawing = drawing;\r\n\t\t\t\t// aggiunge l'oggetto al drawing\r\n\t\t\t\tthis._addToDrawing();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic removeFromDrawing() {\r\n\t\t\tthis._removeFromDrawing();\r\n\t\t}\r\n\r\n\t\tpublic setBinding(propertyName: string, binding: any) {\r\n\t\t\tif (!binding) {\r\n\t\t\t\tdelete this._bindings[propertyName];\r\n\t\t\t} else {\r\n\t\t\t\tthis._bindings[propertyName] = binding;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic readonly onHandleCreated: EventSet<VgxObject, EventArgs>;\r\n\r\n\t\tpublic readonly onHandleDestroyed: EventSet<VgxObject, EventArgs>;\r\n\t}\r\n}","\r\n/// <reference path=\"VgxObject.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\texport abstract class VgxDrawable extends VgxObject {\r\n\r\n        private _visible = true;\r\n        private _appearanceDirty = true;\r\n        private _geometryDirty = true;\r\n        private _positionDirty = true;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t// @virtual\r\n\t\tpublic draw(drawingContext: DrawingContext) { }\r\n\r\n\r\n\t\tpublic get appearanceDirty() { return this._appearanceDirty; }\r\n\t\tpublic set appearanceDirty(v: boolean) {\r\n\t\t\tv = !!v;\r\n\t\t\tthis._appearanceDirty = v;\r\n\t\t\tif (v && this.drawing)\r\n\t\t\t\tthis.drawing.isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic get geometryDirty() { return this._geometryDirty; }\r\n\t\tpublic set geometryDirty(v: boolean) {\r\n\t\t\tv = !!v;\r\n\t\t\tthis._geometryDirty = v;\r\n\t\t\tif (v && this.drawing)\r\n\t\t\t\tthis.drawing.isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic get positionDirty() { return this._positionDirty; }\r\n\t\tpublic set positionDirty(v: boolean) {\r\n\t\t\tv = !!v;\r\n\t\t\tthis._positionDirty = v;\r\n\t\t\tif (v && this.drawing)\r\n\t\t\t\tthis.drawing.isDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic get visible() { return this._visible; }\r\n\t\tpublic set visible(v: boolean) {\r\n\t\t\tif (this._visible != v) {\r\n\t\t\t\tthis._visible = v;\r\n\t\t\t\tthis.appearanceDirty = true;\r\n\t\t\t\tif (this.drawing) {\r\n\t\t\t\t\tthis.drawing.isDirty = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","/// <reference path=\"VgxDrawable.ts\" />\r\n\r\n\r\nnamespace Vgx {\r\n\r\n\texport abstract class VgxEntity extends VgxDrawable {\r\n\r\n\t\tprivate _insertPointX = 0;\r\n\t\tprivate _insertPointY = 0;\r\n\t\tprivate _stroke: BrushDefinition = null;\r\n\t\tprivate _strokeWidth = Vars.defaultStrokeWidth;\r\n\r\n\t\tprivate _shadow: Shadow;\r\n\t\tprivate _transform: EntityTransform;\r\n\t\tprivate _cachedBounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\r\n\t\t\tthis._shadow = new Shadow();\r\n\t\t\tthis._shadow.onPropertyChanged.add(function () { this.appearanceDirty = true; }, {});\r\n\r\n\t\t\tthis._transform = new EntityTransform(this);\r\n\r\n\t\t\tthis._cachedBounds = new Rect();\r\n\t\t}\r\n\r\n\r\n\t\t// virtual\r\n\t\tprotected _getVertices() {\r\n\t\t\treturn [{\r\n\t\t\t\tx: this._getValue(\"insertPointX\", this._insertPointX),\r\n\t\t\t\ty: this._getValue(\"insertPointY\", this._insertPointY)\r\n\t\t\t}]\r\n\t\t}\r\n\r\n\t\t// virtual\r\n\t\tprotected _getBounds() {\r\n\t\t\treturn Rect.empty;\r\n\t\t}\r\n\r\n\r\n\t\t// virtual\r\n\t\tpublic loadData(data: DynamicObject) : void {\r\n\t\t\tfor (const n in data) {\r\n\t\t\t\tif (!(Reflect.has(this, n)))\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tconst propDesc = Object.getOwnPropertyDescriptor(this, n);\r\n\t\t\t\tif (propDesc && (!propDesc.writable || !propDesc.get)) {\r\n\t\t\t\t\t// TODO log error: readonly property\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tReflect.set(this, n, data[n]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// abstract\r\n\t\tpublic abstract _getPath(): Path2D;\r\n\r\n\r\n\t\tpublic getBounds() {\r\n\t\t\tif (this.geometryDirty) {\r\n\t\t\t\tvar bounds = this._getBounds();\r\n\t\t\t\tif (!this._transform.isIdentity) {\r\n\t\t\t\t\tvar mtx = this.transform.getMatrix().clone();\r\n\t\t\t\t\tmtx.offsetX = -(this.insertPointX + this.transform.originX);\r\n\t\t\t\t\tmtx.offsetY = -(this.insertPointY + this.transform.originY);\r\n\t\t\t\t\tthis._cachedBounds = Rect.from(mtx.transformRect(bounds.x, bounds.y, bounds.width, bounds.height));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._cachedBounds = bounds;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._cachedBounds;\r\n\t\t}\r\n\r\n\r\n\t\tpublic get insertPointX() { return this._getValue(\"insertPointX\", this._insertPointX); }\r\n\t\tpublic set insertPointX(v: number) {\r\n\t\t\tif (this._insertPointX != v) {\r\n\t\t\t\tthis._insertPointX = v;\r\n\t\t\t\tthis.positionDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get insertPointY() { return this._getValue(\"insertPointY\", this._insertPointY); }\r\n\t\tpublic set insertPointY(v: number) {\r\n\t\t\tif (this._insertPointY != v) {\r\n\t\t\t\tthis._insertPointY = v;\r\n\t\t\t\tthis.positionDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic get stroke() { return this._getValue(\"stroke\", this._stroke); }\r\n\t\tpublic set stroke(v: BrushDefinition) {\r\n\t\t\tif (this._stroke != v) {\r\n\t\t\t\tthis._stroke = v;\r\n\t\t\t\tthis.appearanceDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get strokeWidth() { return this._getValue(\"strokeWidth\", this._strokeWidth); }\r\n\t\tpublic set strokeWidth(v: number) {\r\n\t\t\tif (this._strokeWidth != v) {\r\n\t\t\t\tthis._strokeWidth = v;\r\n\t\t\t\tthis.appearanceDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic get shadow() { return this._shadow; }\r\n\r\n\t\tpublic get transform() { return this._getValue(\"transform\", this._transform); }\r\n\t\tpublic set transform(v: Transform) {\r\n\t\t\tthis._transform.translationX = v.translationX;\r\n\t\t\tthis._transform.translationY = v.translationY;\r\n\t\t\tthis._transform.scaleX = v.scaleX;\r\n\t\t\tthis._transform.scaleY = v.scaleY;\r\n\t\t\tthis._transform.rotation = v.rotation;\r\n\t\t\tthis._transform.originX = v.originX;\r\n\t\t\tthis._transform.originY = v.originY;\r\n\t\t}\r\n\t}\r\n}","/// <reference path=\"VgxEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\tconst degToRad = 0.017453292519943295;\r\n\r\n\texport class VgxArc extends VgxEntity {\r\n\r\n\t\tprivate _radius = 0;\r\n\t\tprivate _startAngle = 0;\r\n\t\tprivate _endAngle = 0;\r\n\t\tprivate _startAngleRad = 0;\r\n\t\tprivate _endAngleRad = 0;\r\n\t\tprivate _isAntiClockwise = false;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\t// TODO\r\n\t\t\tvar xsa = Math.cos(this._startAngleRad) * this._radius;\r\n\t\t\tvar ysa = Math.sin(this._startAngleRad) * this._radius;\r\n\t\t\tvar xea = Math.cos(this._endAngleRad) * this._radius;\r\n\t\t\tvar yea = Math.sin(this._endAngleRad) * this._radius;\r\n\t\t\tvar x1 = Math.min(xsa, xea);\r\n\t\t\tvar y1 = Math.min(ysa, yea);\r\n\t\t\tvar x2 = Math.max(xsa, xea);\r\n\t\t\tvar y2 = Math.max(ysa, yea);\r\n\t\t\treturn new Rect(this.insertPointX + x1, this.insertPointY + y1, x2 - x1, y2 - y1);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\r\n\t\tpublic get radius() { return this._radius; }\r\n\t\tpublic set radius(v: number) { \r\n\t\t\tif (this._radius != v) {\r\n\t\t\t\tthis._radius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngle() { return this._startAngle; }\r\n\t\tpublic set startAngle(v: number) { \r\n\t\t\tif (this._startAngle != v) {\r\n\t\t\t\tthis._startAngle = v;\r\n\t\t\t\tthis._startAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngleRad() { return this._startAngleRad; }\r\n\t\tpublic set startAngleRad(v: number) { \r\n\t\t\tif (this._startAngleRad != v) {\r\n\t\t\t\tthis._startAngleRad = v;\r\n\t\t\t\tthis._startAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngle() { return this._endAngle; }\r\n\t\tpublic set endAngle(v: number) { \r\n\t\t\tif (this._endAngle != v) {\r\n\t\t\t\tthis._endAngle = v;\r\n\t\t\t\tthis._endAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngleRad() { return this._endAngleRad; }\r\n\t\tpublic set endAngleRad(v: number) { \r\n\t\t\tif (this._endAngleRad != v) {\r\n\t\t\t\tthis._endAngleRad = v;\r\n\t\t\t\tthis._endAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get isAntiClockwise() { return this._isAntiClockwise; }\r\n\t\tpublic set isAntiClockwise(v: boolean) { \r\n\t\t\tif (this._isAntiClockwise != v) {\r\n\t\t\t\tthis._isAntiClockwise = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawArc(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Arc\", \"Vgx.VgxArc\");\r\n}","\r\nnamespace Vgx {\r\n    export abstract class VgxFillableEntity extends VgxEntity implements VgxFillable {\r\n\r\n        private _fill: BrushDefinition;\r\n\r\n        public get fill() { return this._getValue(\"fill\", this._fill); }\r\n\t\tpublic set fill(v: BrushDefinition) {\r\n\t\t\tif (this._fill != v) {\r\n\t\t\t\tthis._fill = v;\r\n\t\t\t\tthis.appearanceDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxCircle extends VgxFillableEntity {\r\n\r\n\t\tprivate _radius = 0;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\tvar x = this.insertPointX - this._radius;\r\n\t\t\tvar y = this.insertPointY -this. _radius;\r\n\t\t\tvar w = this._radius * 2;\r\n\t\t\tvar h = this._radius * 2;\r\n\t\t\treturn new Rect(x, y, w, h);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get radius() { return this._radius; }\r\n\t\tpublic set radius(v: number) { \r\n\t\t\tif (this._radius != v) {\r\n\t\t\t\tthis._radius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawCircle(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Circle\", \"Vgx.VgxCircle\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export class VgxCubicCurve extends VgxFillableEntity {\r\n\r\n\t\tprivate _points: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _controlPoints1: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _controlPoints2: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._points = new ReactiveCollection();\r\n\t\t\tthis._points.onCollectionChanged.add((s, e) => this.updateBounds());\r\n\t\t\tthis._controlPoints1 = new ReactiveCollection();\r\n\t\t\tthis._controlPoints2 = new ReactiveCollection();\r\n            this.isClosed = true;\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\t// TODO include controlPoints\r\n\t\t\tfor (const p of this._points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tpublic override loadData(data: DynamicObject) {\r\n\t\t\tsuper.loadData(data);\r\n\t\t\tif (Reflect.has(data, \"points\")) {\r\n\t\t\t\tthis.points.clear();\r\n\t\t\t\tthis.points.addRange(data.points);\r\n\t\t\t}\r\n\t\t\tif (Reflect.has(data, \"controlPoints1\")) {\r\n\t\t\t\tthis.controlPoints1.clear();\r\n\t\t\t\tthis.controlPoints1.addRange(data.controlPoints1);\r\n\t\t\t}\r\n\t\t\tif (Reflect.has(data, \"controlPoints2\")) {\r\n\t\t\t\tthis.controlPoints2.clear();\r\n\t\t\t\tthis.controlPoints2.addRange(data.controlPoints2);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get points() { return this._points; }\r\n\t\tpublic get controlPoints1() { return this._controlPoints1; }\r\n\t\tpublic get controlPoints2() { return this._controlPoints2; }\r\n\r\n        public isClosed: boolean;\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawCubicCurve(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"CubicCurve\", \"Vgx.VgxCubicCurve\");\r\n}","/// <reference path=\"VgxEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\tconst degToRad = 0.017453292519943295;\r\n\r\n\texport class VgxDonut extends VgxFillableEntity {\r\n\r\n\t\tprivate _startRadius = 0;\r\n\t\tprivate _endRadius = 0;\r\n\t\tprivate _startAngle = 0;\r\n\t\tprivate _endAngle = 0;\r\n\t\tprivate _startAngleRad = 0;\r\n\t\tprivate _endAngleRad = 0;\r\n\t\tprivate _isAntiClockwise = false;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\tlet radius = Math.max(this._startRadius, this._endRadius);\r\n\t\t\tvar xsa = Math.cos(this._startAngleRad) * radius;\r\n\t\t\tvar ysa = Math.sin(this._startAngleRad) * radius;\r\n\t\t\tvar xea = Math.cos(this._endAngleRad) * radius;\r\n\t\t\tvar yea = Math.sin(this._endAngleRad) * radius;\r\n\t\t\tvar x1 = Math.min(xsa, xea);\r\n\t\t\tvar y1 = Math.min(ysa, yea);\r\n\t\t\tvar x2 = Math.max(xsa, xea);\r\n\t\t\tvar y2 = Math.max(ysa, yea);\r\n\t\t\treturn new Rect(this.insertPointX + x1, this.insertPointY + y1, x2 - x1, y2 - y1);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\r\n\t\tpublic get startRadius() { return this._startRadius; }\r\n\t\tpublic set startRadius(v: number) { \r\n\t\t\tif (this._startRadius != v) {\r\n\t\t\t\tthis._startRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endRadius() { return this._endRadius; }\r\n\t\tpublic set endRadius(v: number) { \r\n\t\t\tif (this._endRadius != v) {\r\n\t\t\t\tthis._endRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngle() { return this._startAngle; }\r\n\t\tpublic set startAngle(v: number) { \r\n\t\t\tif (this._startAngle != v) {\r\n\t\t\t\tthis._startAngle = v;\r\n\t\t\t\tthis._startAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngleRad() { return this._startAngleRad; }\r\n\t\tpublic set startAngleRad(v: number) { \r\n\t\t\tif (this._startAngleRad != v) {\r\n\t\t\t\tthis._startAngleRad = v;\r\n\t\t\t\tthis._startAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngle() { return this._endAngle; }\r\n\t\tpublic set endAngle(v: number) { \r\n\t\t\tif (this._endAngle != v) {\r\n\t\t\t\tthis._endAngle = v;\r\n\t\t\t\tthis._endAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngleRad() { return this._endAngleRad; }\r\n\t\tpublic set endAngleRad(v: number) { \r\n\t\t\tif (this._endAngleRad != v) {\r\n\t\t\t\tthis._endAngleRad = v;\r\n\t\t\t\tthis._endAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get isAntiClockwise() { return this._isAntiClockwise; }\r\n\t\tpublic set isAntiClockwise(v: boolean) { \r\n\t\t\tif (this._isAntiClockwise != v) {\r\n\t\t\t\tthis._isAntiClockwise = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawDonut(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Donut\", \"Vgx.VgxDonut\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxEllipse extends VgxFillableEntity {\r\n\r\n\t\tprivate _xRadius = 0;\r\n\t\tprivate _yRadius = 0;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\tconst x = this.insertPointX - this._xRadius;\r\n\t\t\tconst y = this.insertPointY - this._yRadius;\r\n\t\t\tconst w = this._xRadius * 2;\r\n\t\t\tconst h = this._yRadius * 2;\r\n\t\t\treturn new Rect(x, y, w, h);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get xRadius() { return this._xRadius; }\r\n\t\tpublic set xRadius(v: number) { \r\n\t\t\tif (this._xRadius != v) {\r\n\t\t\t\tthis._xRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get yRadius() { return this._yRadius; }\r\n\t\tpublic set yRadius(v: number) { \r\n\t\t\tif (this._yRadius != v) {\r\n\t\t\t\tthis._yRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawEllipse(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Ellipse\", \"Vgx.VgxEllipse\");\r\n}","\r\nnamespace Vgx {\r\n\r\n    export class VgxEntityCollection extends ReactiveCollection<VgxEntity> {\r\n\r\n        private _owner: any;\r\n\r\n        constructor(owner?: any) {\r\n            super();\r\n            this._owner = owner;\r\n        }\r\n\r\n        public ofType<T extends VgxEntity>(type: {new(): T}) {\r\n            var items = this._getItems();\r\n            return <T[]>items.filter(x => x instanceof type)\r\n        }\r\n\r\n        public get owner() { return this._owner; }\r\n    }\r\n}","\r\nnamespace Vgx {\r\n    export interface VgxFillable {\r\n        fill: BrushDefinition;\r\n    }\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxGroup extends VgxFillableEntity {\r\n\r\n\t\tprivate _children: VgxEntityCollection;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._children = new VgxEntityCollection(this);\r\n\t\t\tthis._children.onCollectionChanged.add((s, e) => this.updateBounds());\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tthis._bounds = Utils.getEntitiesBounds(this._children, this.insertPointX, this.insertPointY);\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tpublic override loadData(data: DynamicObject) {\r\n\t\t\tsuper.loadData(data);\r\n\t\t\tif (Reflect.has(data, \"children\")) {\r\n\t\t\t\tthis.children.clear();\r\n\t\t\t\tfor (const childItem of data.children) {\r\n\t\t\t\t\tconst typeName = childItem[0] as string;\r\n\t\t\t\t\tconst childData = childItem[1];\r\n\t\t\t\t\tvar childElement = DrawingLoader.loadChildEntity(typeName, childData);\r\n\t\t\t\t\tif (childElement != null)\r\n\t\t\t\t\t\tthis.children.add(childElement);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get children() { return this._children; }\r\n\r\n\t\t\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawGroup(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Group\", \"Vgx.VgxGroup\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxImage extends VgxEntity {\r\n\r\n\t\tprivate _width = 0;\r\n\t\tprivate _height = 0;\r\n\t\tprivate _cornersRadius = 0;\r\n\t\tprivate _source: CanvasImageSource;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn new Rect(this.insertPointX, this.insertPointY, this._width, this._height);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get cornersRadius() { return this._cornersRadius; }\r\n\t\tpublic set cornersRadius(v: number) { \r\n\t\t\tif (this._cornersRadius != v) {\r\n\t\t\t\tthis._cornersRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get height() { return this._height; }\r\n\t\tpublic set height(v: number) { \r\n\t\t\tif (this._height != v) {\r\n\t\t\t\tthis._height = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get width() { return this._width; }\r\n\t\tpublic set width(v: number) { \r\n\t\t\tif (this._width != v) {\r\n\t\t\t\tthis._width = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get source() { return this._source; }\r\n\t\tpublic set source(v: CanvasImageSource) { \r\n\t\t\tif (this._source != v) {\r\n\t\t\t\tthis._source = v;\r\n\t\t\t\tthis.appearanceDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawImage(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Image\", \"Vgx.VgxImage\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxLine extends VgxEntity {\r\n\r\n\t\t//private _startPoint: Cgx.Point;\r\n\t\tprivate _endPoint: Cgx.Point;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\t// this._endPoint = {\r\n\t\t\t// \tx: 0,\r\n\t\t\t// \ty: 0\r\n\t\t\t// };\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\tconst points = [this.startPoint, this.endPoint];\r\n\t\t\tfor (const p of points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// public get startPoint() { return this._startPoint; }\r\n\t\t// public set startPoint(v: Cgx.Point) { \r\n\t\t// \tif (this._startPoint != v) {\r\n\t\t// \t\tthis._startPoint = v;\r\n\t\t// \t\tthis.updateBounds();\r\n\t\t// \t\tthis.geometryDirty = true;\r\n\t\t// \t}\r\n\t\t// }\r\n\t\tpublic get startPoint() { return { x: this.insertPointX, y: this.insertPointY } };\r\n\t\tpublic set startPoint(v: Cgx.Point) { \r\n\t\t\tthis.insertPointX = v.x;\r\n\t\t\tthis.insertPointY = v.y;\r\n\t\t}\r\n\r\n\t\tpublic get endPoint() { return this._endPoint; }\r\n\t\tpublic set endPoint(v: Cgx.Point) { \r\n\t\t\tif (this._endPoint != v) {\r\n\t\t\t\tthis._endPoint = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawLine(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Line\", \"Vgx.VgxLine\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport interface PathFigure {\r\n\t\treadonly path: Path2D;\r\n\t\tisEmpty: boolean;\r\n\t}\r\n\r\n\texport class VgxPath extends VgxFillableEntity {\r\n\r\n\t\tprivate _lastX: number;\r\n\t\tprivate _lastY: number;\r\n\t\tprivate _fillRule: CanvasFillRule;\r\n\t\tprivate _currentFigure: PathFigure;\r\n\t\tprivate _children: ReactiveCollection<Path2D>;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._bounds = new Rect();\r\n\t\t\tthis._fillRule = \"nonzero\";\r\n\t\t\tthis._children = new ReactiveCollection();\r\n\t\t\tthis._children.onCollectionChanged.add((s, e) => this.updateBounds());\r\n\t\t}\r\n\r\n\r\n\t\tprivate collectPath2D() {\r\n\t\t\tif (this._currentFigure != null && !this._currentFigure.isEmpty)\r\n\t\t\tthis._children.add(this._currentFigure.path);\r\n\t\t\tthis._currentFigure = null;\r\n\t\t}\r\n\r\n\t\tprivate createFigureObj(pathData: string = null) {\r\n\t\t\tif (pathData && typeof pathData === \"string\") {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpath: new Path2D(pathData),\r\n\t\t\t\t\tisEmpty: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpath: new Path2D(),\r\n\t\t\t\t\tisEmpty: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate createNewFigure(pathData: string = null) {\r\n\r\n\t\t\tlet result: PathFigure = null;\r\n\r\n\t\t\tif (pathData && typeof pathData === \"string\") {\r\n\t\t\t\tresult = this.createFigureObj(pathData);\r\n\t\t\t}\r\n\r\n\t\t\tif (this._currentFigure != null) {\r\n\t\t\t\tif (!this._currentFigure.isEmpty) {\r\n\t\t\t\t\tthis.collectPath2D();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!result) {\r\n\t\t\t\tresult = this.createFigureObj();\r\n\t\t\t}\r\n\r\n\t\t\tthis._currentFigure = result;\r\n\t\t}\r\n\r\n\t\tprivate ensureHasFigure() {\r\n\t\t\tif (!this._currentFigure)\r\n\t\t\t\tthis.createNewFigure();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\t// TODO\r\n\t\t\tvar result = new Rect();\r\n\t\t\tresult.x = this.insertPointX;\r\n\t\t\tresult.y = this.insertPointY;\r\n\t\t\treturn result;\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tpublic override loadData(data: DynamicObject) {\r\n\t\t\tsuper.loadData(data);\r\n\t\t\tif (Reflect.has(data, \"figures\")) {\r\n\t\t\t\tthis._children.clear();\r\n\t\t\t\tfor (const figure of data.figures) {\r\n\t\t\t\t\tswitch (figure.type) {\r\n\t\t\t\t\t\tcase \"arc\":\r\n\t\t\t\t\t\t\tthis.addArc(figure.insertPointX, figure.insertPointY, figure.radius, figure.startAngle || 0, figure.endAngle || Math.PI * 2, figure.optClockwise || null);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"rect\":\r\n\t\t\t\t\t\t\tthis.addRect(figure.insertPointX, figure.insertPointY, figure.width, figure.height);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"ellipse\":\r\n\t\t\t\t\t\t\tthis.addEllipse(figure.insertPointX, figure.insertPointY, figure.radiusX, figure.radiusY, figure.rotation || 0, figure.startAngle || 0, figure.endAngle || Math.PI * 2, figure.optClockwise || null);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"path\":\r\n\t\t\t\t\t\t\tthis.addFigure(figure.data);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get figures() { return this._children; }\r\n\r\n\t\tpublic get fillRule() { return this._fillRule; }\r\n\t\tpublic set fillRule(v: CanvasFillRule) { \r\n\t\t\tif (this._fillRule != v) {\r\n\t\t\t\tthis._fillRule = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawPath(this);\r\n\t\t}\r\n\r\n\r\n\t\tpublic addArc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean = false) {\r\n\t\t\tanticlockwise = !!anticlockwise;\r\n\t\t\tthis.createNewFigure();\r\n\t\t\tthis._currentFigure.path.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis.collectPath2D();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic addFigure(pathData: string) {\r\n\t\t\tthis.createNewFigure(pathData);\r\n\t\t\tthis.collectPath2D();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic addRect(x: number, y: number, width: number, height: number) {\r\n\t\t\tthis.createNewFigure();\r\n\t\t\tthis._currentFigure.path.rect(x, y, width, height);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis.collectPath2D();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic addEllipse(x: number, y: number, radiusX: number, radiusY: number, rotation: number, startAngle: number, endAngle: number, anticlockwise: boolean = false) {\r\n\t\t\tanticlockwise = !!anticlockwise;\r\n\t\t\tthis.createNewFigure();\r\n\t\t\tthis._currentFigure.path.ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle, anticlockwise);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis.collectPath2D();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic arcTo(cpx: number, cpy: number, x: number, y: number, radius: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.arcTo(cpx, cpy, x, y, radius);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\r\n\t\tpublic beginNewFigure() {\r\n\t\t\tthis.createNewFigure();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\r\n\t\tpublic clear() {\r\n\t\t\tthis._children.clear();\r\n\t\t\tthis._currentFigure = null;\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic closeFigure() {\r\n\t\t\tif (this._currentFigure) {\r\n\t\t\t\tthis._currentFigure.path.closePath();\r\n\t\t\t\tthis.beginNewFigure();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic endFigure() {\r\n\t\t\tthis.collectPath2D();\r\n\t\t\tthis.geometryDirty = true;\r\n\t\t}\r\n\r\n\t\tpublic horizontalLineTo(x: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.lineTo(x, this._lastY);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t}\r\n\r\n\t\tpublic lineTo(x: number, y: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.lineTo(x, y);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\r\n\t\tpublic moveTo(x: number, y: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.moveTo(x, y);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\r\n\t\tpublic quadraticCurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastX = x;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\r\n\t\tpublic verticalLineTo(y: number) {\r\n\t\t\tthis.ensureHasFigure();\r\n\t\t\tthis._currentFigure.path.lineTo(this._lastX, y);\r\n\t\t\tthis._currentFigure.isEmpty = false;\r\n\t\t\tthis._lastY = y;\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Path\", \"Vgx.VgxPath\");\r\n}","/// <reference path=\"VgxEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\tconst degToRad = 0.017453292519943295;\r\n\r\n\texport class VgxPie extends VgxFillableEntity {\r\n\r\n\t\tprivate _radius = 0;\r\n\t\tprivate _startAngle = 0;\r\n\t\tprivate _endAngle = 0;\r\n\t\tprivate _startAngleRad = 0;\r\n\t\tprivate _endAngleRad = 0;\r\n\t\tprivate _isAntiClockwise = false;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\t// TODO\r\n\t\t\tvar xsa = Math.cos(this._startAngleRad) * this._radius;\r\n\t\t\tvar ysa = Math.sin(this._startAngleRad) * this._radius;\r\n\t\t\tvar xea = Math.cos(this._endAngleRad) * this._radius;\r\n\t\t\tvar yea = Math.sin(this._endAngleRad) * this._radius;\r\n\t\t\tvar x1 = Math.min(xsa, xea);\r\n\t\t\tvar y1 = Math.min(ysa, yea);\r\n\t\t\tvar x2 = Math.max(xsa, xea);\r\n\t\t\tvar y2 = Math.max(ysa, yea);\r\n\t\t\treturn new Rect(this.insertPointX + x1, this.insertPointY + y1, x2 - x1, y2 - y1);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\r\n\t\tpublic get radius() { return this._radius; }\r\n\t\tpublic set radius(v: number) { \r\n\t\t\tif (this._radius != v) {\r\n\t\t\t\tthis._radius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngle() { return this._startAngle; }\r\n\t\tpublic set startAngle(v: number) { \r\n\t\t\tif (this._startAngle != v) {\r\n\t\t\t\tthis._startAngle = v;\r\n\t\t\t\tthis._startAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get startAngleRad() { return this._startAngleRad; }\r\n\t\tpublic set startAngleRad(v: number) { \r\n\t\t\tif (this._startAngleRad != v) {\r\n\t\t\t\tthis._startAngleRad = v;\r\n\t\t\t\tthis._startAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngle() { return this._endAngle; }\r\n\t\tpublic set endAngle(v: number) { \r\n\t\t\tif (this._endAngle != v) {\r\n\t\t\t\tthis._endAngle = v;\r\n\t\t\t\tthis._endAngleRad = v * degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get endAngleRad() { return this._endAngleRad; }\r\n\t\tpublic set endAngleRad(v: number) { \r\n\t\t\tif (this._endAngleRad != v) {\r\n\t\t\t\tthis._endAngleRad = v;\r\n\t\t\t\tthis._endAngle = v / degToRad;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get isAntiClockwise() { return this._isAntiClockwise; }\r\n\t\tpublic set isAntiClockwise(v: boolean) { \r\n\t\t\tif (this._isAntiClockwise != v) {\r\n\t\t\t\tthis._isAntiClockwise = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawPie(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Pie\", \"Vgx.VgxPie\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxPolyline extends VgxFillableEntity {\r\n\r\n\t\tprivate _points: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._points = new ReactiveCollection();\r\n\t\t\tthis._points.onCollectionChanged.add((s, e) => this.updateBounds());\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\tfor (const p of this._points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tpublic override loadData(data: DynamicObject) {\r\n\t\t\tsuper.loadData(data);\r\n\t\t\tif (Reflect.has(data, \"points\")) {\r\n\t\t\t\tthis.points.clear();\r\n\t\t\t\tthis.points.addRange(data.points);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get points() { return this._points; }\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawPolyline(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Polyline\", \"Vgx.VgxPolyline\");\r\n}","\r\n/// <reference path=\"VgxPolyline.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export class VgxPolygon extends VgxPolyline {\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n        public draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawPolygon(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Polygon\", \"Vgx.VgxPolygon\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxQuad extends VgxFillableEntity {\r\n\r\n\t\tprivate _point1: Cgx.Point;\r\n\t\tprivate _point2: Cgx.Point;\r\n\t\tprivate _point3: Cgx.Point;\r\n\t\tprivate _point4: Cgx.Point;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\tconst points = [this._point1, this._point2, this._point3, this._point4];\r\n\t\t\tfor (const p of points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get point1() { return this._point1; }\r\n\t\tpublic set point1(v: Cgx.Point) { \r\n\t\t\tif (this._point1 != v) {\r\n\t\t\t\tthis._point1 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get point2() { return this._point2; }\r\n\t\tpublic set point2(v: Cgx.Point) { \r\n\t\t\tif (this._point2 != v) {\r\n\t\t\t\tthis._point2 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get point3() { return this._point3; }\r\n\t\tpublic set point3(v: Cgx.Point) { \r\n\t\t\tif (this._point3 != v) {\r\n\t\t\t\tthis._point3 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get point4() { return this._point4; }\r\n\t\tpublic set point4(v: Cgx.Point) { \r\n\t\t\tif (this._point4 != v) {\r\n\t\t\t\tthis._point4 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawQuad(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Quad\", \"Vgx.VgxQuad\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n    export class VgxQuadraticCurve extends VgxFillableEntity {\r\n\r\n\t\tprivate _points: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _controlPoints: ReactiveCollection<Cgx.Point>;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._points = new ReactiveCollection();\r\n\t\t\tthis._points.onCollectionChanged.add((s, e) => this.updateBounds());\r\n\t\t\tthis._controlPoints = new ReactiveCollection();\r\n            this.isClosed = true;\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\t// TODO include controlPoints\r\n\t\t\tfor (const p of this._points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tpublic override loadData(data: DynamicObject) {\r\n\t\t\tsuper.loadData(data);\r\n\t\t\tif (Reflect.has(data, \"points\")) {\r\n\t\t\t\tthis.points.clear();\r\n\t\t\t\tthis.points.addRange(data.points);\r\n\t\t\t}\r\n\t\t\tif (Reflect.has(data, \"controlPoints\")) {\r\n\t\t\t\tthis.controlPoints.clear();\r\n\t\t\t\tthis.controlPoints.addRange(data.controlPoints);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get points() { return this._points; }\r\n\t\tpublic get controlPoints() { return this._controlPoints; }\r\n\r\n        public isClosed: boolean;\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawQuadraticCurve(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"QuadraticCurve\", \"Vgx.VgxQuadraticCurve\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxRectangle extends VgxFillableEntity {\r\n\r\n\t\tprivate _width = 0;\r\n\t\tprivate _height = 0;\r\n\t\tprivate _cornersRadius = 0;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn new Rect(this.insertPointX, this.insertPointY, this._width, this._height);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get cornersRadius() { return this._cornersRadius; }\r\n\t\tpublic set cornersRadius(v: number) { \r\n\t\t\tif (this._cornersRadius != v) {\r\n\t\t\t\tthis._cornersRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get height() { return this._height; }\r\n\t\tpublic set height(v: number) { \r\n\t\t\tif (this._height != v) {\r\n\t\t\t\tthis._height = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get width() { return this._width; }\r\n\t\tpublic set width(v: number) { \r\n\t\t\tif (this._width != v) {\r\n\t\t\t\tthis._width = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawRectangle(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Rectangle\", \"Vgx.VgxRectangle\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxSquare extends VgxFillableEntity {\r\n\r\n\t\tprivate _size = 0;\r\n\t\tprivate _cornersRadius = 0;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn new Rect(this.insertPointX, this.insertPointY, this._size, this._size);\r\n\t\t}\r\n\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get cornersRadius() { return this._cornersRadius; }\r\n\t\tpublic set cornersRadius(v: number) { \r\n\t\t\tif (this._cornersRadius != v) {\r\n\t\t\t\tthis._cornersRadius = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get size() { return this._size; }\r\n\t\tpublic set size(v: number) { \r\n\t\t\tif (this._size != v) {\r\n\t\t\t\tthis._size = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawSquare(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Square\", \"Vgx.VgxSquare\");\r\n}","// /// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\n// namespace Vgx {\r\n\r\n// \texport abstract class VgxSymbol extends VgxFillableEntity {\r\n\r\n// \t\tprivate _symbolDrawing: Drawing;\r\n// \t\tprivate _symbolCachedImageBitmap: ImageBitmap;\r\n// \t\tprivate _needRedraw = true;\r\n// \t\tprivate _bounds: Rect;\r\n\r\n// \t\tconstructor() {\r\n// \t\t\tsuper();\r\n// \t\t}\r\n\r\n\r\n// \t\tprivate createBufferedDrawingContext(drawing: Drawing, width: number, height: number) {\r\n// \t\t\tvar canvas = Cgx.Engine.createCanvas(width, height);\r\n// \t\t\tvar viewTransform = new ViewTransform();\r\n// \t\t\treturn new DrawingContext(drawing, canvas, viewTransform);\r\n// \t\t}\r\n\r\n// \t\tprivate drawSymbolCore(onCompleted: () => void = null) {\r\n\r\n// \t\t\tif (this._symbolCachedImageBitmap != null) {\r\n// \t\t\t\tthis._symbolCachedImageBitmap.close();\r\n// \t\t\t\tthis._symbolCachedImageBitmap = null;\r\n// \t\t\t}\r\n\r\n// \t\t\tif (this._symbolDrawing == null) {\r\n// \t\t\t\tthis._symbolDrawing = new Drawing();\r\n// \t\t\t} else {\r\n// \t\t\t\tthis._symbolDrawing.clear();\r\n// \t\t\t}\r\n\r\n// \t\t\tvar bounds = this.getBounds();\r\n// \t\t\tvar symbolDrawingContext = this.createBufferedDrawingContext(this._symbolDrawing, bounds.width, bounds.height);\r\n// \t\t\tsymbolDrawingContext.clear();\r\n// \t\t\tthis.drawSymbol(symbolDrawingContext);\r\n\r\n// \t\t\tvar imageData = symbolDrawingContext._getImageData();\r\n// \t\t\tcreateImageBitmap(imageData).then((imageBitmap) => {\r\n// \t\t\t\tthis._symbolCachedImageBitmap = imageBitmap;\r\n// \t\t\t\tthis.appearanceDirty = true;\r\n// \t\t\t\tif (typeof onCompleted === \"function\") {\r\n// \t\t\t\t\tonCompleted();\r\n// \t\t\t\t}\r\n// \t\t\t});\r\n// \t\t}\r\n\r\n// \t\t//virtual override \r\n// \t\tprotected _getBounds() {\r\n// \t\t\treturn this._bounds;\r\n// \t\t}\r\n\r\n\r\n// \t\tprivate updateBounds() {\r\n// \t\t\tlet minX = Number.MAX_VALUE;\r\n// \t\t\tlet minY = Number.MAX_VALUE;\r\n// \t\t\tlet maxX = Number.MIN_VALUE;\r\n// \t\t\tlet maxY = Number.MIN_VALUE;\r\n// \t\t\tconst points = [this._startPoint, this._endPoint];\r\n// \t\t\tfor (const p of points) {\r\n// \t\t\t\tminX = Math.min(minX, p.x);\r\n// \t\t\t\tminY = Math.min(minY, p.y);\r\n// \t\t\t\tmaxX = Math.max(maxX, p.x);\r\n// \t\t\t\tmaxY = Math.max(maxY, p.y);\r\n// \t\t\t}\r\n// \t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n// \t\t\t// TODO store insertPoint\r\n// \t\t}\r\n\r\n// \t\t//abstract override\r\n// \t\tpublic _getPath(): Path2D {\r\n// \t\t\t// TODO\r\n// \t\t\treturn null;\r\n// \t\t}\r\n\r\n\r\n// \t\tpublic draw(drawingContext: DrawingContext) {\r\n// \t\t\tif (this._needRedraw) {\r\n// \t\t\t\tthis._needRedraw = false;\r\n// \t\t\t\tthis.drawSymbolCore();\r\n// \t\t\t}\r\n// \t\t\tif (this._symbolCachedImageBitmap != null) {\r\n// \t\t\t\tdrawingContext.drawSymbol(this);\r\n// \t\t\t\t//drawingContext.drawVertex(_self.insertPointX, _self.insertPointY);\r\n// \t\t\t}\r\n// \t\t}\r\n\r\n// \t\tpublic abstract drawSymbol(drawingContext: DrawingContext) : void;\r\n// \t}\r\n// }","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxText extends VgxFillableEntity {\r\n\r\n\t\tprivate _source: string;\r\n\t\tprivate _fontFamily: string;\r\n\t\tprivate _fontSize: number;\r\n\t\tprivate _alignment: CanvasTextAlign;\r\n\t\tprivate _baseline: CanvasTextBaseline = \"alphabetic\";\r\n\t\tprivate _textMeasure: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\tthis._textMeasure = TextUtils.measureText(this.source, this.fontFamily, this.fontSize);\r\n\t\t\tconst baselineOffset = this.getBaselineOffset(this._textMeasure);\r\n\t\t\treturn new Rect(this.insertPointX, this.insertPointY - baselineOffset, this._textMeasure ? this._textMeasure.width : 0, this._textMeasure ? this._textMeasure.height : 0);\r\n\t\t}\r\n\r\n\r\n\t\tprivate getBaselineOffset(textMeasure: Rect) {\r\n\t\t\tswitch (this._baseline) {\r\n\t\t\t\tcase \"top\":\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\tcase \"hanging\":\r\n\t\t\t\t\t// TODO:\r\n\t\t\t\t\treturn textMeasure.height * 0.1951;\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\treturn textMeasure.height * 0.5;\r\n\t\t\t\tcase \"alphabetic\":\r\n\t\t\t\t\t// TODO:\r\n\t\t\t\t\treturn textMeasure.height * 0.8;\r\n\t\t\t\tcase \"ideographic\":\r\n\t\t\t\t// TODO:\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\treturn textMeasure.height;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(\"invalid textBaseline\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get source() { return this._source; }\r\n\t\tpublic set source(v: string) { \r\n\t\t\tif (this._source != v) {\r\n\t\t\t\tthis._source = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get fontFamily() { return this._fontFamily; }\r\n\t\tpublic set fontFamily(v: string) { \r\n\t\t\tif (this._fontFamily != v) {\r\n\t\t\t\tthis._fontFamily = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get fontSize() { return this._fontSize; }\r\n\t\tpublic set fontSize(v: number) { \r\n\t\t\tif (this._fontSize != v) {\r\n\t\t\t\tthis._fontSize = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get alignment() { return this._alignment; }\r\n\t\tpublic set alignment(v: CanvasTextAlign) { \r\n\t\t\tif (this._alignment != v) {\r\n\t\t\t\tthis._alignment = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get baseline() { return this._baseline; }\r\n\t\tpublic set baseline(v: CanvasTextBaseline) { \r\n\t\t\tif (this._baseline != v) {\r\n\t\t\t\tthis._baseline = v;\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawText(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Text\", \"Vgx.VgxText\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxTriangle extends VgxFillableEntity {\r\n\r\n\t\tprivate _point1: Cgx.Point;\r\n\t\tprivate _point2: Cgx.Point;\r\n\t\tprivate _point3: Cgx.Point;\r\n\t\tprivate _bounds: Rect;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t}\r\n\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tlet minX = Number.MAX_VALUE;\r\n\t\t\tlet minY = Number.MAX_VALUE;\r\n\t\t\tlet maxX = Number.MIN_VALUE;\r\n\t\t\tlet maxY = Number.MIN_VALUE;\r\n\t\t\tconst points = [this._point1, this._point2, this._point3];\r\n\t\t\tfor (const p of points) {\r\n\t\t\t\tif (p) {\r\n\t\t\t\t\tminX = Math.min(minX, p.x);\r\n\t\t\t\t\tminY = Math.min(minY, p.y);\r\n\t\t\t\t\tmaxX = Math.max(maxX, p.x);\r\n\t\t\t\t\tmaxY = Math.max(maxY, p.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._bounds = new Rect(minX, minY, maxX - minX, maxY - minY);\r\n\t\t\t// TODO store insertPoint\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get point1() { return this._point1; }\r\n\t\tpublic set point1(v: Cgx.Point) { \r\n\t\t\tif (this._point1 != v) {\r\n\t\t\t\tthis._point1 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get point2() { return this._point2; }\r\n\t\tpublic set point2(v: Cgx.Point) { \r\n\t\t\tif (this._point2 != v) {\r\n\t\t\t\tthis._point2 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get point3() { return this._point3; }\r\n\t\tpublic set point3(v: Cgx.Point) { \r\n\t\t\tif (this._point3 != v) {\r\n\t\t\t\tthis._point3 = v;\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t\tthis.geometryDirty = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawTriangle(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"Triangle\", \"Vgx.VgxTriangle\");\r\n}","/// <reference path=\"VgxFillableEntity.ts\" />\r\n\r\nnamespace Vgx {\r\n\r\n\texport class VgxView extends VgxFillableEntity {\r\n\r\n\t\tprivate _children: VgxEntityCollection;\r\n\t\tprivate _bounds: Rect;\r\n\t\tprivate _clipBounds: Rect;\r\n\t\tprivate _clip: boolean;\r\n\r\n\t\tconstructor() {\r\n\t\t\tsuper();\r\n\t\t\tthis._children = new VgxEntityCollection(this);\r\n\t\t\tthis._children.onCollectionChanged.add(this._onChildrenChanged, this);\r\n\t\t}\r\n\r\n\r\n\t\tprivate _onChildrenChanged(s: ReactiveCollection<VgxEntity>, e: CollectionChangedArgs<VgxEntity>) {\r\n\t\t\tif (!this._clip) {\r\n\t\t\t\tthis.updateBounds();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate _onClipBoundsChanged() {\r\n\t\t\tif (this._clip) {\r\n\t\t\t\t// TODO aggiornare il disegno\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate _onClipStateChanged() {\r\n\t\t\tif (this._clip) {\r\n\t\t\t\tif (!this._clipBounds || Rect.isEmpty(this._clipBounds)) {\r\n\t\t\t\t\tthis.updateBounds();\r\n\t\t\t\t\tthis._clipBounds = this._bounds;\r\n\t\t\t\t}\r\n\t\t\t\t// TODO applicare l'area di clip al disegno\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// TODO applicare l'area di clip al disegno\r\n\t\t\t}\r\n\t\t}\t\t\r\n\r\n\t\tprivate updateBounds() {\r\n\t\t\tthis._bounds = Utils.getEntitiesBounds(this._children, this.insertPointX, this.insertPointY);\r\n\t\t}\r\n\r\n\t\t//virtual override \r\n\t\tprotected _getBounds() {\r\n\t\t\treturn this._bounds;\r\n\t\t}\r\n\r\n\t\t//abstract override\r\n\t\tpublic _getPath(): Path2D {\r\n\t\t\t// TODO\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tpublic get children() { return this._children; }\r\n\r\n\t\tpublic get clipBounds() { return this._clipBounds; }\r\n\t\tpublic set clipBounds(v: Rect) { \r\n\t\t\tif (!Rect.equals(this._clipBounds, v)) {\r\n\t\t\t\tthis._clipBounds = v; \r\n\t\t\t\tthis._onClipBoundsChanged();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get clip() { return this._clip; }\r\n\t\tpublic set clip(v: boolean) { \r\n\t\t\tif (this._clip !== v) {\r\n\t\t\t\tthis._clip = v; \r\n\t\t\t\tthis._onClipStateChanged();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic draw(drawingContext: DrawingContext) {\r\n\t\t\tdrawingContext.drawView(this);\r\n\t\t}\r\n\t}\r\n\t\r\n\tEntityTypeManager.registerType(\"View\", \"Vgx.VgxView\");\r\n}","\r\nnamespace Vgx {\r\n\r\n    export interface ViewportsLayoutChangedEventArgs extends EventArgs\r\n    {\r\n        layout: ViewportsLayout;\r\n    }\r\n\r\n    export class VectorGraphicsView  {\r\n\r\n        private _events = new EventsManager(this);\r\n        private _htmlElement: HTMLElement;\r\n        private _viewports: Array<Viewport> = new Array();\r\n        private _currentViewport: Viewport;\r\n        private _drawing: Drawing;\r\n        private _hasDrawing = false;\r\n        private _viewportsLayout = ViewportsLayout.ONE;\r\n        private _viewportsSpace = 2;\r\n        private _neverArranged = true;\r\n\r\n        constructor() {\r\n            this._htmlElement = window.document.createElement(\"div\");\r\n            this._htmlElement.classList.add(\"VectorGraphicsView\");\r\n            this._htmlElement.style.width = \"100%\";\r\n            this._htmlElement.style.height = \"100%\";\r\n\t\t\tthis.onViewportsLayoutChanged = new EventSet<VectorGraphicsView, ViewportsLayout>(this._events, \"onViewportsLayoutChanged\");\r\n            this._addNewViewport();\r\n            window.addEventListener(\"resize\", () => this._arrangeLayout());\r\n        }\r\n\r\n        private _arrangeLayout() {\r\n            if (!this._htmlElement.parentElement)\r\n                return;\r\n            switch (this._viewportsLayout) {\r\n                case ViewportsLayout.ONE:\r\n                    break;\r\n                case ViewportsLayout.TWO_VERTICAL:\r\n                    {\r\n                        var width = (this._htmlElement.offsetWidth - this._viewportsSpace) * 0.5;\r\n                        var height = this._htmlElement.offsetHeight;\r\n                        var viewportLeft = this._viewports[0];\r\n                        viewportLeft.width = width;\r\n                        viewportLeft.height = height;\r\n                        var viewportRight = this._viewports[1];\r\n                        viewportRight.width = width;\r\n                        viewportRight.height = height;\r\n                        viewportRight.htmlElement.style.left = (width + this._viewportsSpace) + \"px\";\r\n                        viewportRight.htmlElement.style.top = \"0px\";\r\n                    }\r\n                    break;\r\n                case ViewportsLayout.TWO_HORIZONTAL:\r\n                    {\r\n                        var width = this._htmlElement.offsetWidth;\r\n                        var height = (this._htmlElement.offsetHeight - this._viewportsSpace) * 0.5;\r\n                        var viewportTop = this._viewports[0];\r\n                        viewportTop.width = width;\r\n                        viewportTop.height = height;\r\n                        var viewportBottom = this._viewports[1];\r\n                        viewportBottom.width = width;\r\n                        viewportBottom.height = height;\r\n                        viewportBottom.htmlElement.style.left = \"0px\";\r\n                        viewportBottom.htmlElement.style.top = (height + this._viewportsSpace) + \"px\";\r\n                    }\r\n                    break;\r\n            }\r\n            this._neverArranged = false;\r\n        }\r\n\r\n        private _addNewViewport() {\r\n            var viewport = new Viewport();\r\n            if (this._drawing != null) {\r\n                viewport.drawing = this._drawing;\r\n            }\r\n            this._addViewport(viewport);\r\n        }\r\n\r\n        private _addViewport(viewport: Viewport) {\r\n            if (this._viewports.indexOf(viewport) != -1)\r\n                return;\r\n            viewport.htmlElement.classList.add(\"viewport\");\r\n            this._viewports.push(viewport);\r\n            this._htmlElement.appendChild(viewport.htmlElement);\r\n            this._setActiveViewport(viewport);\r\n            this._arrangeLayout();\r\n        }\r\n\r\n        private _removeLastViewport() {\r\n            var viewport = this._viewports.pop();\r\n            viewport.htmlElement.remove();\r\n            if (this._currentViewport == viewport) {\r\n                this._currentViewport = this._viewports[this._viewports.length - 1];\r\n            }\r\n        }\r\n\r\n        private _setActiveViewport(viewport: Viewport) {\r\n            this._currentViewport = viewport;\r\n        }\r\n\r\n        private _ensureViewportsCount(count: number) {\r\n            if (count > this._viewports.length) {\r\n                while (this._viewports.length < count)\r\n                    this._addNewViewport();\r\n            }\r\n            else if (count < this._viewports.length) {\r\n                while (this._viewports.length > count)\r\n                    this._removeLastViewport();\r\n            }\r\n        }\r\n\r\n        private _checkNeverArranged() {\r\n            if (this._neverArranged) {\r\n                this._arrangeLayout();\r\n            }\r\n        }\r\n\r\n        private _onDrawingChanged(oldValue: Drawing, newValue: Drawing) {\r\n            if (oldValue != null) {\r\n                // TODO\r\n            }\r\n            this._hasDrawing = false;\r\n            if (newValue != null) {\r\n\t\t\t\tfor (const viewport of this._viewports) {\r\n\t\t\t\t\tviewport.drawing = newValue;\r\n\t\t\t\t}\r\n            }\r\n            this._checkNeverArranged();\r\n        }\r\n\r\n        private _onViewportsLayoutChanged(oldValue: ViewportsLayout, newValue: ViewportsLayout) {\r\n            this._neverArranged = true;\r\n            switch (newValue) {\r\n                case 1://ViewportsLayout.ONE:\r\n                    {\r\n                        this._ensureViewportsCount(1);\r\n                        this._viewports[0].htmlElement.style.position = \"relative\";\r\n                        this._viewports[0].autosize = true;\r\n                    }\r\n                    break;\r\n                case 2: //ViewportsLayout.TWO_VERTICAL:\r\n                case 3://ViewportsLayout.TWO_HORIZONTAL:\r\n                    {\r\n                        this._ensureViewportsCount(2);\r\n                        this._viewports[0].htmlElement.style.position = \"absolute\";\r\n                        this._viewports[0].autosize = false;\r\n                        this._viewports[1].htmlElement.style.position = \"absolute\";\r\n                        this._viewports[1].autosize = false;\r\n                    }\r\n                    break;\r\n            }\r\n            this._arrangeLayout();\r\n\r\n            this._events.trigger(\"onViewportsLayoutChanged\", { layout: newValue });\r\n        }\r\n\r\n\r\n        public get htmlElement() { return this._htmlElement; }\r\n\r\n        public get drawing() { return this._drawing; }\r\n        public set drawing(v: Drawing) {\r\n            if (this._drawing != v) {\r\n                var oldValue = this._drawing;\r\n                this._drawing = v;\r\n                this._onDrawingChanged(oldValue, this._drawing);\r\n            }\r\n        }\r\n\r\n        public get viewportsLayout() { return this._viewportsLayout; }\r\n        public set viewportsLayout(v: ViewportsLayout) {\r\n            if (this._viewportsLayout != v) {\r\n                var oldValue = this._viewportsLayout;\r\n                this._viewportsLayout = v;\r\n                this._onViewportsLayoutChanged(oldValue, this._viewportsLayout);\r\n            }\r\n        }\r\n\r\n        public get viewportsSpace() { return this._viewportsSpace; }\r\n        public set viewportsSpace(v: ViewportsLayout) {\r\n            if (this._viewportsSpace != v) {\r\n                this._viewportsSpace = v;\r\n                this._arrangeLayout();\r\n            }\r\n        }\r\n\r\n        public get viewportsCount() { return this._viewports.length; }\r\n\r\n        public get currentViewport() { return this._currentViewport; }\r\n\r\n\r\n        public getViewport(index: number) {\r\n            if (index < 0 || index >= this._viewports.length)\r\n                return null;\r\n            return this._viewports[index];\r\n        }\r\n\r\n\r\n\r\n        public onViewportsLayoutChanged: EventSet<VectorGraphicsView, ViewportsLayout>\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n    export interface ViewChangedEventArgs extends EventArgs\r\n    {\r\n        rect: Rect;\r\n    }\r\n\r\n    export class Viewport {\r\n        \r\n        private readonly ZOOM_STEP = 0.85;\r\n\r\n        private _events = new EventsManager(this);\r\n\r\n        private _htmlElement: HTMLElement;\r\n        private _canvas: Cgx.CanvasSurface;\r\n        private _drawing: Drawing;\r\n        private _drawingContext: DrawingContext;\r\n        private _viewTransform = new ViewTransform();\r\n        private _isDirty = true;\r\n        private _needRedraw = true;\r\n        private _onDrag: boolean;\r\n        private _lastMouseX: number;\r\n        private _lastMouseY: number;\r\n        private _nerverResized = true;\r\n        private _autosize = true;\r\n        private _width = 800;\r\n        private _height = 600;\r\n        private _hasDrawing = false;\r\n        private _drawAxes = false;\r\n\r\n\r\n        constructor(canvas?: Cgx.CanvasSurface, drawing?: Drawing) {\r\n\r\n            this._htmlElement = window.document.createElement(\"div\");\r\n\r\n            if (canvas instanceof HTMLCanvasElement) {\r\n                this._canvas = canvas;\r\n            }\r\n            else {\r\n                this._canvas = window.document.createElement(\"canvas\");\r\n            }\r\n\r\n            this._htmlElement.appendChild(this._canvas);\r\n\r\n            if (drawing == null) {\r\n                drawing = new Drawing();\r\n            }\r\n\r\n            this._drawingContext = new DrawingContext(this._drawing, this._canvas, this._viewTransform);\r\n            this.drawing = drawing;\r\n\r\n            this._setupMouseEvents();\r\n            window.addEventListener(\"resize\", this._onResize.bind(this));\r\n\r\n            this._viewTransform.setViewTarget(0, 0);\r\n\r\n            requestAnimationFrame(this._onRender.bind(this));\r\n        }\r\n\r\n        private _setupMouseEvents() {\r\n            this._canvas.addEventListener(\"mousedown\", this._onMouseDown.bind(this));\r\n            this._canvas.addEventListener(\"mousemove\", this._onMouseMove.bind(this));\r\n            this._canvas.addEventListener(\"mouseup\", this._onMouseUp.bind(this));\r\n            this._canvas.addEventListener(\"wheel\", this._onMouseWheel.bind(this));\r\n        }\r\n\r\n        private _checkNeedRedraw() {\r\n            this._needRedraw = this._isDirty;\r\n            if (this._drawing && this._drawing.isDirty) {\r\n                this._needRedraw = true;\r\n                this._drawing.isDirty = false;\r\n            }\r\n            this._isDirty = false;\r\n        }\r\n\r\n        private _invalidate() {\r\n            this._isDirty = true;\r\n        }\r\n\r\n        private _render() {\r\n\r\n            this._checkNeverResized();\r\n\r\n            if (this._needRedraw) {\r\n\r\n                if (this._hasDrawing) {\r\n\t\t\t\t\tthis._drawingContext.drawDrawing(this._drawing);\r\n                }\r\n\r\n                if (this.drawAxes) {\r\n                \tthis._drawingContext.drawAxes();\r\n\t\t\t\t}\r\n            }\r\n\r\n            this._needRedraw = false;\r\n        }\r\n\r\n        private _handleViewChanged() {\r\n            this._events.trigger(\"onViewChanged\", { rect: this.getCurrentViewBounds() });\r\n        }\r\n\r\n        private _checkNeverResized() {\r\n            if (this._htmlElement.parentElement && this._nerverResized) {\r\n                this._nerverResized = false;\r\n                this._onResize(null);\r\n            }\r\n        }\r\n\r\n        private _onRender() {\r\n\r\n            if (this._htmlElement.parentElement != null) {\r\n                this._checkNeedRedraw();\r\n                if (this._needRedraw) {\r\n                    //console.log(\"redraw\");\r\n                    this._render();\r\n                }\r\n            }\r\n\r\n            requestAnimationFrame(this._onRender.bind(this));\r\n        }\r\n\r\n        private _onDrawingDirty() {\r\n            this._invalidate();\r\n        }\r\n\r\n        private _onMouseDown(e: MouseEvent) {\r\n            if (!this._hasDrawing)\r\n                return;\r\n            this._lastMouseX = e.x;\r\n            this._lastMouseY = e.y;\r\n            this._onDrag = true;\r\n        }\r\n\r\n        private _onMouseMove(e: MouseEvent) {\r\n            if (!this._hasDrawing)\r\n                return;\r\n            if (this._onDrag) {\r\n                var cw = this._viewTransform.localToGlobalPoint(e.x, e.y);\r\n                var lw = this._viewTransform.localToGlobalPoint(this._lastMouseX, this._lastMouseY);\r\n                var difX = cw.x - lw.x;\r\n                var difY = cw.y - lw.y;\r\n                //if (!_viewTransform.isBottomUp)\r\n                //difY = -difY;\r\n                this.move(-difX, -difY);\r\n            }\r\n            this._lastMouseX = e.x;\r\n            this._lastMouseY = e.y;\r\n        }\r\n\r\n        private _onMouseUp(e: MouseEvent) {\r\n            if (!this._hasDrawing)\r\n                return;\r\n                this._onDrag = false;\r\n        }\r\n\r\n        private _onMouseWheel(e: WheelEvent) {\r\n            if (!this._hasDrawing)\r\n                return;\r\n            //var sceneMousePos = _viewTransform.localToGlobalPoint(e.x, e.y);\r\n            if (e.deltaY > 0) {\r\n                //_self.zoomFrom(ZOOM_STEP, sceneMousePos.x, sceneMousePos.y);\r\n                this.zoom(this.ZOOM_STEP);\r\n            }\r\n            else {\r\n                //_self.zoomFrom(1 / ZOOM_STEP, sceneMousePos.x, sceneMousePos.y);\r\n                this.zoom(1 / this.ZOOM_STEP);\r\n            }\r\n        }\r\n\r\n        private _onResize(e: UIEvent) {\r\n            if (this._autosize && this._htmlElement.parentElement) {\r\n                this._htmlElement.style.width = this._htmlElement.parentElement.clientWidth + \"px\";\r\n                this._htmlElement.style.height = this._htmlElement.parentElement.clientHeight + \"px\";\r\n            }\r\n            else {\r\n                this._htmlElement.style.width = this._width + \"px\";\r\n                this._htmlElement.style.height = this._height + \"px\";\r\n            }\r\n\r\n            this._canvas.width = this._htmlElement.clientWidth;\r\n            this._canvas.height = this._htmlElement.clientHeight;\r\n\r\n            this._isDirty = true;\r\n            this._viewTransform.setViewPixelSize(this._canvas.width, this._canvas.height);\r\n\r\n            if (!this._drawing)\r\n                return;\r\n            this._invalidate();\r\n        }\r\n\r\n        private _onDrawingChanged(oldValue: Drawing, newValue: Drawing) {\r\n            if (oldValue != null) {\r\n                //oldValue.EntitiesCollectionChanged -= Entities_CollectionChanged;\r\n                oldValue.unregisterDirtyEventHandler(this._onDrawingDirty.bind(this));\r\n            }\r\n            this._hasDrawing = false;\r\n            if (newValue != null) {\r\n                this._hasDrawing = true;\r\n                this._drawingContext._attachToDrawing(newValue);\r\n                //newValue.EntitiesCollectionChanged += Entities_CollectionChanged;\r\n                newValue.registerDirtyEventHandler(this._onDrawingDirty.bind(this));\r\n            }\r\n            this._checkNeverResized();\r\n        }\r\n\r\n\r\n\r\n        public get autosize() { return this._autosize; }\r\n        public set autosize(v: boolean) {\r\n            v = !!v;\r\n            if (this._autosize != v) {\r\n                this._autosize = v;\r\n                this._onResize(null);\r\n            }\r\n        }\r\n\r\n        public get canvas() { return this._canvas; }\r\n\r\n        public get currentZoom() { return this._viewTransform.viewZoom; }\r\n\r\n        public get currentTargetX() { return this._viewTransform.viewTargetX; }\r\n\r\n        public get currentTargetY() { return this._viewTransform.viewTargetY; }\r\n\r\n        public get drawAxes() { return this._drawAxes; }\r\n        public set drawAxes(v: boolean) {\r\n            v = !!v;\r\n            if (this._drawAxes != v) {\r\n                this._drawAxes = v;\r\n                this._invalidate();\r\n            }\r\n        }\r\n\r\n        public get drawing() { return this._drawing; }\r\n        public set drawing(v: Drawing) {\r\n            if (this._drawing != v) {\r\n                const oldValue = this._drawing;\r\n                this._drawing = v;\r\n                this._onDrawingChanged(oldValue, this._drawing);\r\n            }\r\n        }\r\n\r\n        public get height() { return this._autosize ? this._htmlElement.offsetHeight : this._height; }\r\n        public set height(v: number) {\r\n            if (this._autosize) {\r\n                this._height = v;\r\n            }\r\n            else {\r\n                if (this._height != v) {\r\n                    this._height = v;\r\n                    this._onResize(null);\r\n                }\r\n            }\r\n        }\r\n\r\n        public get htmlElement() { return this._htmlElement; }\r\n\r\n        public get scaleStyles() { return this._drawingContext.scaleStyles; }\r\n        public set scaleStyles(v: boolean) {\r\n            v = !!v;\r\n            this._drawingContext.scaleStyles = v;\r\n            this._invalidate();\r\n        }\r\n\r\n        public get width() { return this._autosize ? this._htmlElement.offsetWidth : this._width; }\r\n        public set width(v: number) {\r\n            if (this._autosize) {\r\n                this._width = v;\r\n            }\r\n            else {\r\n                if (this._width != v) {\r\n                    this._width = v;\r\n                    this._onResize(null);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        public getCursorPosition() {\r\n            return this._viewTransform.localToGlobalPoint(this._lastMouseX, this._lastMouseY);\r\n        }\r\n\r\n        public getCurrentViewBounds() {\r\n            return this._viewTransform.getViewBounds();\r\n        }\r\n\r\n        public redraw() {\r\n            this._isDirty = true;\r\n            this._onRender();\r\n        }\r\n\r\n        public move(offsetX: number, offsetY: number) {\r\n            this._viewTransform.moveViewTarget(offsetX, offsetY);\r\n            this._handleViewChanged();\r\n            this._invalidate();\r\n        }\r\n\r\n        public moveTo(centerX: number, centerY: number) {\r\n            this._viewTransform.setViewTarget(centerX, centerY);\r\n            this._handleViewChanged();\r\n            this._invalidate();        \r\n        }\r\n\r\n        public zoom(zoomIncrement: number) {\r\n            this._viewTransform.setViewZoom(this._viewTransform.viewZoom * zoomIncrement);\r\n            this._handleViewChanged();\r\n            this._invalidate();        \r\n        }\r\n\r\n        public zoomTo(zoomIncrement: number, centerX: number, centerY: number) {\r\n            this._viewTransform.setViewZoomTo(this._viewTransform.viewZoom * zoomIncrement, centerX, centerY);\r\n            this._handleViewChanged();\r\n            this._invalidate();        \r\n        }\r\n\r\n        public zoomAt(zoomFactor: number, centerX: number, centerY: number) {\r\n            this._viewTransform.setViewZoomTo(zoomFactor, centerX, centerY);\r\n            this._handleViewChanged();\r\n            this._invalidate();        \r\n        }\r\n\r\n        public zoomAll() {\r\n            var drawingBounds = this.drawing.getBounds();\r\n            if (drawingBounds.width == 0 || drawingBounds.height == 0)\r\n                return;\r\n            var drawingAspectRatio = drawingBounds.height / drawingBounds.width;\r\n            var viewPixelWidth = this._canvas.width;\r\n            var viewPixelHeight = this._canvas.height;\r\n            var viewPixelBounds = new Rect(0, 0, viewPixelWidth, viewPixelHeight);\r\n            var viewAspectRatio = viewPixelHeight / viewPixelWidth;\r\n            var currentZoom = this._viewTransform.viewZoom;\r\n            var viewGlobalBounds = this._viewTransform.localToGlobalRect(viewPixelBounds.x, viewPixelBounds.y, viewPixelBounds.width, viewPixelBounds.height);\r\n            var zoomFactor = 1.0;\r\n            if (drawingAspectRatio > viewAspectRatio) {\r\n                // esegue il 'fit' in altezza\r\n                zoomFactor = viewGlobalBounds.height / drawingBounds.height;\r\n            }\r\n            else {\r\n                // esegue il 'fit' in larghezza\r\n                zoomFactor = viewGlobalBounds.width / drawingBounds.width;\r\n            }\r\n            var centerX = drawingBounds.x + (drawingBounds.width * 0.5);\r\n            var centerY = drawingBounds.y + (drawingBounds.height * 0.5);\r\n            zoomFactor *= 0.9;\r\n            if (MathUtils.isZero(zoomFactor))\r\n                zoomFactor = 0.1;\r\n            this.zoomAt(zoomFactor, centerX, centerY);        \r\n        }\r\n\r\n\r\n        public onViewChanged: EventSet<Viewport, ViewChangedEventArgs>;\r\n    }\r\n}","\r\nnamespace Vgx {\r\n\r\n    export enum ViewportsLayout {\r\n        ONE = 1,\r\n        TWO_VERTICAL = 2,\r\n        TWO_HORIZONTAL = 3\r\n    }\r\n}","\r\nnamespace Vgx {\r\n    \r\n    export interface HttpClientProgressEventArgs {\r\n        loaded: number;\r\n        total : number;\r\n        percentage: number;\r\n    }\r\n\r\n    export interface HttpClientSuccessEventArgs {\r\n        result: any;\r\n        resultType : XMLHttpRequestResponseType;\r\n        rawResult: string;\r\n    }\r\n\r\n    export interface HttpClientErrorEventArgs {\r\n        status: string;\r\n        code : number;\r\n    }\r\n\r\n    export class HttpClient {\r\n\r\n        private static _download(\r\n            url: string, \r\n            responseType: XMLHttpRequestResponseType, \r\n            onSuccess: EventHandler<HttpClient, HttpClientSuccessEventArgs>, \r\n            optOnError: EventHandler<HttpClient, HttpClientErrorEventArgs>, \r\n            optOnAbort: EventHandler<HttpClient, EventArgs>) {\r\n            var client = new HttpClient();\r\n            client.method = \"GET\";\r\n            client.responseType = responseType;\r\n            client.onSuccess.add(onSuccess);\r\n            if (typeof optOnError === \"function\")\r\n                client.onError.add(optOnError);\r\n            if (typeof optOnAbort === \"function\")\r\n                client.onAbort.add(optOnAbort);\r\n            client.sendRequest(url);\r\n        }\r\n\r\n        public static downloadString(\r\n            url: string, \r\n            onSuccess: EventHandler<HttpClient, HttpClientSuccessEventArgs>, \r\n            optOnError?: EventHandler<HttpClient, HttpClientErrorEventArgs>, \r\n            optOnAbort?: EventHandler<HttpClient, EventArgs>\r\n        ) {\r\n            HttpClient._download(url, \"text\", onSuccess, optOnError, optOnAbort);\r\n        }\r\n\r\n        public static downloadJSON(\r\n            url: string, \r\n            onSuccess: EventHandler<HttpClient, HttpClientSuccessEventArgs>, \r\n            optOnError?: EventHandler<HttpClient, HttpClientErrorEventArgs>, \r\n            optOnAbort?: EventHandler<HttpClient, EventArgs>\r\n        ) {\r\n            HttpClient._download(url, \"json\", onSuccess, optOnError, optOnAbort);\r\n        }\r\n\r\n\r\n        private _events = new EventsManager(this);\r\n        private _baseUrl: string;\r\n        private _xhr: XMLHttpRequest;\r\n        private _method = \"GET\";\r\n        private _mimeType = \"text/plain;charset=UTF-8\";\r\n        private _responseType: XMLHttpRequestResponseType = \"text\";\r\n        private _timeout = 0;\r\n        private _isBusy = false;\r\n        private _useCredentials = false;\r\n\r\n        constructor(baseUrl?: string) {\r\n            this._baseUrl = this._formatBaseUrl(baseUrl);\r\n            this._xhr = new XMLHttpRequest();\r\n            this._xhr.addEventListener(\"progress\", this._xhr_onProgress.bind(this));\r\n            this._xhr.addEventListener(\"load\", this._xhr_onLoad.bind(this), false);\r\n            this._xhr.addEventListener(\"error\", this._xhr_onError.bind(this), false);\r\n            this._xhr.addEventListener(\"abort\", this._xhr_onAbort.bind(this), false);\r\n            //this._xhr.addEventListener(\"readystatechange\", this._xhr_onReadyStateChanged);\r\n\r\n            this.onAbort = new EventSet<HttpClient, EventArgs>(this._events, \"onAbort\");\r\n            this.onSuccess = new EventSet<HttpClient, HttpClientSuccessEventArgs>(this._events, \"onSuccess\");\r\n            this.onError = new EventSet<HttpClient, HttpClientErrorEventArgs>(this._events, \"onError\");\r\n            this.onProgress = new EventSet<HttpClient, HttpClientProgressEventArgs>(this._events, \"onProgress\");\r\n        }\r\n\r\n        private _xhr_onProgress(e: ProgressEvent<XMLHttpRequestEventTarget>) {\r\n            if (e.lengthComputable) {\r\n                var progress: HttpClientProgressEventArgs = {\r\n                    loaded: e.loaded,\r\n                    total: e.total,\r\n                    percentage: (e.loaded / e.total) * 100\r\n                };\r\n                this._events.trigger(\"onProgress\", progress);\r\n            }\r\n        }\r\n\r\n        private _xhr_onLoad(e: ProgressEvent<XMLHttpRequestEventTarget>) {\r\n            var result: HttpClientSuccessEventArgs = {\r\n                result: this._xhr.response,\r\n                resultType: this._xhr.responseType,\r\n                rawResult: this._xhr.responseText\r\n            };\r\n            this._events.trigger(\"onSuccess\", result);\r\n        }\r\n\r\n        private _xhr_onError(e: ProgressEvent<XMLHttpRequestEventTarget>) {\r\n            var error: HttpClientErrorEventArgs = {\r\n                status: this._xhr.statusText,\r\n                code: this._xhr.status\r\n            };\r\n            this._events.trigger(\"onError\", error);\r\n        }\r\n\r\n        private _xhr_onAbort(e: ProgressEvent<XMLHttpRequestEventTarget>) {\r\n            this._events.trigger(\"onAbort\", {});\r\n        }\r\n\r\n        // private _xhr_onReadyStateChanged(e: ProgressEvent<XMLHttpRequestEventTarget>) {\r\n        //    if (this._xhr.readyState == XMLHttpRequest.DONE) {\r\n        //     this._isBusy = false;\r\n        //        if (this._xhr.status == 200) {\r\n        //            // Request finished. Do processing here.\r\n        //        }\r\n        //        else {\r\n        //            // Error\r\n        //        }\r\n        //    }\r\n        // }\r\n\r\n        private _formatBaseUrl(url: string) {\r\n            if (typeof url !== \"string\")\r\n                return \"\";\r\n            if (url.length == 0)\r\n                return \"\";\r\n            if (url.substr(url.length - 1) !== \"/\")\r\n                url += \"/\";\r\n            return url;\r\n        }\r\n\r\n\r\n\r\n        public setRequestHeader(name: string, value: string) {\r\n            this._xhr.setRequestHeader(name, value);\r\n        }\r\n\r\n        public sendRequest(endPoint: string, optData?: Document | BodyInit | null) {\r\n\r\n            if (this._isBusy)\r\n                throw new Error(\"HttpClient is busy\");\r\n\r\n            var fullEndPoint = this._baseUrl + endPoint;\r\n            this._isBusy = true;\r\n            this._xhr.open(this._method, fullEndPoint, true);\r\n            this._xhr.timeout = this._timeout;\r\n            this._xhr.withCredentials = this._useCredentials;\r\n            this._xhr.overrideMimeType(this._mimeType);\r\n            this._xhr.responseType = this._responseType;\r\n            this._xhr.send(optData);\r\n        }\r\n\r\n        public abortRequest() {\r\n            if (this._isBusy) {\r\n                this._xhr.abort();\r\n            }\r\n        }\r\n\r\n\r\n        public get baseUrl() { return this._baseUrl; }\r\n        public set baseUrl(v: string) {\r\n            if (typeof v === \"string\") {\r\n                v = this._formatBaseUrl(v);\r\n                if (this._baseUrl !== v) {\r\n                    this._baseUrl = v;\r\n                }\r\n            }\r\n        }\r\n\r\n        public get isBusy() { return this._isBusy; }\r\n\r\n        public get method() { return this._method; }\r\n        public set method(v: string) {\r\n            if (typeof v === \"string\" && this._method !== v) {\r\n                this._method = v;\r\n            }\r\n        }\r\n\r\n        public get mimeType() { return this._mimeType; }\r\n        public set mimeType(v: string) {\r\n            if (typeof v === \"string\" && this._mimeType !== v) {\r\n                this._mimeType = v;\r\n            }\r\n        }\r\n\r\n        public get responseType() { return this._responseType; }\r\n        public set responseType(v: string) {\r\n            if (typeof v === \"string\" && this._responseType !== v) {\r\n                this._mimeType = v;\r\n            }\r\n        }\r\n\r\n        public get timeout() { return this._timeout; }\r\n        public set timeout(v: number) {\r\n            if (typeof v === \"number\" && this._timeout !== v) {\r\n                this._timeout = v;\r\n            }\r\n        }\r\n\r\n        public get useCredentials() { return this._useCredentials; }\r\n        public set useCredentials(v: boolean) {\r\n            if (typeof v === \"boolean\" && this._useCredentials !== v) {\r\n                this._useCredentials = v;\r\n            }\r\n        }\r\n\r\n\r\n        public onProgress: EventSet<HttpClient, HttpClientProgressEventArgs>; \r\n        public onSuccess: EventSet<HttpClient, HttpClientSuccessEventArgs>; \r\n        public onError: EventSet<HttpClient, HttpClientErrorEventArgs>; \r\n        public onAbort: EventSet<HttpClient, EventArgs>; \r\n    }\r\n}","\r\nnamespace SampleApps {\r\n\t\r\n\texport class DrawingRenderApp {\r\n\r\n\t\tpublic static start() {\r\n\t\t\tnew DrawingRenderApp();\r\n\t\t}\r\n\r\n\t\tprivate _canvas: HTMLCanvasElement;\r\n\t\tprivate _viewTransform: Vgx.ViewTransform;\r\n\t\tprivate _drawing: Vgx.Drawing;\r\n\t\tprivate _drawingContext: Vgx.DrawingContext;\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._canvas = window.document.querySelector(\"#renderCanvas\");\r\n\t\t\tthis._viewTransform = new Vgx.ViewTransform();\r\n\r\n\t\t\tVgx.HttpClient.downloadString(\"../../drawings/house.json\", this._dowloadReady.bind(this));\r\n\t\t}\r\n\r\n\t\tprivate _dowloadReady(s: Vgx.HttpClient, e: any) {\r\n\t\t\tthis._drawing = Vgx.Drawing.fromJSON(e.result);\r\n\t\t\tthis._drawingContext = new Vgx.DrawingContext(this._drawing, this._canvas, this._viewTransform);\r\n\t\t\tthis._draw();\r\n\t\t}\r\n\r\n\t\tprivate _draw() {\r\n\r\n\t\t\t//this._viewTransform.translate(400, 300);\r\n\r\n\t\t\tif (this._drawing.background) {\r\n\t\t\t\tthis._drawingContext.clear(this._drawing.background);\r\n\t\t\t} else {\r\n\t\t\t\tthis._drawingContext.clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar children = this._drawing.getChildren();\r\n\t\t\tfor (const child of children) {\r\n\t\t\t\tif (<Vgx.VgxDrawable>child) {\r\n\t\t\t\t\tif ((<Vgx.VgxDrawable>child).visible) {\r\n\t\t\t\t\t\t(<Vgx.VgxDrawable>child).draw(this._drawingContext);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace SampleApps {\r\n\t\r\n\texport class DrawingViewApp {\r\n\r\n\t\tpublic static start() {\r\n\t\t\tnew DrawingViewApp();\r\n\t\t}\r\n\r\n\t\tprivate _canvas: HTMLCanvasElement;\r\n\t\tprivate _viewTransform: Vgx.ViewTransform;\r\n\t\tprivate _drawing: Vgx.Drawing;\r\n\t\tprivate _drawingContext: Vgx.DrawingContext;\r\n\t\tprivate _view: Vgx.VgxView;\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._canvas = window.document.querySelector(\"#renderCanvas\");\r\n\t\t\tthis._viewTransform = new Vgx.ViewTransform();\r\n\r\n\t\t\tVgx.HttpClient.downloadString(\"../../drawings/google-logo.json\", this._dowloadReady.bind(this));\r\n\t\t}\r\n\r\n\t\tprivate _dowloadReady(s: Vgx.HttpClient, e: any) {\r\n\r\n\t\t\tthis._view = new Vgx.VgxView();\r\n\t\t\tthis._view.insertPointX = 100;\r\n\t\t\tthis._view.insertPointY = 100;\r\n\t\t\tthis._view.stroke = \"#666666\";\r\n\t\t\tthis._view.strokeWidth = 2;\r\n\t\t\tthis._view.clipBounds = new Vgx.Rect(0, 0, 250, 50);\r\n\t\t\tthis._view.clip = true;\r\n\r\n\t\t\tthis._drawing = Vgx.Drawing.fromJSON(e.result);\r\n\t\t\tfor (const child of this._drawing.getChildren()) {\r\n\t\t\t\tthis._view.children.add(child);\r\n\t\t\t}\r\n\t\t\tthis._drawing.clear();\r\n\r\n\t\t\tthis._drawing.addChild(this._view);\r\n\t\t\tthis._drawing.background = \"#ffffff\";\r\n\r\n\t\t\tconst artboardShadow = new Vgx.Shadow();\r\n\t\t\tartboardShadow.color = \"rgba(0,0,0,0.1)\";\r\n\t\t\tartboardShadow.offsetX = 3;\r\n\t\t\tartboardShadow.offsetY = 3;\r\n\t\t\tartboardShadow.blur = 3;\r\n\r\n\t\t\tconst artboard = new Vgx.Artboard();\r\n\t\t\tartboard.bounds = Vgx.Rect.from({ x: 50, y: 50, width: 250, height: 150});\r\n\t\t\tartboard.background = \"#cccccc\";\r\n\t\t\tartboard.border = \"#aaaaaa\";\r\n\t\t\tartboard.borderWidth = 1.2;\r\n\t\t\tartboard.clipContent = true;\r\n\t\t\tartboard.shadow = artboardShadow;\r\n\t\t\tthis._drawing.artboard = artboard;\r\n\r\n\t\t\tthis._drawingContext = new Vgx.DrawingContext(this._drawing, this._canvas, this._viewTransform);\r\n\t\t\tthis._drawingContext.drawDrawing(this._drawing);\r\n\t\t\tthis._drawingContext.drawAxes();\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace SampleApps {\r\n\r\n\texport class TestBoundsApp {\r\n\r\n\t\tpublic static start() {\r\n\r\n\t\t\tvar vectorGraphicsView = new Vgx.VectorGraphicsView();\r\n\t\t\tvectorGraphicsView.viewportsLayout = Vgx.ViewportsLayout.ONE;\r\n\t\t\tvectorGraphicsView.currentViewport.scaleStyles = true;\r\n\t\t\tvectorGraphicsView.currentViewport.drawAxes = true;\r\n\t\t\twindow.document.body.appendChild(vectorGraphicsView.htmlElement);\r\n\r\n\t\t\tvar drawing = new Vgx.Drawing();\r\n\r\n\t\t\tvar rectangle = new Vgx.VgxRectangle();\r\n\t\t\trectangle.insertPointX = 100;\r\n\t\t\trectangle.insertPointY = 100;\r\n\t\t\trectangle.width = 100;\r\n\t\t\trectangle.height = 100;\r\n\t\t\trectangle.fill = \"#aa56e1\";\r\n\t\t\trectangle.stroke = \"orangered\";\r\n\t\t\trectangle.strokeWidth = 2;\r\n\t\t\trectangle.transform.originX = 50;\r\n\t\t\trectangle.transform.originY = 50;\r\n\t\t\trectangle.transform.scaleX = 2;\r\n\t\t\trectangle.transform.scaleY = 2;\r\n\t\t\tdrawing.addChild(rectangle);\r\n\r\n\t\t\tvar rectangle2 = new Vgx.VgxRectangle();\r\n\t\t\trectangle2.insertPointX = 0;\r\n\t\t\trectangle2.insertPointY = 0;\r\n\t\t\trectangle2.width = 100;\r\n\t\t\trectangle2.height = 100;\r\n\t\t\trectangle2.fill = \"blue\";\r\n\t\t\trectangle2.stroke = \"yellow\";\r\n\t\t\trectangle2.strokeWidth = 2;\r\n\t\t\tdrawing.addChild(rectangle2);\r\n\r\n\t\t\tvectorGraphicsView.drawing = drawing;\r\n\t\t\tvectorGraphicsView.currentViewport.zoomAll();\r\n\t\t}\r\n\t}\r\n}","\r\nnamespace SampleApps {\r\n\r\n\texport class UIElement {\r\n\r\n\t\tprivate _htmlElement: HTMLElement;\r\n\r\n\t\tconstructor(htmlElement?: UIElement | HTMLElement | string) {\r\n\t\t\tif (typeof htmlElement !== \"undefined\") {\r\n\t\t\t\tif (htmlElement instanceof HTMLElement) {\r\n\t\t\t\t\tthis._htmlElement = htmlElement;\r\n\t\t\t\t}\r\n\t\t\t\telse if (typeof htmlElement === \"string\") {\r\n\t\t\t\t\tthis._htmlElement = window.document.createElement(htmlElement);\r\n\t\t\t\t\tif (this._htmlElement == null) {\r\n\t\t\t\t\t\tthrow new Error(\"invalid html tag\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (htmlElement instanceof UIElement) {\r\n\t\t\t\t\tthis._htmlElement = window.document.createElement(htmlElement.htmlElement.tagName);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthrow new Error(\"invalid argument\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._htmlElement = window.document.createElement(\"div\");\r\n\t\t\t}\r\n\r\n\t\t\tthis._htmlElement.classList.add(\"ui-element\");\r\n\t\t}\r\n\r\n\t\tpublic get htmlElement() { return this._htmlElement; }\r\n\t}\r\n\r\n\texport class ViewportMenu {\r\n\r\n\t\tprivate readonly ZOOM_FACTOR = 0.85;\r\n\r\n\t\tprivate _viewport: Vgx.Viewport;\r\n\t\tprivate _htmlElement: HTMLElement;\r\n\r\n\t\tconstructor(viewport: Vgx.Viewport) {\r\n\t\t\tthis._viewport = viewport;\r\n\t\t\tthis._initializeUI();\r\n\t\t}\r\n\r\n\t\tprivate _initializeUI() {\r\n\r\n\t\t\tthis._htmlElement = window.document.createElement(\"div\");\r\n\t\t\tthis._htmlElement.classList.add(\"viewportMenu\");\r\n\r\n\t\t\tvar menuGroupShowAxes = window.document.createElement(\"div\");\r\n\t\t\tmenuGroupShowAxes.classList.add(\"menuGroup\");\r\n\r\n\t\t\tvar lblShowAxes = window.document.createElement(\"label\");\r\n\t\t\tlblShowAxes.classList.add(\"menuElement\");\r\n\t\t\tlblShowAxes.classList.add(\"label\");\r\n\t\t\tlblShowAxes.setAttribute(\"for\", \"checkShowAxes\");\r\n\t\t\tlblShowAxes.innerText = \"Show axes \";\r\n\r\n\t\t\tvar checkShowAxes = window.document.createElement(\"input\");\r\n\t\t\tcheckShowAxes.classList.add(\"menuElement\");\r\n\t\t\tcheckShowAxes.setAttribute(\"type\", \"checkbox\");\r\n\t\t\tcheckShowAxes.setAttribute(\"name\", \"checkShowAxes\");\r\n\t\t\tcheckShowAxes.checked = this._viewport.drawAxes;\r\n\t\t\tcheckShowAxes.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis._viewport.drawAxes = (<any>e.target).checked;\r\n\t\t\t});\r\n\r\n\t\t\tmenuGroupShowAxes.appendChild(lblShowAxes);\r\n\t\t\tlblShowAxes.appendChild(checkShowAxes);\r\n\r\n\r\n\t\t\tvar separator1 = window.document.createElement(\"div\");\r\n\t\t\tseparator1.classList.add(\"menuElement\");\r\n\t\t\tseparator1.classList.add(\"separator\");\r\n\r\n\r\n\t\t\tvar menuGroupScaleStyles = window.document.createElement(\"div\");\r\n\t\t\tmenuGroupScaleStyles.classList.add(\"menuGroup\");\r\n\r\n\t\t\tvar lblScaleStyles = window.document.createElement(\"label\");\r\n\t\t\tlblScaleStyles.classList.add(\"menuElement\");\r\n\t\t\tlblScaleStyles.classList.add(\"label\");\r\n\t\t\tlblScaleStyles.setAttribute(\"for\", \"checkScaleStyles\");\r\n\t\t\tlblScaleStyles.innerText = \"Scale styles \";\r\n\r\n\t\t\tvar checkScaleStyles = window.document.createElement(\"input\");\r\n\t\t\tcheckScaleStyles.classList.add(\"menuElement\");\r\n\t\t\tcheckScaleStyles.setAttribute(\"type\", \"checkbox\");\r\n\t\t\tcheckScaleStyles.setAttribute(\"name\", \"checkScaleStyles\");\r\n\t\t\tcheckScaleStyles.checked = this._viewport.scaleStyles;\r\n\t\t\tcheckScaleStyles.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis._viewport.scaleStyles = (<any>e.target).checked;\r\n\t\t\t});\r\n\r\n\t\t\tmenuGroupScaleStyles.appendChild(lblScaleStyles);\r\n\t\t\tlblScaleStyles.appendChild(checkScaleStyles);\r\n\r\n\r\n\t\t\tvar separator2 = window.document.createElement(\"div\");\r\n\t\t\tseparator2.classList.add(\"menuElement\");\r\n\t\t\tseparator2.classList.add(\"separator\");\r\n\r\n\r\n\t\t\tvar menuGroupButtons = window.document.createElement(\"div\");\r\n\t\t\tmenuGroupButtons.classList.add(\"menuGroup\");\r\n\t\t\tmenuGroupButtons.classList.add(\"menuGroupButtons\");\r\n\r\n\t\t\tvar btnZoomMinus = window.document.createElement(\"button\");\r\n\t\t\tbtnZoomMinus.classList.add(\"menuButton\");\r\n\t\t\tbtnZoomMinus.setAttribute(\"title\", \"Zoom Out\");\r\n\t\t\tbtnZoomMinus.style.setProperty(\"background-image\", \"url(resources/zoom_minus.png)\");\r\n\t\t\tbtnZoomMinus.addEventListener(\"click\", (e) => this._viewport.zoom(this.ZOOM_FACTOR));\r\n\r\n\t\t\tvar btnZoomPlus = window.document.createElement(\"button\");\r\n\t\t\tbtnZoomPlus.classList.add(\"menuButton\");\r\n\t\t\tbtnZoomPlus.setAttribute(\"title\", \"Zoom In\");\r\n\t\t\tbtnZoomPlus.style.setProperty(\"background-image\", \"url(resources/zoom_plus.png)\");\r\n\t\t\tbtnZoomPlus.addEventListener(\"click\", (e) => this._viewport.zoom(1 / this.ZOOM_FACTOR) );\r\n\r\n\t\t\tvar btnZoomAll = window.document.createElement(\"button\");\r\n\t\t\tbtnZoomAll.classList.add(\"menuButton\");\r\n\t\t\tbtnZoomAll.setAttribute(\"title\", \"Zoom All\");\r\n\t\t\tbtnZoomAll.style.setProperty(\"background-image\", \"url(resources/zoom_all.png)\");\r\n\t\t\tbtnZoomAll.addEventListener(\"click\", (e) => this._viewport.zoomAll());\r\n\r\n\t\t\tmenuGroupButtons.appendChild(btnZoomMinus);\r\n\t\t\tmenuGroupButtons.appendChild(btnZoomPlus);\r\n\t\t\tmenuGroupButtons.appendChild(btnZoomAll);\r\n\r\n\r\n\t\t\tthis._htmlElement.appendChild(menuGroupShowAxes);\r\n\t\t\tthis._htmlElement.appendChild(separator1);\r\n\t\t\tthis._htmlElement.appendChild(menuGroupScaleStyles);\r\n\t\t\tthis._htmlElement.appendChild(separator2);\r\n\t\t\tthis._htmlElement.appendChild(menuGroupButtons);\r\n\t\t}\r\n\r\n\r\n\t\tpublic get htmlElement() { return this._htmlElement; }\r\n\r\n\t\tpublic get viewport() { return this._viewport; }\r\n\t}\r\n\r\n\texport class ViewerApp {\r\n\r\n\t\tpublic static start() {\r\n\t\t\tnew ViewerApp();\r\n\t\t}\r\n\r\n\r\n\t\tprivate _menuBar: HTMLElement;\r\n\t\tprivate _mainView: HTMLElement;\r\n\t\tprivate _vectorGraphicsView: Vgx.VectorGraphicsView;\r\n\t\tprivate _selectDrawing: HTMLSelectElement;\r\n\t\tprivate _selectBackground: HTMLSelectElement;\r\n\t\t//private _selectOrientation: HTMLSelectElement;\r\n\t\tprivate _selectViewports: HTMLSelectElement;\r\n\t\tprivate _menuViewports: Array<Vgx.Viewport>;\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis._menuViewports = [];\r\n\t\t\tthis._initializeUI();\r\n\t\t}\r\n\r\n\t\tprivate _initializeUI() {\r\n\r\n\t\t\tthis._menuBar = window.document.querySelector(\"#menuBar\");\r\n\t\t\tthis._mainView = window.document.querySelector(\"#mainView\");\r\n\t\r\n\t\t\tthis._vectorGraphicsView = new Vgx.VectorGraphicsView();\r\n\t\t\tthis._vectorGraphicsView.onViewportsLayoutChanged.add(this._onViewportsLayoutChanged);\r\n\t\t\tthis._vectorGraphicsView.viewportsLayout = Vgx.ViewportsLayout.ONE;\r\n\t\t\tthis._vectorGraphicsView.viewportsSpace = 4;\r\n\t\t\tthis._vectorGraphicsView.currentViewport.scaleStyles = true;\r\n\t\t\t//_vectorGraphicsView.currentViewport.drawAxes = true;\r\n\t\t\tthis._onViewportsLayoutChanged(this._vectorGraphicsView, null);\r\n\t\t\tthis._mainView.appendChild(this._vectorGraphicsView.htmlElement);\r\n\t\r\n\t\r\n\t\t\tthis._selectDrawing = window.document.querySelector(\"#selectDrawing\");\r\n\t\t\tthis._selectDrawing.addEventListener(\"change\", (e) => {\r\n\t\t\t\tvar args = this._selectDrawing.value.split(\"|\");\r\n\t\t\t\tthis._loadDrawing(args[0], args[1]).catch();\r\n\t\t\t});\r\n\t\r\n\t\t\tthis._selectBackground = window.document.querySelector(\"#selectBackground\");\r\n\t\t\tthis._selectBackground.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis._vectorGraphicsView.drawing.background = this._selectBackground.value;\r\n\t\t\t});\r\n\t\r\n\t\t\t//_selectOrientation = window.document.querySelector(\"#selectOrientation\");\r\n\t\t\t//_selectOrientation.addEventListener(\"change\", (e) => {\r\n\t\t\t//    for (var i = 0; i < _vectorGraphicsView.viewportsCount; i++) {\r\n\t\t\t//        var viewport = _vectorGraphicsView.getViewport(i);\r\n\t\t\t//        viewport.orientation = _selectOrientation.selectedIndex + 1;\r\n\t\t\t//    }\r\n\t\t\t//});\r\n\t\r\n\t\t\tthis._selectViewports = window.document.querySelector(\"#selectViewports\");\r\n\t\t\tthis._selectViewports.addEventListener(\"change\", (e) => {\r\n\t\t\t\tthis._vectorGraphicsView.viewportsLayout = this._selectViewports.selectedIndex + 1;\r\n\t\t\t});\r\n\t\r\n\t\t\twindow.addEventListener(\"resize\", this._onWindowResize.bind(this));\r\n\r\n\t\t\t// -------------------------------------------------\r\n\r\n\t\t\tthis._fillSelectInputs();\r\n\r\n\t\t\tvar optionParts = this._selectDrawing.options[0].value.split(\"|\");\r\n\t\t\tvar url = optionParts[0];\r\n\t\t\tvar type = optionParts[1];\r\n\t\t\tthis._loadDrawing(url, type).catch(() => this._onWindowResize());\r\n\r\n\t\t\t//this._onWindowResize();\r\n\t\t}\r\n\r\n\t\tprivate _fillSelectInputs() {\r\n\r\n\t\t\tconst createOption = (text: string, value: string) => {\r\n\t\t\t\tconst result = document.createElement(\"option\");\r\n\t\t\t\tresult.value = value;\r\n\t\t\t\tresult.textContent = text;\r\n\t\t\t\treturn result;\r\n\t\t\t};\r\n\r\n\t\t\t//this._selectDrawing.appendChild(createOption(\"points\", \"../../drawings/points.json|json\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"vgx-model\", \"../../drawings/vgx-model.js|script\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"modern-clock\", \"../../drawings/modern-clock.js|script\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"clock\", \"../../drawings/clock.js|script\"));\r\n\t\t\t//this._selectDrawing.appendChild(createOption(\"colors\", \"../../drawings/colors.js|script\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"house\", \"../../drawings/house.json|json\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"hello-world\", \"../../drawings/hello-world.json|json\"));\r\n\t\t\tthis._selectDrawing.appendChild(createOption(\"google-logo\", \"../../drawings/google-logo.json|json\"));\r\n\r\n\t\t\tthis._selectBackground.appendChild(createOption(\"Dark\", \"#0a0d11\"));\r\n\t\t\tthis._selectBackground.appendChild(createOption(\"Light\", \"#f1f5ff\"));\r\n\r\n\t\t\tthis._selectViewports.appendChild(createOption(\"One\", \"1\"));\r\n\t\t\tthis._selectViewports.appendChild(createOption(\"Two vertical\", \"2\"));\r\n\t\t\tthis._selectViewports.appendChild(createOption(\"Two horizontal\", \"3\"));\r\n\t\t}\r\n\r\n\t\tprivate _onWindowResize() {\r\n\t\t\tthis._mainView.style.setProperty(\"padding-top\", this._menuBar.clientHeight + \"px\");\r\n\t\t}\r\n\r\n\t\tprivate _onViewportsLayoutChanged(sender: Vgx.VectorGraphicsView, e: Vgx.ViewportsLayout) {\r\n\t\t\tvar updatedMenuViewports = [];\r\n\t\t\tfor (var i = 0; i < this._vectorGraphicsView.viewportsCount; i++) {\r\n\t\t\t\tvar viewport = this._vectorGraphicsView.getViewport(i);\r\n\t\t\t\t//if (_selectOrientation) {\r\n\t\t\t\t//    viewport.orientation = _selectOrientation.selectedIndex + 1;\r\n\t\t\t\t//}\r\n\t\t\t\tif (this._menuViewports.indexOf(viewport) == -1) {\r\n\t\t\t\t\tthis._addViewportMenu(viewport);\r\n\t\t\t\t}\r\n\t\t\t\tupdatedMenuViewports.push(viewport);\r\n\t\t\t}\r\n\t\t\tthis._menuViewports = updatedMenuViewports;\r\n\t\t}\r\n\r\n\t\tprivate _addViewportMenu(viewport: Vgx.Viewport) {\r\n\t\t\tvar viewportMenu = new ViewportMenu(viewport);\r\n\t\t\tviewport.htmlElement.appendChild(viewportMenu.htmlElement);\r\n\t\t}\r\n\r\n\t\tprivate _resolveImporter(fullTypeName: string) {\r\n\t\t\tconst f = new Function(`return new ${fullTypeName}()`);\r\n\t\t\treturn f() as Vgx.Importer;\r\n\t\t}\r\n\r\n\t\tprivate async _loadDrawing(url: string, type: \"script\" | \"json\" | string) {\r\n\r\n\t\t\t// Vgx.HttpClient.downloadString(url, (s, e) => {\r\n\t\t\t// \tvar drawing;\r\n\t\t\t// \tif (type == \"script\") {\r\n\t\t\t// \t\tdrawing = Vgx.Drawing.fromScript(e.result);\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tdrawing = Vgx.Drawing.fromJSON(e.result);\r\n\t\t\t// \t}\r\n\t\t\t// \tif (drawing.background) {\r\n\t\t\t// \t\tvar option = document.createElement(\"option\");\r\n\t\t\t// \t\toption.value = <any>drawing.background;\r\n\t\t\t// \t\toption.innerText = <any>drawing.background;\r\n\t\t\t// \t\tthis._selectBackground.options.add(option);\r\n\t\t\t// \t\tthis._selectBackground.selectedIndex = this._selectBackground.options.length - 1;\r\n\t\t\t// \t} else {\r\n\t\t\t// \t\tdrawing.background = this._selectBackground.options[0].value;\r\n\t\t\t// \t}\r\n\r\n\t\t\t// \tthis._vectorGraphicsView.drawing = drawing;\r\n\t\t\t// \t//this._vectorGraphicsView.currentViewport.zoomAll();\r\n\t\t\t// });\r\n\r\n\t\t\tdebugger;\r\n\r\n\t\t\tconst importerType = Vgx.ImportersManager.getTypeOrDefault(type);\r\n\t\t\tconst importer = this._resolveImporter(importerType.typeName);\r\n\t\t\tif (!importer) {\r\n\t\t\t\tthrow new Error(\"importer not loaded\");\r\n\t\t\t}\r\n\r\n\t\t\tconst drawing = await importer.loadFile(url);\r\n\t\t\tif (drawing.background) {\r\n\t\t\t\tvar option = document.createElement(\"option\");\r\n\t\t\t\toption.value = <any>drawing.background;\r\n\t\t\t\toption.innerText = <any>drawing.background;\r\n\t\t\t\tthis._selectBackground.options.add(option);\r\n\t\t\t\tthis._selectBackground.selectedIndex = this._selectBackground.options.length - 1;\r\n\t\t\t} else {\r\n\t\t\t\tdrawing.background = this._selectBackground.options[0].value;\r\n\t\t\t}\r\n\t\t\tthis._vectorGraphicsView.drawing = drawing;\r\n\t\t}\r\n\t}\r\n}"]}