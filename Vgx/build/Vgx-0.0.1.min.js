var library={Cgx:{},Extra:{},Vgx:{}};(function(n){var t=function(){function n(r,u,f,e,o,s){function l(n){return Math.abs(n)<22204460492503131e-31}function c(n,t){var i=t*h.m21+h.offsetX,r=n*h.m12+h.offsetY;return n*=h.m11,n+=i,t*=h.m22,t+=r,{x:n,y:t}}function a(){return h.m11*h.m22-h.m21*h.m12}function v(){return new n(h.m11,h.m12,h.m21,h.m22,h.offsetX,h.offsetY)}function y(){return!l(a())}function p(){return h.m11==1&&h.m12==0&&h.m21==0&&h.m22==1&&h.offsetX==0&&h.offsetY==0}function w(){h.m11=1;h.m12=0;h.m21=0;h.m22=1;h.offsetX=0;h.offsetY=0}function b(n){n=n%360;var r=i(n*.017453292519943295,0,0);t(h,r)}function k(n,r,u){n=n%360;var f=i(n*.017453292519943295,r,u);t(h,f)}function d(i,r){var u=new n(i,0,0,r,0,0);t(h,u)}function g(i,r,u,f){var e=new n(i,0,0,r,u-i*u,f-r*f);t(h,e)}function nt(i,r){i=i%360*.017453292519943295;r=r%360*.017453292519943295;var u=new n(1,Math.tan(r),Math.tan(i),1,0,0);t(h,u)}function tt(n,t){return c(n,t)}function it(n,t,i,r){var l=n+i,a=t+r,e=c(n,t),o=c(l,a),u,f,s,h;return u=e.x,f=e.y,s=o.x-u,h=o.y-f,{x:u,y:f,width:s,height:h}}function rt(n,t){h.offsetX+=n;h.offsetY+=t}var h=this;Object.defineProperty(this,"m11",{value:r||1,configurable:!1,writable:!0});Object.defineProperty(this,"m12",{value:u||0,configurable:!1,writable:!0});Object.defineProperty(this,"m21",{value:f||0,configurable:!1,writable:!0});Object.defineProperty(this,"m22",{value:e||1,configurable:!1,writable:!0});Object.defineProperty(this,"offsetX",{value:o||0,configurable:!1,writable:!0});Object.defineProperty(this,"offsetY",{value:s||0,configurable:!1,writable:!0});Object.defineProperty(this,"clone",{value:v});Object.defineProperty(this,"hasInverse",{value:y});Object.defineProperty(this,"isIdentity",{value:p});Object.defineProperty(this,"reset",{value:w});Object.defineProperty(this,"rotate",{value:b});Object.defineProperty(this,"rotateAt",{value:k});Object.defineProperty(this,"scale",{value:d});Object.defineProperty(this,"scaleAt",{value:g});Object.defineProperty(this,"skew",{value:nt});Object.defineProperty(this,"transformPoint",{value:tt});Object.defineProperty(this,"transformRect",{value:it});Object.defineProperty(this,"translate",{value:rt})}function i(t,i,r){var u=Math.sin(t),f=Math.cos(t),e=i*(1-f)+r*u,o=r*(1-f)-i*u;return new n(f,u,-u,f,e,o)}function t(n,t){var i=n.m11*t.m11+n.m12*t.m21,r=n.m11*t.m12+n.m12*t.m22,u=n.m21*t.m11+n.m22*t.m21,f=n.m21*t.m12+n.m22*t.m22,e=n.offsetX*t.m11+n.offsetY*t.m21+t.offsetX,o=n.offsetX*t.m12+n.offsetY*t.m22+t.offsetY;n.m11=i;n.m12=r;n.m21=u;n.m22=f;n.offsetX=e;n.offsetY=o}function r(t){var r=t.m11*t.m22-t.m21*t.m12;if(Math.abs(r)<1401298e-51)return new n(Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN);var i=1/r,u=t.m22*i,f=-t.m12*i,e=-t.m21*i,o=t.m11*i,s=(t.m21*t.offsetY-t.offsetX*t.m22)*i,h=(t.offsetX*t.m12-t.m11*t.offsetY)*i;return new n(u,f,e,o,s,h)}function u(t,i){var r=t.m11*i.m11+t.m12*i.m21,u=t.m11*i.m12+t.m12*i.m22,f=t.m21*i.m11+t.m22*i.m21,e=t.m21*i.m12+t.m22*i.m22,o=t.offsetX*i.m11+t.offsetY*i.m21+i.offsetX,s=t.offsetX*i.m12+t.offsetY*i.m22+i.offsetY;return new n(r,u,f,e,o,s)}function f(t,i){var r=t.m11*i,u=t.m12*i,f=t.m21*i,e=t.m22*i,o=t.offsetX*i,s=t.offsetY*i;return new n(r,u,f,e,o,s)}return Object.defineProperty(n,"identity",{value:new n(1,0,0,1,0,0)}),Object.defineProperty(n,"invert",{value:r}),Object.defineProperty(n,"multiplyMatrix",{value:u}),Object.defineProperty(n,"multiplyValue",{value:f}),n}();n.Cgx.Matrix=t})(library),function(n){var t=function(){function t(){var t=this,r=null,i=!0,h=0,c=0,u=0,f=0,e=1,o=1,s=0;Object.defineProperty(this,"_propertyChanged",{enumerable:!1,configurable:!0,value:function(){}});Object.defineProperty(this,"originX",{get:function(){return h},set:function(n){typeof n=="number"&&h!==n&&(h=n,i=!0,t._propertyChanged("originX"))}});Object.defineProperty(this,"originY",{get:function(){return c},set:function(n){typeof n=="number"&&c!==n&&(c=n,i=!0,t._propertyChanged("originY"))}});Object.defineProperty(this,"translationX",{get:function(){return u},set:function(n){typeof n=="number"&&u!==n&&(u=n,i=!0,t._propertyChanged("translationX"))}});Object.defineProperty(this,"translationY",{get:function(){return f},set:function(n){typeof n=="number"&&f!==n&&(f=n,i=!0,t._propertyChanged("translationY"))}});Object.defineProperty(this,"scaleX",{get:function(){return e},set:function(n){typeof n=="number"&&e!==n&&(e=n,i=!0,t._propertyChanged("scaleX"))}});Object.defineProperty(this,"scaleY",{get:function(){return o},set:function(n){typeof n=="number"&&o!==n&&(o=n,i=!0,t._propertyChanged("scaleY"))}});Object.defineProperty(this,"rotation",{get:function(){return s},set:function(n){typeof n=="number"&&s!==n&&(s=n,i=!0,t._propertyChanged("rotation"))}});Object.defineProperty(this,"getMatrix",{value:function(){return(r==null||i)&&(r=new n.Cgx.Matrix,r.translate(t.translationX,t.translationY),r.rotate(t.rotation),r.scale(t.scaleX,t.scaleY)),r}});Object.defineProperty(this,"isIdentity",{get:function(){return u==0&&f==0&&e==1&&o==1&&s==0?!0:!1}});Object.defineProperty(this,"reset",{value:function(){h=0;c=0;u=0;f=0;e=1;o=1;s=0;r=null}});Object.defineProperty(this,"setDirty",{value:function(){i=!0}});Object.defineProperty(this,"transformPoint",{value:function(n,i){return t.getMatrix().transformPoint(n,i)}});Object.defineProperty(this,"transformRect",{value:function(n,i,r,u){return t.getMatrix().transformRect(n,i,r,u)}})}return t}();n.Cgx.Transform=t}(library),function(n){var i=function(){function n(n){var t=n;Object.defineProperty(this,"_brushType",{get:function(){return t},enumerable:!1})}return n}(),t,r,u,f;n.Cgx.Brush=i;t=function(){function n(n){i.apply(this,[n]);var t=[];Object.defineProperty(this,"_getColorStops",{value:function(){return t},enumerable:!1});Object.defineProperty(this,"addColorStop",{value:function(n,i){t.push({offset:n,color:i})}})}return n.prototype=Object.create(i.prototype),n.prototype.consrtuctor=n,n}();n.Cgx.GradientBrush=t;r=function(){function n(){t.apply(this,["linear"]);Object.defineProperty(this,"x0",{writable:!0,value:0});Object.defineProperty(this,"y0",{writable:!0,value:0});Object.defineProperty(this,"x1",{writable:!0,value:100});Object.defineProperty(this,"y1",{writable:!0,value:100})}return n.prototype=Object.create(t.prototype),n.prototype.consrtuctor=n,n}();n.Cgx.LinearGradientBrush=r;u=function(){function n(){t.apply(this,["radial"]);Object.defineProperty(this,"x0",{writable:!0,value:0});Object.defineProperty(this,"y0",{writable:!0,value:0});Object.defineProperty(this,"r0",{writable:!0,value:0});Object.defineProperty(this,"x1",{writable:!0,value:100});Object.defineProperty(this,"y1",{writable:!0,value:100});Object.defineProperty(this,"r1",{writable:!0,value:0})}return n.prototype=Object.create(t.prototype),n.prototype.consrtuctor=n,n}();n.Cgx.RadialGradientBrush=u;f=function(){function n(){i.apply(this,["pattern"]);Object.defineProperty(this,"image",{value:null,writable:!0});Object.defineProperty(this,"repetition",{value:"repeat",writable:!0})}return n.prototype=Object.create(i.prototype),n.prototype.consrtuctor=n,n}();n.Cgx.PatternBrush=f}(library),function(n){var t=function(){function n(n){function t(){throw new Error("abstract member call");}var r=this,i=n;Object.defineProperty(this,"name",{configurable:!0,value:"Renderer"});Object.defineProperty(this,"canvas",{get:function(){return i}});Object.defineProperty(this,"globalAlpha",{configurable:!0,value:1});Object.defineProperty(this,"globalCompositeOperation",{configurable:!0,value:"source-over"});Object.defineProperty(this,"fillStyle",{configurable:!0,value:"#000"});Object.defineProperty(this,"strokeStyle",{configurable:!0,value:"#000"});Object.defineProperty(this,"shadowBlur",{configurable:!0,value:0});Object.defineProperty(this,"shadowColor",{configurable:!0,value:"#000"});Object.defineProperty(this,"shadowOffsetX",{configurable:!0,value:0});Object.defineProperty(this,"shadowOffsetY",{configurable:!0,value:0});Object.defineProperty(this,"createLinearGradient",{configurable:!0,value:function(){t()}});Object.defineProperty(this,"createRadialGradient",{configurable:!0,value:function(){t()}});Object.defineProperty(this,"createPattern",{configurable:!0,value:function(){t()}});Object.defineProperty(this,"lineCap",{configurable:!0,value:"butt"});Object.defineProperty(this,"lineJoin",{configurable:!0,value:"miter"});Object.defineProperty(this,"lineWidth",{configurable:!0,value:1});Object.defineProperty(this,"miterLimit",{configurable:!0,value:10});Object.defineProperty(this,"getLineDash",{configurable:!0,value:function(){t()}});Object.defineProperty(this,"setLineDash",{configurable:!0,value:function(){t()}});Object.defineProperty(this,"lineDashOffset",{configurable:!0,value:0});Object.defineProperty(this,"fontSize",{configurable:!0,value:16});Object.defineProperty(this,"fontFamily",{configurable:!0,value:"Arial"});Object.defineProperty(this,"textAlign",{configurable:!0,value:"left"});Object.defineProperty(this,"textBaseline",{configurable:!0,value:"bottom"});Object.defineProperty(this,"direction",{configurable:!0,value:"rtl"});this.saveState=function(){t()};this.restoreState=function(){t()};this.toDataURL=function(){t()};this.clearRect=function(){t()};this.strokeRect=function(){t()};this.fillRect=function(){t()};this.stroke=function(){t()};this.fill=function(){t()};this.strokePath2D=function(){t()};this.fillPath2D=function(){t()};this.clip=function(){t()};this.rect=function(){t()};this.square=function(){t()};this.ellipse=function(){t()};this.circle=function(){t()};this.arc=function(){t()};this.beginPath=function(){t()};this.closePath=function(){t()};this.arcTo=function(){t()};this.moveTo=function(){t()};this.lineTo=function(){t()};this.bezierCurveTo=function(){t()};this.quadraticCurveTo=function(){t()};this.isPointInPath=function(){t()};this.isPointInPath2D=function(){t()};this.isPointInStroke=function(){t()};this.isPointInPath2DStroke=function(){t()};this.addHitRegion=function(){t()};this.removeHitRegion=function(){t()};this.clearHitRegions=function(){t()};this.drawImage=function(){t()};this.createImageData=function(){t()};this.cloneImageData=function(){t()};this.getImageData=function(){t()};this.putImageData=function(){t()};Object.defineProperty(this,"imageSmoothingEnabled",{configurable:!0,value:!0});this.fillText=function(){t()};this.strokeText=function(){t()};this.measureText=function(){t()};this.rotate=function(){t()};this.translate=function(){t()};this.scale=function(){t()};this.transform=function(){t()};this.setTransform=function(){t()};this.resetTransform=function(){t()};this.drawFocusIfNeeded=function(){t()}}return n}();n.Cgx.Renderer=t}(library),function(n){var t=function(){function t(t){function a(){i=r.canvas.getContext("2d");r.globalAlpha=u.globalAlpha;r.globalCompositeOperation=u.globalCompositeOperation;r.fillStyle=u.fillStyle;r.strokeStyle=u.strokeStyle;r.shadowBlur=u.shadowBlur;r.shadowColor=u.shadowColor;r.shadowOffsetX=u.shadowOffsetX;r.shadowOffsetY=u.shadowOffsetY;r.lineCap=u.lineCap;r.lineJoin=u.lineJoin;r.lineWidth=u.lineWidth;r.miterLimit=u.miterLimit;r.lineDashOffset=u.lineDashOffset;r.fontSize=u.fontSize;r.fontFamily=u.fontFamily;r.textAlign=u.textAlign;r.textBaseline=u.textBaseline;r.direction=u.direction;r.imageSmoothingEnabled=u.imageSmoothingEnabled}function v(n,t,i,r,u,f,e){u=u||0;f=f||0;e=e||2*Math.PI;var l=i*.545,a=r*.545,v=cx-l,y=cy-a,p=cx+l,w=cy+a,o={x:cx,y:cy+r},s={x:cx+i,y:cy},h={x:cx,y:cy-r},c={x:cx-i,y:cy},b={x:p,y:o.y},k={x:s.x,y:w},d={x:s.x,y:y},g={x:p,y:h.y},nt={x:v,y:h.y},tt={x:c.x,y:y},it={x:c.x,y:w},rt={x:v,y:o.y};_renderer.moveTo(o.x,o.y);_renderer.bezierCurveTo(b.x,b.y,k.x,k.y,s.x,s.y);_renderer.bezierCurveTo(d.x,d.y,g.x,g.y,h.x,h.y);_renderer.bezierCurveTo(nt.x,nt.y,tt.x,tt.y,c.x,c.y);_renderer.bezierCurveTo(it.x,it.y,rt.x,rt.y,o.x,o.y);_renderer.closePath()}n.Cgx.Renderer.call(this,t);var r=this,f=0,e="",i,u={globalAlpha:r.globalAlpha,globalCompositeOperation:r.globalCompositeOperation,fillStyle:r.fillStyle,strokeStyle:r.strokeStyle,shadowBlur:r.shadowBlur,shadowColor:r.shadowColor,shadowOffsetX:r.shadowOffsetX,shadowOffsetY:r.shadowOffsetY,lineCap:r.lineCap,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,lineDashOffset:r.lineDashOffset,fontSize:r.fontSize,fontFamily:r.fontFamily,textAlign:r.textAlign,textBaseline:r.textBaseline,direction:r.direction,imageSmoothingEnabled:r.imageSmoothingEnabled},o="ellipse"in CanvasRenderingContext2D.prototype,y="arc"in CanvasRenderingContext2D.prototype,s="direction"in CanvasRenderingContext2D.prototype,h="addHitRegion"in CanvasRenderingContext2D.prototype,c="removeHitRegion"in CanvasRenderingContext2D.prototype,l="clearHitRegions"in CanvasRenderingContext2D.prototype;Object.defineProperty(this,"name",{value:"CanvasRenderer"});Object.defineProperty(this,"globalAlpha",{get:function(){return i.globalAlpha},set:function(n){i.globalAlpha=n}});Object.defineProperty(this,"globalCompositeOperation",{get:function(){return i.globalCompositeOperation},set:function(n){i.globalCompositeOperation=n}});Object.defineProperty(this,"fillStyle",{get:function(){return i.fillStyle},set:function(n){i.fillStyle=n}});Object.defineProperty(this,"strokeStyle",{get:function(){return i.strokeStyle},set:function(n){i.strokeStyle=n}});Object.defineProperty(this,"shadowBlur",{get:function(){return i.shadowBlur},set:function(n){i.shadowBlur=n}});Object.defineProperty(this,"shadowColor",{get:function(){return i.shadowColor},set:function(n){i.shadowColor=n}});Object.defineProperty(this,"shadowOffsetX",{get:function(){return i.shadowOffsetX},set:function(n){i.shadowOffsetX=n}});Object.defineProperty(this,"shadowOffsetY",{get:function(){return i.shadowOffsetY},set:function(n){i.shadowOffsetY=n}});Object.defineProperty(this,"createLinearGradient",{value:function(n,t,r,u){return i.createLinearGradient(n,t,r,u)}});Object.defineProperty(this,"createRadialGradient",{value:function(n,t,r,u,f,e){return i.createRadialGradient(n,t,r,u,f,e)}});Object.defineProperty(this,"createPattern",{value:function(n,t){return i.createPattern(n,t)}});Object.defineProperty(this,"lineCap",{get:function(){return i.lineCap},set:function(n){i.lineCap=n}});Object.defineProperty(this,"lineJoin",{get:function(){return i.lineJoin},set:function(n){i.lineJoin=n}});Object.defineProperty(this,"lineWidth",{get:function(){return i.lineWidth},set:function(n){i.lineWidth=n}});Object.defineProperty(this,"miterLimit",{get:function(){return i.miterLimit},set:function(n){i.miterLimit=n}});Object.defineProperty(this,"getLineDash",{value:function(){i.getLineDash()}});Object.defineProperty(this,"setLineDash",{value:function(n){i.setLineDash(n)}});Object.defineProperty(this,"lineDashOffset",{get:function(){return i.lineDashOffset},set:function(n){i.lineDashOffset=n}});Object.defineProperty(this,"fontSize",{get:function(){return f},set:function(n){f=n;i.font=f+"px "+e}});Object.defineProperty(this,"fontFamily",{get:function(){return e},set:function(n){e=n;i.font=f+"px "+e}});Object.defineProperty(this,"textAlign",{get:function(){return i.textAlign},set:function(n){i.textAlign=n}});Object.defineProperty(this,"textBaseline",{get:function(){return i.textBaseline},set:function(n){i.textBaseline=n}});Object.defineProperty(this,"direction",{get:function(){return s?i.direction:u.direction},set:function(n){s?i.direction=n:console.log("unsupported property 'direction'")}});this.saveState=function(){i.save()};this.restoreState=function(){i.restore()};this.toDataURL=function(n,t){i.toDataURL(n,t)};this.clearRect=function(n,t,r,u,f){typeof f=="undefined"||f===null?i.clearRect(n,t,r,u):(i.fillStyle=f,i.fillRect(n,t,r,u))};this.strokeRect=function(n,t,r,u){i.strokeRect(n,t,r,u)};this.fillRect=function(n,t,r,u){i.fillRect(n,t,r,u)};this.stroke=function(){i.stroke()};this.fill=function(n){i.fill(n)};this.strokePath2D=function(n){i.stroke(n)};this.fillPath2D=function(n,t){t=t||"nonzero";i.fill(n,t)};this.clip=function(){i.clip()};this.rect=function(n,t,r,u){i.rect(n,t,r,u)};this.square=function(n,t,r){i.rect(n,t,r,r)};this.ellipse=function(n,t,r,u,f,e,s){o?(f=f||0,e=e||0,s=s||2*Math.PI,i.ellipse(n,t,r,u,f,e,s)):v(n,t,r,u,f,e,s)};this.circle=function(n,t,r){o?i.ellipse(n,t,r,r,0,0,2*Math.PI):i.arc(n,t,radius,0,2*Math.PI,!1)};this.arc=function(n,t,r,u,f,e){i.arc(n,t,r,u,f,!!e)};this.beginPath=function(){i.beginPath()};this.closePath=function(){i.closePath()};this.arcTo=function(n,t,r,u,f){i.arcTo(n,t,r,u,f)};this.moveTo=function(n,t){i.moveTo(n,t)};this.lineTo=function(n,t){i.lineTo(n,t)};this.bezierCurveTo=function(n,t,r,u,f,e){i.bezierCurveTo(n,t,r,u,f,e)};this.quadraticCurveTo=function(n,t,r,u){i.quadraticCurveTo(n,t,r,u)};this.isPointInPath=function(n,t,r){return i.isPointInPath(n,t,r)};this.isPointInPath2D=function(n,t,r,u){return i.isPointInPath(n,t,r,u)};this.isPointInStroke=function(n,t){return i.isPointInStroke(n,t)};this.isPointInPath2DStroke=function(n,t,r){return i.isPointInStroke(n,t,r)};this.addHitRegion=function(n){return h?i.addHitRegion(n):(console.log("unsupported function 'addHitRegion'"),0)};this.removeHitRegion=function(n){c?i.removeHitRegion(n):console.log("unsupported function 'removeHitRegion'")};this.clearHitRegions=function(){l?i.clearHitRegions():console.log("unsupported function 'clearHitRegions'")};this.drawImage=function(n,t,r,u,f,e,o,s,h){typeof u=="undefined"?i.drawImage(n,t,r):typeof e=="undefined"?i.drawImage(n,t,r,u,f):i.drawImage(n,t,r,u,f,e,o,s,h)};this.createImageData=function(n,t){return i.createImageData(n,t)};this.cloneImageData=function(n){return i.cloneImageData(n)};this.getImageData=function(n,t,r,u){return n=n||0,t=t||0,r=r||i.canvas.width,u=u||i.canvas.height,i.getImageData(n,t,r,u)};this.putImageData=function(n,t,r){i.putImageData(n,t,r)};Object.defineProperty(this,"imageSmoothingEnabled",{get:function(){return i.mozImageSmoothingEnabled||i.webkitImageSmoothingEnabled||i.msImageSmoothingEnabled||i.imageSmoothingEnabled},set:function(n){i.mozImageSmoothingEnabled=n;i.webkitImageSmoothingEnabled=n;i.msImageSmoothingEnabled=n;i.imageSmoothingEnabled=n}});this.fillText=function(n,t,r,u){i.fillText(n,t,r,u)};this.strokeText=function(n,t,r,u){i.strokeText(n,t,r,u)};this.measureText=function(n){return i.measureText(n)};this.rotate=function(n){i.rotate(n)};this.translate=function(n,t){i.translate(n,t)};this.scale=function(n,t){i.scale(n,t)};this.transform=function(n,t,r,u,f,e){i.transform(n,t,r,u,f,e)};this.setTransform=function(n,t,r,u,f,e){i.setTransform(n,t,r,u,f,e)};this.resetTransform=function(){i.setTransform(1,0,0,1,0,0)};this.drawFocusIfNeeded=function(n){i.drawFocusIfNeeded(n)};a()}return t.prototype=Object.create(n.Cgx.Renderer.prototype),t.prototype.constructor=t,t}();n.Cgx.CanvasRenderer=t}(library),function(n){var t=function(){function t(t){function e(){f=r.canvas.getContext("webgl");r.globalAlpha=u.globalAlpha;r.globalCompositeOperation=u.globalCompositeOperation;r.fillStyle=u.fillStyle;r.strokeStyle=u.strokeStyle;r.shadowBlur=u.shadowBlur;r.shadowColor=u.shadowColor;r.shadowOffsetX=u.shadowOffsetX;r.shadowOffsetY=u.shadowOffsetY;r.lineCap=u.lineCap;r.lineJoin=u.lineJoin;r.lineWidth=u.lineWidth;r.miterLimit=u.miterLimit;r.lineDashOffset=u.lineDashOffset;r.fontSize=u.fontSize;r.fontFamily=u.fontFamily;r.textAlign=u.textAlign;r.textBaseline=u.textBaseline;r.direction=u.direction;r.imageSmoothingEnabled=u.imageSmoothingEnabled}function i(){throw new Error("abstract member call");}n.Cgx.Renderer.call(this,t);var r=this,f,u={globalAlpha:r.globalAlpha,globalCompositeOperation:r.globalCompositeOperation,fillStyle:r.fillStyle,strokeStyle:r.strokeStyle,shadowBlur:r.shadowBlur,shadowColor:r.shadowColor,shadowOffsetX:r.shadowOffsetX,shadowOffsetY:r.shadowOffsetY,lineCap:r.lineCap,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,lineDashOffset:r.lineDashOffset,fontSize:r.fontSize,fontFamily:r.fontFamily,textAlign:r.textAlign,textBaseline:r.textBaseline,direction:r.direction,imageSmoothingEnabled:r.imageSmoothingEnabled};Object.defineProperty(this,"name",{configurable:!1,value:"WebGLRenderer"});Object.defineProperty(this,"globalAlpha",{configurable:!0,value:1});Object.defineProperty(this,"globalCompositeOperation",{configurable:!0,value:"source-over"});Object.defineProperty(this,"fillStyle",{configurable:!0,value:"#000"});Object.defineProperty(this,"strokeStyle",{configurable:!0,value:"#000"});Object.defineProperty(this,"shadowBlur",{configurable:!0,value:0});Object.defineProperty(this,"shadowColor",{configurable:!0,value:"#000"});Object.defineProperty(this,"shadowOffsetX",{configurable:!0,value:0});Object.defineProperty(this,"shadowOffsetY",{configurable:!0,value:0});Object.defineProperty(this,"createLinearGradient",{configurable:!0,value:function(){i()}});Object.defineProperty(this,"createRadialGradient",{configurable:!0,value:function(){i()}});Object.defineProperty(this,"createPattern",{configurable:!0,value:function(){i()}});Object.defineProperty(this,"lineCap",{configurable:!0,value:"butt"});Object.defineProperty(this,"lineJoin",{configurable:!0,value:"miter"});Object.defineProperty(this,"lineWidth",{configurable:!0,value:1});Object.defineProperty(this,"miterLimit",{configurable:!0,value:10});Object.defineProperty(this,"getLineDash",{configurable:!0,value:function(){i()}});Object.defineProperty(this,"setLineDash",{configurable:!0,value:function(){i()}});Object.defineProperty(this,"lineDashOffset",{configurable:!0,value:0});Object.defineProperty(this,"fontSize",{configurable:!0,value:16});Object.defineProperty(this,"fontFamily",{configurable:!0,value:"Arial"});Object.defineProperty(this,"textAlign",{configurable:!0,value:"left"});Object.defineProperty(this,"textBaseline",{configurable:!0,value:"bottom"});Object.defineProperty(this,"direction",{configurable:!0,value:"rtl"});this.saveState=function(){i()};this.restoreState=function(){i()};this.toDataURL=function(){i()};this.clearRect=function(){i()};this.strokeRect=function(){i()};this.fillRect=function(){i()};this.stroke=function(){i()};this.fill=function(){i()};this.strokePath2D=function(){i()};this.fillPath2D=function(){i()};this.clip=function(){i()};this.rect=function(){i()};this.square=function(){i()};this.ellipse=function(){i()};this.circle=function(){i()};this.arc=function(){i()};this.beginPath=function(){i()};this.closePath=function(){i()};this.arcTo=function(){i()};this.moveTo=function(){i()};this.lineTo=function(){i()};this.bezierCurveTo=function(){i()};this.quadraticCurveTo=function(){i()};this.isPointInPath=function(){i()};this.isPointInPath2D=function(){i()};this.isPointInStroke=function(){i()};this.isPointInPath2DStroke=function(){i()};this.addHitRegion=function(){i()};this.removeHitRegion=function(){i()};this.clearHitRegions=function(){i()};this.drawImage=function(){i()};this.createImageData=function(){i()};this.cloneImageData=function(){i()};this.getImageData=function(){i()};this.putImageData=function(){i()};Object.defineProperty(this,"imageSmoothingEnabled",{configurable:!0,value:!0});this.fillText=function(){i()};this.strokeText=function(){i()};this.measureText=function(){i()};this.rotate=function(){i()};this.translate=function(){i()};this.scale=function(){i()};this.transform=function(){i()};this.setTransform=function(){i()};this.resetTransform=function(){i()};this.drawFocusIfNeeded=function(){i()};e()}return t.prototype=Object.create(n.Cgx.Renderer.prototype),t.prototype.constructor=t,t}();n.Cgx.WebGLRenderer=t}(library),function(n){var t=function(){function t(n){var t=[],i=n;this.push=function(n){var r=n.getMatrix();t.push(n);i.saveState();i.transform(r.m11,r.m12,r.m21,r.m22,r.offsetX,r.offsetY)};this.pop=function(){var n=t.push();return i.restoreState(),n};Object.defineProperty(this,"length",{get:function(){return t.length}})}function i(i){function k(){r=n.Cgx.Engine.createDefaultRenderer(b);s=new t(r)}function o(n,t,i){r.translate(t,i);var u;n&&(r.translate(n.originX,n.originY),u=n.getMatrix(),r.transform(u.m11,u.m12,u.m21,u.m22,u.offsetX,u.offsetY),r.translate(-n.originX,-n.originY));r.translate(-t,-i)}function a(t){var u,f,i;if(typeof t=="number")return"#"+t.toString(16);if(typeof t=="string")return t;if(t instanceof Array){if(t.length==3)return"rgb("+t.join(",")+")";if(t.length==4)return"rgba("+t.join(",")+")";throw new Error("invalid length");}else{if(t instanceof n.Cgx.GradientBrush){for(t instanceof n.Cgx.LinearGradientBrush?u=r.createLinearGradient(t.x0,t.y0,t.x1,t.y1):t instanceof n.Cgx.RadialGradientBrush&&(u=r.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)),f=t._getColorStops(),i=0;i<f.length;i++)u.addColorStop(f[i].offset,f[i].color);return u}if(t instanceof n.Cgx.PatternBrush)return r.createPattern(t.image,t.repetition)}return t}var v=2*Math.PI,w=this,b=i,r,s,e=4294967295,u=4278190080,f=1,y,h=16,p="Arial",c="left",l="bottom";this.getImageData=function(n,t,i,u){return r.getImageData(n,t,i,u)};this.setShadow=function(n){y=n};this.getShadow=function(){return y};this.setFillBrush=function(n){e=n;r.fillStyle=a(n)};this.getFillBrush=function(){return e};this.setStrokeBrush=function(n){u=n;r.strokeStyle=a(n)};this.getStrokeBrush=function(){return u};this.setStrokeWidth=function(n){f=n;r.lineWidth=n};this.getStrokeWidth=function(){return f};this.setFontFamily=function(n){p=n;r.fontFamily=n};this.getFontFamily=function(){return p};this.setFontSize=function(n){h=n;r.fontSize=h};this.getFontSize=function(){return h};this.setTextAlign=function(n){c=n;r.textAlign=c};this.getTextAlign=function(){return c};this.setTextBaseline=function(n){l=n;r.textBaseline=l};this.getTextBaseline=function(){return l};this.measureText=function(n){return r.measureText(n)};this.clear=function(n){w.clearRect(0,0,r.canvas.width,r.canvas.height,n)};this.clearRect=function(n,t,i,u,f){var e=null;typeof f!="undefined"&&f!==null&&(e=a(f));r.clearRect(0,0,r.canvas.width,r.canvas.height,e)};this.drawArc=function(n,t,i,e,s,h,c){u&&f!=0&&(r.saveState(),o(c,n,t),r.beginPath(),r.arc(n,t,i,e,s,!!h),r.stroke(),r.restoreState())};this.drawLine=function(n,t,i,e,s){u&&f!=0&&(r.saveState(),o(s,n,t),r.beginPath(),r.moveTo(n,t),r.lineTo(i,e),r.stroke(),r.restoreState())};this.drawRoundedRectangle=function(n,t,i,s,h,c){var l,a;if(e||u&&f!=0){var v=0,y=0,p=0,w=0;h instanceof Array?(v=h[0],y=h[0],p=h[0],w=h[0]):typeof h=="number"?v=y=p=w=h:typeof h=="object"&&(v=h.topLeft,y=h.topRight,p=h.bottomLeft,w=h.bottomRight);r.saveState();o(c,n,t);r.beginPath();l=n;a=t;v==0?r.moveTo(l,a):r.moveTo(l+v,a);l=n+i;y==0?r.lineTo(l,a):(r.lineTo(l-y,a),r.arcTo(l,a,l,a+y,y));a=t+s;w==0?r.lineTo(l,a):(r.lineTo(l,a-w),r.arcTo(l,a,l-w,a,w));l=n;p==0?r.lineTo(l,a):(r.lineTo(l+p,a),r.arcTo(l,a,l,a-p,p));a=t;v==0?r.lineTo(l,a):(r.lineTo(l,a+v),r.arcTo(l,a,l+y,a,v));r.closePath();e&&r.fill();u&&f>0&&r.stroke();r.restoreState()}};this.drawSquare=function(n,t,i,s){(e||u&&f!=0)&&(r.saveState(),o(s,n,t),r.beginPath(),r.square(n,t,i),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawRectangle=function(n,t,i,s,h){(e||u&&f!=0)&&(r.saveState(),o(h,n,t),r.beginPath(),r.rect(n,t,i,s),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawCircle=function(n,t,i,s){(e||u&&f!=0)&&(r.saveState(),o(s,n,t),r.beginPath(),r.circle(n,t,i),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawEllipse=function(n,t,i,s,h){(e||u&&f!=0)&&(r.saveState(),o(h,n,t),r.beginPath(),r.ellipse(n,t,i,s),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawPolyline=function(n,t){var e,s,i,h;if(u&&f!=0){for(e=n[0].x,s=n[0].y,r.saveState(),o(t,e,s),r.beginPath(),r.moveTo(e,s),i=1;i<n.length;i++)h=n[i],r.lineTo(h.x,h.y);r.stroke();r.restoreState()}};this.drawPolygon=function(n,t){var s,h,i,c;if(e||u&&f!=0){for(s=n[0].x,h=n[0].y,r.saveState(),o(t,s,h),r.beginPath(),r.moveTo(s,h),i=1;i<n.length;i++)c=n[i],r.lineTo(c.x,c.y);r.closePath();e&&r.fill();u&&f>0&&r.stroke();r.restoreState()}};this.drawTriangle=function(n,t,i,s){(e||u&&f!=0)&&(r.saveState(),o(s,n.x,n.y),r.beginPath(),r.moveTo(n.x,n.y),r.lineTo(t.x,t.y),r.lineTo(i.x,i.y),r.closePath(),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawQuad=function(n,t,i,s,h){(e||u&&f!=0)&&(r.saveState(),o(h,n.x,n.y),r.beginPath(),r.moveTo(n.x,n.y),r.lineTo(t.x,t.y),r.lineTo(i.x,i.y),r.lineTo(s.x,s.y),r.closePath(),e&&r.fill(),u&&f>0&&r.stroke(),r.restoreState())};this.drawCubicCurve=function(n,t,i,s,h){var l,a,c;if(e||u&&f!=0){for(l=n[0].x,a=n[0].y,r.saveState(),o(h,l,a),n.push(n[0]),r.beginPath(),r.moveTo(l,a),c=0;c<t.length;c++){var v=t[c],y=i[c],p=n[c+1];r.bezierCurveTo(v.x,v.y,y.x,y.y,p.x,p.y)}s&&r.closePath();e&&r.fill();u&&f>0&&r.stroke();r.restoreState()}};this.drawQuadraticCurve=function(n,t,i,s){var c,l,h,a,v;if(e||u&&f!=0){for(c=n[0].x,l=n[0].y,r.saveState(),o(s,c,l),n.push(n[0]),r.beginPath(),r.moveTo(c,l),h=0;h<t.length;h++)a=t[h],v=n[h+1],r.quadraticCurveTo(a.x,a.y,v.x,v.y);i&&r.closePath();e&&r.fill();u&&f>0&&r.stroke();r.restoreState()}};this.drawImage=function(n,t,i,e,s,h){(n||u&&f!=0)&&(r.saveState(),o(h,t,i),r.drawImage(n,t,i,e,s),u&&f>0&&(r.beginPath(),r.rect(t,i,e,s),r.stroke()),r.restoreState())};this.drawText=function(n,t,i,s){(e||u&&f!=0)&&(r.saveState(),o(s,n,t),e&&r.fillText(i,n,t),u&&f>0&&r.strokeText(i,n,t),r.restoreState())};this.drawPath2D=function(n,t,i,s,h){(e||u&&f!=0)&&(s=s||null,r.saveState(),o(h,n,t),r.translate(n,t),e&&r.fillPath2D(i,s),u&&f>0&&r.strokePath2D(i),r.restoreState())};this.drawPie=function(n,t,i,s,h,c,l){if(e||u&&f!=0){var a=h-s;if(a>=v){this.drawCircle(n,t,i,l);return}r.saveState();o(l,n,t);r.beginPath();r.moveTo(n,t);r.arc(n,t,i,s,h,!!c);r.closePath();e&&r.fill();u&&f>0&&r.stroke();r.restoreState()}};this.drawDonut=function(n,t,i,s,h,c,l,a){var p,y,w,b;if(e||u&&f!=0){if(p=!0,y=!1,i>s&&(w=s,s=i,i=w),i<=0&&(p=!1),b=c-h,b>=v&&(y=!0),!p){if(y){this.drawCircle(n,t,s,a);return}this.drawPie(n,t,s,h,c,a);return}r.saveState();o(a,n,t);r.beginPath();y?(r.circle(n,t,s),r.circle(n,t,i)):(r.arc(n,t,s,h,c,!!l),r.arc(n,t,i,c,h,!l),r.closePath());e&&r.fill("evenodd");u&&f>0&&r.stroke();r.restoreState()}};this.drawSymbol=function(n,t,i){(r.saveState(),i||u&&f!=0)&&(r.drawImage(i,n,t,i.width,i.height),r.restoreState())};Object.defineProperty(this,"pushTransform",{value:function(n){s.push(n)}});Object.defineProperty(this,"popTransform",{value:function(){s.pop()}});k()}return i}();n.Cgx.CoreGraphics=t}(library),function(n){var t=function(){function t(){function f(){i.registerRenderer("CanvasRenderer",n.Cgx.CanvasRenderer);i.defaultRenderer="CanvasRenderer"}var i=this,r={},t,u={};Object.defineProperty(this,"defaultRenderer",{get:function(){return t},set:function(n){typeof n=="string"&&t!=n&&(t=n)}});Object.defineProperty(this,"vars",{get:function(){return u}});Object.defineProperty(this,"registerRenderer",{value:function(n,t){r[n]=t}});Object.defineProperty(this,"loadSettings",{value:function(n){if("defaultRenderer"in n&&(_defaultRenderer=n.defaultRenderer),"vars"in n)for(var t in n.vars)n.vars.hasOwnProperty(t)&&(u[t]=n.vars[t])}});Object.defineProperty(this,"createDefaultRenderer",{value:function(n){return i.createRenderer(n,t)}});Object.defineProperty(this,"createRenderer",{value:function(n,i){i in r||(console.log("invalid renderer name "+i),i=t);var u=r[i];return new u(n)}});Object.defineProperty(this,"createCanvasBuffer",{value:function(n,t){var i=window.document.createElement("canvas");return typeof n=="number"&&(i.width=n),typeof t=="number"&&(i.height=t),i}});Object.defineProperty(this,"createBufferedGraphics",{value:function(t,r){var u=i.createCanvasBuffer(t,r);return new n.Cgx.CoreGraphics(u)}});f()}return new t}();n.Cgx.Engine=t}(library),function(n){var t=function(){var n={};return Object.defineProperty(n,"getEasingFunctionOrDefault",{value:function(t){return t in n?n[t]:n.linear}}),Object.defineProperty(n,"linear",{value:function(n){return n}}),Object.defineProperty(n,"quadraticIn",{value:function(n){return Math.pow(n,2)}}),Object.defineProperty(n,"quadraticOut",{value:function(n){return 1-Math.pow(1-n,2)}}),Object.defineProperty(n,"quadraticInOut",{value:function(n){return n<.5?(n*=2,Math.pow(n,2)*.5):(n=(n-.5)*2,(1-Math.pow(1-n,2))*.5+.5)}}),Object.defineProperty(n,"cubicIn",{value:function(n){return Math.pow(n,3)}}),Object.defineProperty(n,"cubicOut",{value:function(n){return 1-Math.pow(1-n,3)}}),Object.defineProperty(n,"cubicInOut",{value:function(n){return n<.5?(n*=2,Math.pow(n,3)*.5):(n=(n-.5)*2,(1-Math.pow(1-n,3))*.5+.5)}}),Object.defineProperty(n,"quarticIn",{value:function(n){return Math.pow(n,4)}}),Object.defineProperty(n,"quarticOut",{value:function(n){return 1-Math.pow(1-n,4)}}),Object.defineProperty(n,"quarticInOut",{value:function(n){return n<.5?(n*=2,Math.pow(n,4)*.5):(n=(n-.5)*2,(1-Math.pow(1-n,4))*.5+.5)}}),Object.defineProperty(n,"quinticIn",{value:function(n){return Math.pow(n,5)}}),Object.defineProperty(n,"quinticOut",{value:function(n){return 1-Math.pow(1-n,5)}}),Object.defineProperty(n,"quinticInOut",{value:function(n){return n<.5?(n*=2,Math.pow(n,5)*.5):(n=(n-.5)*2,(1-Math.pow(1-n,5))*.5+.5)}}),Object.defineProperty(n,"sineIn",{value:function(n){return-Math.cos(n*Math.PI*.5)+1}}),Object.defineProperty(n,"sineOut",{value:function(n){return Math.sin(n*Math.PI*.5)}}),Object.defineProperty(n,"sineInOut",{value:function(n){return-.5*(Math.cos(n*Math.PI)-1)}}),Object.defineProperty(n,"expoIn",{value:function(n){return n==0?0:Math.pow(2,10*(n-1))}}),Object.defineProperty(n,"expoOut",{value:function(n){return n==1?1:-Math.pow(2,-10*n)+1}}),Object.defineProperty(n,"expoInOut",{value:function(n){return n==0?0:n==1?1:(n=n/.5,n<1)?Math.pow(2,10*(n-1))*.5:(-Math.pow(2,-10*--n)+2)*.5}}),Object.defineProperty(n,"bounceIn",{value:function(t){return t=1-t,1-n.bounceOut(t)}}),Object.defineProperty(n,"bounceOut",{value:function(n){return n<.3637?7.5625*n*n:n<.7272?7.5625*(n-=.5454)*n+.75:n<.909?7.5625*(n-=.8181)*n+.9375:7.5625*(n-=.9545)*n+.984375}}),Object.defineProperty(n,"bounceInOut",{value:function(t){return t<.5?n.bounceIn(t*2)*.5:n.bounceOut(t*2-1)*.5+.5}}),Object.defineProperty(n,"backIn",{value:function(n){var t=1.70158;return n*n*((t+1)*n-t)}}),Object.defineProperty(n,"backOut",{value:function(n){var t=1.70158;return n=n-1,n*n*((t+1)*n+t)+1}}),Object.defineProperty(n,"backInOut",{value:function(n){var t=1.70158;return n=n/.5,n<1?n*n*(((t*=1.525)+1)*n-t)*.5:((n-=2)*n*(((t*=1.525)+1)*n+t)+2)*.5}}),Object.defineProperty(n,"elasticIn",{value:function(n){var t,i,r;return n==0?0:n==1?1:(t||(t=.3),!i||i<Math.abs(c)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(c/i),-(i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)))}}),Object.defineProperty(n,"elasticOut",{value:function(n){var t,i,r;return n==0?0:n==1?1:(t||(t=.3),!i||i<Math.abs(c)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(c/i),i*Math.pow(2,-10*n)*Math.sin((n*1-r)*2*Math.PI/t)+1)}}),Object.defineProperty(n,"elasticInOut",{value:function(n){var t,i,r;return n==0?0:(n=n/.5,n==2)?1:(t||(t=.3*1.5),!i||i<Math.abs(c)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(c/i),n<1)?i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)*-.5:i*Math.pow(2,-10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)*.5+1}}),Object.defineProperty(n,"circularIn",{value:function(n){return-(Math.sqrt(1-n*n)-1)}}),Object.defineProperty(n,"circularOut",{value:function(n){return n=n-1,Math.sqrt(1-n*n)}}),Object.defineProperty(n,"circularInOut",{value:function(n){return(n=n/.5,n<1)?-(Math.sqrt(1-n*n)-1)*.5:(Math.sqrt(1-(n-=2)*n)+1)*.5}}),n}(),i=function(){function n(n,i,r,u,f,e){function ut(){c.reset()}function ft(){if(typeof o!=typeof s)throw new Error("invalid type, startValue, endValue");if(b=!1,w=!1,typeof o=="object"&&(o instanceof Array?w=!0:b=!0),w){if(o.length!=s.length)throw new Error("invalid array length, startValue, endValue");h=s.map(function(n,t){return n-o[t]})}else if(b){h={};for(var n in s)s.hasOwnProperty(n)&&(h[n]=s[n]-o[n])}else h=s-o}var c=this,o=n,s=i,a=r,p="linear",nt=u,tt=f,it=e,rt=o,v,y=0,k=0,l=!1,d=!1,w=!1,b=!1,h=null,g=!0;Object.defineProperty(this,"startValue",{get:function(){return o},set:function(n){o!=n&&(o=n,c.reset(),g=!0)}});Object.defineProperty(this,"endValue",{get:function(){return s},set:function(n){s!=n&&(s=n,c.reset(),g=!0)}});Object.defineProperty(this,"totalTime",{get:function(){return a},set:function(n){a!=n&&(c.reset(),a=n)}});Object.defineProperty(this,"ease",{get:function(){return p},set:function(n){p!=n&&(p=n,nt=t.getEasingFunctionOrDefault(p))}});Object.defineProperty(this,"isCompleted",{get:function(){return d}});Object.defineProperty(this,"elapsedTime",{get:function(){return y}});Object.defineProperty(this,"frameIndex",{get:function(){return k}});Object.defineProperty(this,"provideValue",{value:function(){var r=y/a,t=nt(r),i,n;if(w)return h.map(function(n,i){return o[i]+t*n});if(b){i={};for(n in h)h.hasOwnProperty(n)&&(i[n]=o[n]+t*h[n]);return i}return o+t*h}});Object.defineProperty(this,"notifyFrame",{value:function(n){if(l){if(v||(v=n),y+=n-v,y>a){c.stop();d=!0;it();return}v=n;k++;tt(c.provideValue())}}});Object.defineProperty(this,"start",{value:function(){l||((!h||g)&&ft(),l=!0)}});Object.defineProperty(this,"stop",{value:function(){l&&(l=!1)}});Object.defineProperty(this,"restart",{value:function(){c.reset();c.start()}});Object.defineProperty(this,"reset",{value:function(){l&&c.stop();rt=o;v=null;y=0;k=0;d=!1}});ut()}return n}(),r=function(){function n(){var f=this,r=!1,n,t=0,u=0,i=0;Object.defineProperty(this,"fps",{get:function(){return t}});Object.defineProperty(this,"sampleInterval",{writable:!0,value:500});Object.defineProperty(this,"notifyFrame",{value:function(e){if(r){n||(n=e);var o=e-n;n=e;f.sampleInterval<=0?t=1e3/o:(i+=o,u++,i>=f.sampleInterval&&(t=1e3/i*u,i=0,u=0))}else t=0}});Object.defineProperty(this,"start",{value:function(){r=!0}});Object.defineProperty(this,"stop",{set:function(){r=!1}})}return n}(),u=function(){function n(n){function d(){if(typeof v!="function")throw new Error("missing loop callback");s=new r;k();f=Date.now();requestAnimationFrame(w)}function w(n){if(l){f||(f=n);var t=n-f;t<0&&(t=0);f=n;h>0?(y+=t,y>=h&&(y-=h,o.deltaTime=f-p,p=f,v(o),s.notifyFrame(n),b(n))):(o.deltaTime=t,v(o),s.notifyFrame(n),b(n))}requestAnimationFrame(w)}function b(n){u.forEach(t=>{if(t.notifyFrame(n),t.isCompleted){var i=c.indexOf(t);i>=0&&(c.splice(i,1),u.splice(u.indexOf(t),1))}})}function k(){h=e<=0||!Number.isFinite(e)?0:1e3/e}var a=this,v=n,e=0,l=!1,o={instance:a,data:null,deltaTime:0},f,y=0,h,p=0,s,u=[],c=[];Object.defineProperty(this,"currentFps",{get:function(){return s.fps}});Object.defineProperty(this,"maxFps",{get:function(){return e},set:function(n){e!=n&&(e=n,k())}});Object.defineProperty(this,"data",{get:function(){return o.data},set:function(n){o.data=n}});Object.defineProperty(this,"isRunning",{get:function(){return l}});Object.defineProperty(this,"start",{value:function(){l=!0;s.start()}});Object.defineProperty(this,"stop",{set:function(){l=!1;s.stop()}});Object.defineProperty(this,"animate",{value:function(n,t,i,r,u,f){var e=a.createAnimator(n,t,i,r,u,f);a.addAnimator(e,!0);e.start()}});Object.defineProperty(this,"createAnimator",{value:function(n,r,u,f,e,o){return new i(n,r,u,t.getEasingFunctionOrDefault(f),e,o)}});Object.defineProperty(this,"addAnimator",{value:function(n,t){if(u.indexOf(n)===-1){var i=u.push(n);return t&&c.push(n),u.length-1}return-1}});Object.defineProperty(this,"removeAnimator",{value:function(n){var t=c.indexOf(n);return(t>=0&&c.splice(t,1),t=u.indexOf(n),t>=0)?(u.splice(t,1),!0):!1}});d()}return n}();n.Cgx.RenderLoop=u}(library),function(n){var i=function(){function n(n){function s(){return{autoRemoveOnFire:!1}}function c(n,t,r){var s=i.indexOf(n.toLowerCase()),h,c,u,e;if(s!==-1)for(h=f[s],c=h[t],u=0;u<o.length;u++)e=o[u],r.hasOwnProperty(e)&&(c[e]=r[e])}var h=this,e=n,i=[],u=[],o=["autoRemoveOnFire"],f=[],r=[];Object.defineProperty(this,"attach",{value:function(n,t,r){var a;if(r===void 0&&(r=null),typeof t=="function"){var h=i.indexOf(n.toLowerCase()),e=null,o=null,l=-1;h===-1?(e=[t],u.push(e),o=[s()],f.push(o),l=0,i.push(n.toLowerCase()),h=i.length-1):(e=u[h],o=f[h],a=e.indexOf(t),a===-1?(e.push(t),o.push(s()),l=o.length-1):l=a);r&&c(n,l,r)}}});Object.defineProperty(this,"detach",{value:function(n,t){var r,o,e,s;typeof t=="function"&&(r=i.indexOf(n.toLowerCase()),r!==-1)&&(o=u[r],e=o.indexOf(t),e!==-1)&&(s=f[r],o.splice(e,1),s.splice(e,1))}});Object.defineProperty(this,"raise",{value:function(n,t){var s,c,h,l,o;if((t=t||{},s=i.indexOf(n.toLowerCase()),s!==-1)&&(c=r.indexOf(n.toLowerCase()),c===-1&&r.indexOf("*")===-1))for(h=u[s],l=f[s],o=0;o<h.length;o++){var a=h[o],v=l[o],y=!1;Object.keys(v).indexOf("autoRemoveOnFire")!=-1&&(y=!!v.autoRemoveOnFire);a(e,t);y&&this.detach(n,a)}}});Object.defineProperty(this,"getHandlers",{value:function(n){var t=i.indexOf(n.toLowerCase());return t===-1?null:u[t].slice(0)}});Object.defineProperty(this,"getHandlersCount",{value:function(n){var t=i.indexOf(n.toLowerCase());return t===-1?0:u[t].length}});Object.defineProperty(this,"hasHandlers",{value:function(n){return i.indexOf(n.toLowerCase())>=0}});Object.defineProperty(this,"contains",{value:function(n,t){var r=i.indexOf(n.toLowerCase()),f;return r===-1?!1:(f=u[r],f.indexOf(t)!==-1)}});Object.defineProperty(this,"stop",{value:function(n){if(typeof n=="undefined")r=["*"];else if(typeof n=="string"){var t=r.indexOf(n.toLowerCase());if(t!=-1)return;r.push(n.toLowerCase())}}});Object.defineProperty(this,"resume",{value:function(n){if(typeof n=="undefined")r=[];else if(typeof n=="string"){var t=r.indexOf(n.toLowerCase());if(t==-1)return;r.splice(t,1)}}});Object.defineProperty(this,"create",{value:function(n){var i=new t(h,n),r={enumerable:!0,value:i};return Object.defineProperty(e,n,r),i}})}return n}(),t;n.Extra.Events=i;t=function(){function n(n,t){var i=n,r=t;Object.defineProperty(this,"addHandler",{value:function(n,t){i.attach(r,n,t)}});Object.defineProperty(this,"removeHandler",{value:function(n){i.detach(r,n)}});Object.defineProperty(this,"containsHandler",{value:function(n){return i.contains(r,n)}});Object.defineProperty(this,"stop",{value:function(){i.stop(r)}});Object.defineProperty(this,"resume",{value:function(){i.resume(r)}})}return n}();n.Extra.EventGroup=t}(library),function(n){var t=function(){function t(){function u(n,r){return n<0&&(n=0),n>=t.length&&(n=t.length),n===t.length?t.push(r):t.splice(n,0,[r]),n=t.length-1,i.raise("onItemsAdded",{index:n,items:[r]}),n}function f(n,r){var u;if(n<0&&(n=0),n>=t.length&&(n=t.length),n===t.length)for(u=0;u<r.length;u++)t.push(r[u]);else t.splice(n,0,[r]);return t.length>n&&i.raise("onItemsAdded",{index:n,items:r}),n}var r=this,t=[],i=new n.Extra.Events(this);Object.defineProperty(this,"length",{get:function(){return t.length}});Object.defineProperty(this,"forEach",{value:function(n){for(var i=0;i<t.length;i++)n(t[i],i,r)}});Object.defineProperty(this,"add",{value:function(n){return u(t.length,n)}});Object.defineProperty(this,"addRange",{value:function(n){return f(t.length,n)}});Object.defineProperty(this,"at",{value:function(n){return t[n]}});Object.defineProperty(this,"clear",{value:function(){t=[];i.raise("onCollectionCleared",{})}});Object.defineProperty(this,"contains",{value:function(n,i){if(typeof i=="function"){for(var r=0;r<t.length;r++)if(i(t[r])===n)return!0;return!1}return t.indexOf(n)>=0}});Object.defineProperty(this,"indexOf",{value:function(n,i){var u,r;if(typeof i=="function"){for(u=-1,r=0;r<t.length;r++)if(i(t[r])===n){u=r;break}return u}return t.indexOf(n)}});Object.defineProperty(this,"insert",{value:u});Object.defineProperty(this,"insertRange",{value:f});Object.defineProperty(this,"remove",{value:function(n,u){var f=r.indexOf(n,u);return f===-1?!1:(t.splice(f,1),i.raise("onItemsRemoved",{index:f,items:[n]}),!0)}});Object.defineProperty(this,"removeAt",{value:function(n){if(n<0||n>=t.length)return null;var r=t[n];return t.splice(n,1),i.raise("onItemsRemoved",{index:n,items:[r]}),r}});Object.defineProperty(this,"removeItems",{value:function(n){for(var o,u=-1,f=[],e=0;e<n.length;e++)(u=r.indexOf(n[e]),u!==-1)&&(o=t.splice(u,1),f.push(o));return i.raise("onItemsRemoved",{index:u,items:f}),f}});Object.defineProperty(this,"removeRange",{value:function(n,r){(typeof n!="number"||n<0)&&(n=0);r||(r=t.length-n);var u=t.splice(n,r);return i.raise("onItemsRemoved",{index:n,items:u}),u}});Object.defineProperty(this,"removeAll",{value:function(){var n=t.splice(0,t.length);return i.raise("onCollectionCleared",{}),n}});Object.defineProperty(this,"toArray",{value:function(){return t.slice(0)}});Object.defineProperty(this,"onItemsAdded",{value:new n.Extra.EventGroup(i,"onItemsAdded")});Object.defineProperty(this,"onItemsRemoved",{value:new n.Extra.EventGroup(i,"onItemsRemoved")});Object.defineProperty(this,"onCollectionCleared",{value:new n.Extra.EventGroup(i,"onCollectionCleared")})}return t}();n.Extra.Collection=t}(library),function(n){var t=function(){function t(t){function a(){u=l(t);i=new XMLHttpRequest;i.addEventListener("progress",v);i.addEventListener("load",y,!1);i.addEventListener("error",p,!1);i.addEventListener("abort",w,!1)}function v(n){if(n.lengthComputable){var t={loaded:n.loaded,total:n.total,percentage:n.loaded/n.total*100};r.raise("onProgress",t)}}function y(){var n={result:i.response,resultType:i.responseType,rawResult:i.responseText};r.raise("onSuccess",n)}function p(){var n={status:i.statusText,code:i.status};r.raise("onError",n)}function w(){r.raise("onAbort",{})}function b(n,t){i.setRequestHeader(n,t)}function k(n,t){if(h)throw new Error("HttpClient is busy");var r=u+n;h=!0;i.open(f,r,!0);i.timeout=s;i.withCredentials=c;i.overrideMimeType(e);i.responseType=o;i.send(t)}function d(){h&&i.abort()}function l(n){return typeof n!="string"?"":n.length==0?"":(n.substr(n.length-1)!=="/"&&(n+="/"),n)}var g=this,r=new n.Extra.Events(this),u,i,f="GET",e="text/plain;charset=UTF-8",o="text",s=0,h=!1,c=!1;Object.defineProperty(this,"baseUrl",{get:function(){return u},set:function(n){typeof n=="string"&&(n=l(n),u!==n&&(u=n))}});Object.defineProperty(this,"isBusy",{get:function(){return h}});Object.defineProperty(this,"method",{get:function(){return f},set:function(n){typeof n=="string"&&f!==n&&(f=n)}});Object.defineProperty(this,"mimeType",{get:function(){return e},set:function(n){typeof n=="string"&&e!==n&&(e=n)}});Object.defineProperty(this,"responseType",{get:function(){return o},set:function(n){typeof n=="string"&&o!==n&&(o=n)}});Object.defineProperty(this,"timeout",{get:function(){return s},set:function(n){typeof n=="number"&&s!==n&&(s=n)}});Object.defineProperty(this,"useCredentials",{get:function(){return c},set:function(n){n=!!n;c!==n&&(c=n)}});Object.defineProperty(this,"setRequestHeader",{value:b});Object.defineProperty(this,"abortRequest",{value:d});Object.defineProperty(this,"sendRequest",{value:k});r.create("onProgress");r.create("onSuccess");r.create("onError");r.create("onAbort");a()}function i(n,i,r,u,f){var e=new t;e.method="GET";e.responseType=i;e.onSuccess.addHandler(r);typeof u=="function"&&e.onError.addHandler(u);typeof f=="function"&&e.onAbort.addHandler(f);e.sendRequest(n)}return Object.defineProperty(t,"downloadString",{value:function(n,t,r,u){i(n,"text",t,r,u)}}),Object.defineProperty(t,"downloadJSON",{value:function(n,t,r,u){i(n,"json",t,r,u)}}),t}();n.Extra.HttpClient=t}(library),function(n){var t=function(){function t(n,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?n+(t-n)*6*i:i<1/2?t:i<2/3?n+(t-n)*(2/3-i)*6:n}var i=Date.now(),n={};return Object.defineProperty(n,"createUUID",{value:function(n){for(var t=(new Date).getTime(),r;i===t;)t=(new Date).getTime();return i=t,r="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx",n&&(r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"),r.replace(/[xy]/g,function(n){var i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?i:i&3|8).toString(16)})}}),Object.defineProperty(n,"createCanvasColorOrBrush",{value:function(n,t){if(typeof t=="number")return"#"+t.toString(16);if(typeof t=="string")return t;if(t instanceof Array){if(t.length==3)return"rgb("+t.join(",")+")";if(t.length==4)return"rgba("+t.join(",")+")";throw new Error("invalid length");}else{if(t)return n.getContext("2d").createLinearGradient(t.x0,t.y0,t.x1,t.y1);if(t)return n.getContext("2d").createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1);if(t)return n.getContext("2d").createPattern(t.image,t.repetition)}}}),Object.defineProperty(n,"hslToRgb",{value:function(n,i,r){var e,o,s,u,f;return i==0?e=o=s=r:(u=r<.5?r*(1+i):r+i-r*i,f=2*r-u,e=t(f,u,n+1/3),o=t(f,u,n),s=t(f,u,n-1/3)),[Math.round(e*255),Math.round(o*255),Math.round(s*255)]}}),n}();n.Vgx.Utils=t}(library),function(n){var t=function(){var t={};return Object.defineProperty(t,"areClose",{value:function(n,t){if(n==t)return!0;var i=(Math.abs(n)+Math.abs(t)+10)*22204460492503131e-32,r=n-t;return-i<r&&i>r}}),Object.defineProperty(t,"isZero",{value:function(n){return Math.abs(n)<22204460492503131e-31}}),Object.defineProperty(t,"isOne",{value:function(n){return Math.abs(n-1)<22204460492503131e-31}}),Object.defineProperty(t,"interpolatePointWithCubicCurves",{value:function(n,t){var w,i,c,l,a;if(n.length<3)return[];for(w=[],t&&n.push(n[0]),i=0;i<n.length-1;i++){var r=n[i].x,u=n[i].y,f=n[i+1].x,e=n[i+1].y,o,s,h;i==0?t?(h=n[n.length-2],o=h.x,s=h.y):(h=n[i],o=h.x,s=h.y):(o=n[i-1].x,s=n[i-1].y);i==n.length-2?t?(a=n[1],c=a.x,l=a.y):(a=n[i+1],c=a.x,l=a.y):(c=n[i+2].x,l=n[i+2].y);var tt=(o+r)/2,it=(s+u)/2,v=(r+f)/2,y=(u+e)/2,et=(f+c)/2,ot=(e+l)/2,rt=Math.sqrt((r-o)*(r-o)+(u-s)*(u-s)),b=Math.sqrt((f-r)*(f-r)+(e-u)*(e-u)),st=Math.sqrt((c-f)*(c-f)+(l-e)*(l-e)),ut=rt/(rt+b),ft=b/(b+st),k=tt+(v-tt)*ut,d=it+(y-it)*ut,g=v+(et-v)*ft,nt=y+(ot-y)*ft,p=.8,ht=k+(v-k)*p+r-k,ct=d+(y-d)*p+u-d,lt=g+(v-g)*p+f-g,at=nt+(y-nt)*p+e-nt;w.push({startPoint:{x:r,y:u},endPoint:{x:f,y:e},firstControlPoint:i==0&&!t?{x:r,y:u}:{x:ht,y:ct},secondControlPoint:i==n.length-2&&!t?{x:f,y:e}:{x:lt,y:at}})}return w}}),Object.defineProperty(t,"getPointsBounds",{value:function(t){var f,i;if(t.length==0)return n.Vgx.Rect.empty;if(t.length==1)return new n.Vgx.Rect(t[0].x,t[0].y,0,0);var r=Number.MAX_VALUE,u=Number.MAX_VALUE,e=Number.MIN_VALUE,o=Number.MIN_VALUE;for(f=0;f<t.length;f++)i=t[f],r=Math.min(r,i.x),u=Math.min(u,i.y),e=Math.max(e,i.x),o=Math.max(o,i.y);return new n.Vgx.Rect(r,u,e-r,o-u)}}),t}();n.Vgx.MathUtils=t}(library),function(n){var t=function(){function t(){function e(n){o.raise("onPropertyChanged",{propertyName:n})}var o=new n.Extra.Events(this),i=0,r="rgba(0,0,0,0)",u=0,f=0;Object.defineProperty(this,"clone",{value:function(){var n=new t;return n.blur=i,n.color=r,n.offsetX=u,n.offsetY=f,n}});Object.defineProperty(this,"blur",{get:function(){return i},set:function(n){typeof n=="number"&&i!=n&&(i=n,e("blur"))}});Object.defineProperty(this,"color",{get:function(){return r},set:function(n){(typeof n=="number"||typeof n=="string")&&r!=n&&(r=n,e("color"))}});Object.defineProperty(this,"offsetX",{get:function(){return u},set:function(n){typeof n=="number"&&u!=n&&(u=n,e("offsetX"))}});Object.defineProperty(this,"offsetY",{get:function(){return f},set:function(n){typeof n=="number"&&f!=n&&(f=n,e("offsetY"))}});Object.defineProperty(this,"isDefault",{get:function(){return i==0&&r=="rgba(0,0,0,0)"&&u==0&&f==0?!0:!1}});o.create("onPropertyChanged")}return t}();n.Vgx.Shadow=t}(library),function(n){var t=function(){function n(n,t){var i=this;Object.defineProperty(this,"x",{value:n||0,writable:!0});Object.defineProperty(this,"y",{value:t||0,writable:!0});Object.defineProperty(this,"add",{value:function(n,t){if(arguments.length===1){var r=arguments[0];n=r.x;t=r.y}i.x+=n;i.y+=t}})}return Object.defineProperty(n,"sumPoints",{value:function(t,i){var r=new n(p.x,p.y);return r.add(i),r}}),Object.defineProperty(n,"sumValues",{value:function(t,i,r){var u=new n(t.x,t.y);return u.add(i,r),u}}),Object.defineProperty(n,"empty",{value:new n(0,0)}),Object.defineProperty(n,"invalid",{value:new n(Number.NaN,Number.NaN)}),n}();n.Vgx.Point2D=t}(library),function(n){var t=function(){function n(t,i,r,u){function e(t){var i,r,u,e;n.isEmpty(t)||(i=Math.min(f.x,t.x),r=Math.min(f.y,t.y),t.width==Number.POSITIVE_INFINITY||f.width==Number.POSITIVE_INFINITY?f.width=Number.POSITIVE_INFINITY:(u=f.width==Number.NEGATIVE_INFINITY||f.x==Number.POSITIVE_INFINITY?t.x+t.width:Math.max(f.x+f.width,t.x+t.width),f.width=Math.max(u-i,0)),t.height==Number.POSITIVE_INFINITY||f.height==Number.POSITIVE_INFINITY?f.height=Number.POSITIVE_INFINITY:(e=f.height==Number.NEGATIVE_INFINITY||f.y==Number.POSITIVE_INFINITY?t.y+t.height:Math.max(f.y+f.height,t.y+t.height),f.height=Math.max(e-r,0)),f.x=i,f.y=r)}var f=this;Object.defineProperty(this,"x",{value:t||0,writable:!0});Object.defineProperty(this,"y",{value:i||0,writable:!0});Object.defineProperty(this,"width",{value:r||0,writable:!0});Object.defineProperty(this,"height",{value:u||0,writable:!0});Object.defineProperty(this,"union",{value:e})}function t(){return new n(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY)}function i(){return new n(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}return Object.defineProperty(n,"empty",{get:t}),Object.defineProperty(n,"invalid",{get:i}),Object.defineProperty(n,"isEmpty",{value:function(n){return!Number.isFinite(n.x)||!Number.isFinite(n.y)?!0:n.width<=0&&n.height<=0}}),n}();n.Vgx.Rect=t}(library),function(n){var t=function(){function t(t){n.Cgx.Transform.call(this);var r=this,i=t;Object.defineProperty(this,"entity",{get:function(){return i}});Object.defineProperty(this,"_propertyChanged",{enumerable:!1,configurable:!1,value:function(){i.geometryDirty=!0}})}return t.prototype=Object.create(n.Cgx.Transform.prototype),t.prototype.constructor=t,t}();n.Vgx.EntityTransform=t}(library),function(n){var t=function(){function t(){function v(){t.reset();t.translate(c,l);t.scale(r,r);t.translate(-u,-f);i=!1;h(u,f)}function h(n,t){var i=s.localToGlobalRect(0,0,e,o),h=-n+i.width*.5,c=-t+i.height*.5;h*=r;c*=r;y(h,c);u=n;f=t}function a(){return t.hasInverse()?n.Cgx.Matrix.invert(t):t}function y(n,i){t.offsetX=n;t.offsetY=i}var s=this,t=new n.Cgx.Matrix,i=!0,r=1,u=0,f=0,e=1,o=1,c=e*.5,l=o*.5;Object.defineProperty(this,"getMatrix",{value:function(){return i&&v(),t}});Object.defineProperty(this,"getViewBounds",{value:function(){return s.localToGlobalRect(0,0,e,o)}});Object.defineProperty(this,"setViewPixelSize",{value:function(n,t){e=n;o=t;c=e*.5;l=o*.5;i=!0}});Object.defineProperty(this,"setViewTarget",{value:function(n,t){h(n,t);i=!0}});Object.defineProperty(this,"moveViewTarget",{enumerable:!1,value:function(n,t){h(u+n,f+t);i=!0}});Object.defineProperty(this,"setViewZoom",{value:function(n){r=n;i=!0}});Object.defineProperty(this,"setViewZoomTo",{enumerable:!1,value:function(n,t,u){h(t,u);r*=n;i=!0}});Object.defineProperty(this,"viewTargetX",{get:function(){return u}});Object.defineProperty(this,"viewTargetY",{get:function(){return f}});Object.defineProperty(this,"viewZoom",{get:function(){return r}});Object.defineProperty(this,"globalToLocalPoint",{value:function(n,t){return s.getMatrix().transformPoint(n,t)}});Object.defineProperty(this,"globalToLocalRect",{value:function(n,t,i,r){return s.getMatrix().transformRect(n,t,i,r)}});Object.defineProperty(this,"localToGlobalPoint",{value:function(n,t){return a().transformPoint(n,t)}});Object.defineProperty(this,"localToGlobalRect",{value:function(n,t,i,r){return a().transformRect(n,t,i,r)}})}return t}();n.Vgx.ViewTransform=t}(library),function(n){var t=function(){function t(t,i){function e(){var i,t;for(r=new n.Vgx.Path,i=0;i<u.length;i++){t=u[i];switch(t.type){case"arc":r.addArc(t.insertPointX,t.insertPointY,t.radius,t.startAngle||0,t.endAngle||Math.PI*2,t.optClockwise||null);break;case"rect":r.addRect(t.insertPointX,t.insertPointY,t.width,t.height);break;case"ellipse":r.addEllipse(t.insertPointX,t.insertPointY,t.radiusX,t.radiusY,t.rotation||0,t.startAngle||0,t.endAngle||Math.PI*2,t.optClockwise||null);break;case"path":r.addFigure(t.data)}}}var f=t,u=i,r=null;Object.defineProperty(this,"_getPath",{value:function(){return r==null&&e(),r}});Object.defineProperty(this,"id",{get:function(){return f}});Object.defineProperty(this,"anchorX",{value:0,writable:!0});Object.defineProperty(this,"anchorY",{value:0,writable:!0})}return t}();n.Vgx.PointDefinition=t}(library),function(n){var t=function(){var t={};return Object.defineProperty(t,"type1",{get:function(){return new n.Vgx.PointDefinition("type1",[{type:"path",data:"M 0.0,0.5 L 1.0,0.5 M 0.5,0.0 L 0.5,1.0"},{type:"ellipse",insertPointX:.5,insertPointY:.5,radiusX:.5,radiusY:.5,startAngle:0,endAngle:2*Math.PI}],.5,.5)}}),Object.defineProperty(t,"type2",{get:function(){return new n.Vgx.PointDefinition("type2",[{type:"path",data:"M -0.353553390,-0.353553390 L 0.353553390,0.353553390 M -0.353553390,0.353553390 L 0.353553390,-0.353553390"},{type:"ellipse",insertPointX:0,insertPointY:0,radiusX:.5,radiusY:.5,startAngle:0,endAngle:2*Math.PI}],.5,.5)}}),t}();n.Vgx.PointDefinitions=t}(library),function(n){var t=function(){function t(t,i,r){function c(){u=new n.Cgx.CoreGraphics(s);f.shadow=new n.Vgx.Shadow}var f=this,s=i,h=t,e=r,u,o=!0;Object.defineProperty(this,"_beginRender",{enumerable:!1,value:function(){f.pushTransform(e)}});Object.defineProperty(this,"_endRender",{enumerable:!1,value:function(){f.popTransform()}});Object.defineProperty(this,"_getImageData",{enumerable:!1,value:function(){return u.getImageData()}});Object.defineProperty(this,"drawing",{get:function(){return h}});Object.defineProperty(this,"scaleStyles",{get:function(){return o},set:function(n){o=!!n}});Object.defineProperty(this,"shadow",{get:function(){return u.getShadow()},set:function(n){u.setShadow(n)}});Object.defineProperty(this,"fillBrush",{get:function(){return u.getFillBrush()},set:function(n){u.setFillBrush(n)}});Object.defineProperty(this,"strokeBrush",{get:function(){return u.getStrokeBrush()},set:function(n){u.setStrokeBrush(n)}});Object.defineProperty(this,"strokeWidth",{get:function(){return o?u.getStrokeWidth():u.getStrokeWidth()*e.viewZoom},set:function(n){o?u.setStrokeWidth(n):u.setStrokeWidth(n/e.viewZoom)}});Object.defineProperty(this,"fontFamily",{get:function(){return u.getFontFamily()},set:function(n){u.setFontFamily(n)}});Object.defineProperty(this,"fontSize",{get:function(){return u.getFontSize()},set:function(n){u.setFontSize(n)}});Object.defineProperty(this,"textBaseline",{get:function(){return u.getTextBaseline()},set:function(n){u.setTextBaseline(n)}});Object.defineProperty(this,"clear",{value:function(n){u.clear(n)}});Object.defineProperty(this,"drawArc",{value:function(n){u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawArc(n.insertPointX,n.insertPointY,n.radius,n.startAngleRad,n.endAngleRad,n.isAntiClockwise,n.transform)}});Object.defineProperty(this,"drawLine",{value:function(n){u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawLine(n.insertPointX,n.insertPointY,n.endPoint.x,n.endPoint.y,n.transform)}});Object.defineProperty(this,"drawRectangle",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);n.cornersRadius===0?u.drawRectangle(n.insertPointX,n.insertPointY,n.width,n.height,n.transform):u.drawRoundedRectangle(n.insertPointX,n.insertPointY,n.width,n.height,n.cornersRadius,n.transform)}});Object.defineProperty(this,"drawSquare",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);n.cornersRadius===0?u.drawSquare(n.insertPointX,n.insertPointY,n.size,n.transform):u.drawRoundedRectangle(n.insertPointX,n.insertPointY,n.size,n.size,n.cornersRadius,n.transform)}});Object.defineProperty(this,"drawCircle",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawCircle(n.insertPointX,n.insertPointY,n.radius,n.transform)}});Object.defineProperty(this,"drawEllipse",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawEllipse(n.insertPointX,n.insertPointY,n.xRadius,n.yRadius,n.transform)}});Object.defineProperty(this,"drawPolyline",{value:function(n){u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawPolyline(n.points.toArray(),n.transform)}});Object.defineProperty(this,"drawPolygon",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawPolygon(n.points.toArray(),n.transform)}});Object.defineProperty(this,"drawTriangle",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawTriangle(n.point1,n.point2,n.point3,n.transform)}});Object.defineProperty(this,"drawQuad",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawQuad(n.point1,n.point2,n.point3,n.point4,n.transform)}});Object.defineProperty(this,"drawCubicCurve",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawCubicCurve(n.points.toArray(),n.controlPoints1.toArray(),n.controlPoints2.toArray(),n.isClosed,n.transform)}});Object.defineProperty(this,"drawQuadraticCurve",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawQuadraticCurve(n.points.toArray(),n.controlPoints.toArray(),n.isClosed,n.transform)}});Object.defineProperty(this,"drawImage",{value:function(n){u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawImage(n.image,n.insertPointX,n.insertPointY,n.width,n.height,n.transform)}});Object.defineProperty(this,"drawText",{value:function(n,t){return t=!!t,u.setFillBrush(n.fill),u.setStrokeBrush(n.stroke),f.strokeWidth=n.strokeWidth,u.setShadow(n.shadow),u.setFontFamily(n.fontFamily),u.setFontSize(n.fontSize),u.setTextAlign(n.textAlign),u.setTextBaseline(n.textBaseline),u.drawText(n.insertPointX,n.insertPointY,n.text,n.transform),t?u.measureText(n.text):void 0}});Object.defineProperty(this,"drawPath",{value:function(n){var i,t;for(u.setFillBrush(n.fill),u.setStrokeBrush(n.stroke),f.strokeWidth=n.strokeWidth,u.setShadow(n.shadow),i=n.figures,t=0;t<i.length;t++)u.drawPath2D(n.insertPointX,n.insertPointY,i[t],n.fillRule,n.transform)}});Object.defineProperty(this,"drawPie",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawPie(n.insertPointX,n.insertPointY,n.radius,n.startAngleRad,n.endAngleRad,n.isAntiClockwise,n.transform)}});Object.defineProperty(this,"drawDonut",{value:function(n){u.setFillBrush(n.fill);u.setStrokeBrush(n.stroke);f.strokeWidth=n.strokeWidth;u.setShadow(n.shadow);u.drawDonut(n.insertPointX,n.insertPointY,n.startRadius,n.endRadius,n.startAngleRad,n.endAngleRad,n.isAntiClockwise,n.transform)}});Object.defineProperty(this,"drawGroup",{value:function(t){f.strokeWidth=t.strokeWidth;u.setStrokeBrush(t.stroke);u.setFillBrush(t.fill);u.setShadow(t.shadow);var i=new n.Cgx.Transform;i.translationX=t.insertPointX;i.translationY=t.insertPointY;u.pushTransform(i);t.children.forEach(function(n){n.draw(f)});u.popTransform()}});Object.defineProperty(this,"drawAxes",{value:function(){var n=e.globalToLocalPoint(0,0);u.setStrokeWidth(1);u.setStrokeBrush("rgba(255,0,0,0.5)");u.drawLine(0,n.y,s.width,n.y);u.setStrokeBrush("rgba(0,255,0,0.5)");u.drawLine(n.x,0,n.x,s.height)}});Object.defineProperty(this,"drawSymbol",{value:function(n,t,i){u.drawSymbol(n,t,i)}});Object.defineProperty(this,"measureText",{value:function(n){return u.measureText(n)}});Object.defineProperty(this,"pushTransform",{value:function(n){u.pushTransform(n)}});Object.defineProperty(this,"popTransform",{value:function(){return u.popTransform()}});c()}return t}();n.Vgx.DrawingContext=t}(library),function(n){var t=function(){function f(){if(t.fastHeightEstimation)return r("M");throw new Error("not implemented");}function r(n){return i.measureText(n).width}var t={},u=n.Cgx.Engine.createCanvasBuffer(1,1),i=u.getContext("2d");return Object.defineProperty(t,"measureText",{value:function(n,t,u){return i.font=u+"px "+t,{width:r(n),height:f()}}}),Object.defineProperty(t,"fastHeightEstimation",{value:!0,writable:!0}),t}();n.Vgx.TextUtils=t}(library),function(n){var t=function(){var t={},i=n.Vgx.PointDefinitions.type1,r=20,u="Arial",f=16,e=4,o="#ddeeff",s="#8888ff",h=1.3;return Object.defineProperty(t,"defaultStrokeStyle",{value:"transparent",writable:!0}),Object.defineProperty(t,"defaultStrokeWidth",{value:0,writable:!0}),Object.defineProperty(t,"defaultFillStyle",{value:16777215,writable:!0}),Object.defineProperty(t,"pointType",{get:function(){return i},set:function(t){t instanceof n.Vgx.PointDefinition&&(i=t)}}),Object.defineProperty(t,"pointSize",{get:function(){return r},set:function(n){n&&typeof n=="number"&&(r=n)}}),Object.defineProperty(t,"fontFamily",{get:function(){return u},set:function(n){n&&typeof n=="string"&&(u=n)}}),Object.defineProperty(t,"fontSize",{get:function(){return f},set:function(n){n&&typeof n=="number"&&(f=n)}}),Object.defineProperty(t,"vertexSize",{get:function(){return e},set:function(n){n&&typeof n=="number"&&(e=n)}}),Object.defineProperty(t,"vertexFillColor",{get:function(){return o},set:function(n){var t=typeof n;(t==="string"||t==="number"||n instanceof Brush)&&(o=n)}}),Object.defineProperty(t,"vertexStrokeColor",{get:function(){return s},set:function(n){var t=typeof n;(t==="string"||t==="number"||n instanceof Brush)&&(s=n)}}),Object.defineProperty(t,"vertexStrokeWidth",{get:function(){return h},set:function(n){var t=typeof n;t==="number"&&(h=n)}}),t}();n.Vgx.Vars=t}(library),function(n){var t=function(){function t(){this.loadChildElement=function(n){var e=n[0],c=Vgx[e],u,t,f,i,o,h,s,r;if(typeof c!="function")throw new Error("invalid type name '"+e+"'");if(u=new c,u==null)throw new Error("invalid type name '"+e+"'");t=n[1];for(f in t)t.hasOwnProperty(f)&&f in u&&(u[f]=t[f]);switch(e){case"Polyline":case"Polygon":if("points"in t)for(i=0;i<t.points.length;i++)u.points.add(t.points[i]);break;case"QuadraticCurve":if("points"in t)for(i=0;i<t.points.length;i++)u.points.add(t.points[i]);if("controlPoints"in t)for(i=0;i<t.controlPoints.length;i++)u.controlPoints.add(t.controlPoints[i]);break;case"CubicCurve":if("points"in t)for(i=0;i<t.points.length;i++)u.points.add(t.points[i]);if("controlPoints1"in t)for(i=0;i<t.controlPoints1.length;i++)u.controlPoints1.add(t.controlPoints1[i]);if("controlPoints2"in t)for(i=0;i<t.controlPoints2.length;i++)u.controlPoints2.add(t.controlPoints2[i]);break;case"Group":if("children"in t)for(o=0;o<t.children.length;o++)h=this.loadChildElement(t.children[o]),h!=null&&u.children.add(h);break;case"Path":if("figures"in t)for(s=0;s<t.figures.length;s++){r=t.figures[s];switch(r.type){case"arc":u.addArc(r.insertPointX,r.insertPointY,r.radius,r.startAngle||0,r.endAngle||Math.PI*2,r.optClockwise||null);break;case"rect":u.addRect(r.insertPointX,r.insertPointY,r.width,r.height);break;case"ellipse":u.addRect(r.insertPointX,r.insertPointY,r.radiusX,r.radiusY,r.rotation||0,r.startAngle||0,r.endAngle||Math.PI*2,r.optClockwise||null);break;case"path":u.addFigure(r.data)}}}return u};this.loadFromObject=function(t){var i,r,u,f;if(!("children"in t))throw new Error("missing 'children' element");for(i=new n.Vgx.Drawing,r=0;r<t.children.length;r++)u=t.children[r],f=this.loadChildElement(u),i.addChild(f);return"background"in t&&(i.background=t.background),i}}return new t}();n.Vgx.DrawingLoader=t}(library),function(n){var t=function(){function t(){var i=this,t=n.Vgx.Vars.defaultFillStyle;Object.defineProperty(this,"fill",{get:function(){return t},set:function(n){t!=n&&(t=n,i.appearanceDirty=!0)}})}return t}();n.Vgx.IFillable=t}(library),function(n){var t=function(){function t(){function e(){r&&(r=null,i.raise("onHandleDestroyed",{}));t&&t.removeChild(f)}function o(){r=t.getFreeHandle();t.addChild(f);f._addedToDrawing();i.raise("onHandleCreated",{})}var f=this,i=new n.Extra.Events(this),t,r=null,u={};Object.defineProperty(this,"_getValue",{configurable:!0,value:function(n,t){return n in u?u[n]():t}});Object.defineProperty(this,"_addedToDrawing",{value:function(){},configurable:!0,enumerable:!1});Object.defineProperty(this,"drawing",{get:function(){return t}});Object.defineProperty(this,"handle",{get:function(){return r}});Object.defineProperty(this,"addToDrawing",{value:function(n){t!=n&&(e(),t=n,o())}});Object.defineProperty(this,"removeFromDrawing",{value:function(){e()}});Object.defineProperty(this,"onHandleCreated",{value:new n.Extra.EventGroup(i,"onHandleCreated")});Object.defineProperty(this,"onHandleDestroyed",{value:new n.Extra.EventGroup(i,"onHandleDestroyed")});Object.defineProperty(this,"setBinding",{value:function(n,t){t?u[n]=t:delete u[n]}})}return t}();n.Vgx.VgxObject=t}(library),function(n){var t=function(){function t(){n.Vgx.VgxObject.call(this);var t=this,i=!0,r=!0,u=!0,f=!0;Object.defineProperty(this,"appearanceDirty",{get:function(){return r},set:function(n){n=!!n;r=n;n&&t.drawing&&(t.drawing.isDirty=!0)}});Object.defineProperty(this,"geometryDirty",{get:function(){return u},set:function(n){n=!!n;u=n;n&&t.drawing&&(t.drawing.isDirty=!0)}});Object.defineProperty(this,"positionDirty",{get:function(){return f},set:function(n){n=!!n;f=n;n&&t.drawing&&(t.drawing.isDirty=!0)}});Object.defineProperty(this,"visible",{get:function(){return i},set:function(n){i!=n&&(i=n,t.appearanceDirty=!0,t.drawing&&(t.drawing.isDirty=!0))}});Object.defineProperty(this,"draw",{configurable:!0,value:function(){}})}return t.prototype=Object.create(n.Vgx.VgxObject.prototype),t.prototype.constructor=t,t}();n.Vgx.Drawable=t}(library),function(n){var t=function(){function t(){var i,f;n.Vgx.Drawable.call(this);var t=this,r=0,u=0,e=n.Vgx.Vars.defaultStrokeStyle,o=n.Vgx.Vars.defaultStrokeWidth,s=new n.Vgx.Shadow;s.onPropertyChanged.addHandler(function(){t.appearanceDirty=!0},{});i=new n.Vgx.EntityTransform(this);f=new n.Vgx.Rect;Object.defineProperty(this,"_getPath",{configurable:!0,value:null});Object.defineProperty(this,"_getVertices",{configurable:!0,value:function(){return[{x:t._getValue("insertPointX",r),y:t._getValue("insertPointY",u)}]}});Object.defineProperty(this,"_getBounds",{configurable:!0,value:function(){return n.Vgx.Rect.empty}});Object.defineProperty(this,"insertPointX",{configurable:!0,get:function(){return t._getValue("insertPointX",r)},set:function(n){r!=n&&(r=n,t.positionDirty=!0)}});Object.defineProperty(this,"insertPointY",{configurable:!0,get:function(){return t._getValue("insertPointY",u)},set:function(n){u!=n&&(u=n,t.positionDirty=!0)}});Object.defineProperty(this,"stroke",{get:function(){return t._getValue("stroke",e)},set:function(n){e!=n&&(e=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"strokeWidth",{get:function(){return t._getValue("strokeWidth",o)},set:function(n){o!=n&&(o=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"shadow",{get:function(){return s}});Object.defineProperty(this,"getBounds",{value:function(){var n,r;return t.geometryDirty&&(n=t._getBounds(),i.isIdentity?f=n:(r=t.transform.getMatrix().clone(),r.offsetX=-(t.insertPointX+t.transform.originX),r.offsetY=-(t.insertPointY+t.transform.originY),f=r.transformRect(n.x,n.y,n.width,n.height))),f}});Object.defineProperty(this,"transform",{get:function(){return i},set:function(t){t instanceof n.Cgx.Transform&&(i.translationX=t.translationX,i.translationY=t.translationY,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.rotation=t.rotation,i.originX=t.originX,i.originY=t.originY)}})}return t.prototype=Object.create(n.Vgx.Drawable.prototype),t.prototype.constructor=t,t}();n.Vgx.Entity=t}(library),function(n){var t=function(){function t(){var t=this,e=[],i=new n.Extra.Collection,u=!0,f=null,r=[];Object.defineProperty(this,"_registerDirtyEventHandler",{value:function(n){typeof n=="function"&&r.push(n)}});Object.defineProperty(this,"_unregisterDirtyEventHandler",{value:function(n){if(typeof n=="function")for(var t;(t=r.indexOf(n))>=0;)r.splice(t,1)}});Object.defineProperty(this,"background",{get:function(){return f},set:function(n){var i=typeof n;(i==="number"||i==="string"||n instanceof CanvasGradient||n instanceof CanvasPattern)&&f!=n&&(f=n,t.isDirty=!0)}});Object.defineProperty(this,"isDirty",{get:function(){return u},set:function(n){n=!!n;u!=n&&(u=n,r.forEach(n=>n()))}});this.getFreeHandle=function(){var t;do t=n.Vgx.Utils.createUUID(!1).substr(0,8);while(e.indexOf(t)!=-1);return e.push(t),t};this.addChild=function(n){if(n.drawing!=t){n.addToDrawing(t);return}i.add(n);t.isDirty=!0};this.removeChild=function(n){var r=i.remove(n);return t.isDirty=!0,r};this.getChildren=function(){return i.toArray()};this.clear=function(){i.clear();t.isDirty=!0};this.getBounds=function(){var t=n.Vgx.Rect.empty;return i.length>0&&i.forEach(function(n){var i=n.getBounds();t.union(i)}),t}}return Object.defineProperty(t,"fromJSON",{value:function(t){var i=JSON.parse(t);return n.Vgx.DrawingLoader.loadFromObject(i)}}),Object.defineProperty(t,"fromScript",{value:function(t){var i=new n.Vgx.Drawing;return eval(t),i}}),t}();n.Vgx.Drawing=t}(library),function(n){var t=function(){function t(){var i=this,t=n.Vgx.Vars.defaultFillStyle;Object.defineProperty(this,"fill",{get:function(){return t},set:function(n){t!=n&&(t=n,i.appearanceDirty=!0)}})}return t}();n.Vgx.IFillable=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);var s=.017453292519943295,t=this,i=0,f=0,e=0,r=0,u=0,o=!1;Object.defineProperty(this,"radius",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngle",{get:function(){return f},set:function(n){f!=n&&(f=n,r=n*s,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngleRad",{get:function(){return r}});Object.defineProperty(this,"endAngle",{get:function(){return e},set:function(n){e!=n&&(e=n,u=n*s,t.geometryDirty=!0)}});Object.defineProperty(this,"endAngleRad",{get:function(){return u}});Object.defineProperty(this,"isAntiClockwise",{get:function(){return o},set:function(n){o!=n&&(o=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawArc(t)}});Object.defineProperty(this,"_getBounds",{value:function(){var f=Math.cos(r)*i,e=Math.sin(r)*i,o=Math.cos(u)*i,s=Math.sin(u)*i,h=Math.min(f,o),c=Math.min(e,s),l=Math.max(f,o),a=Math.max(e,s);return new n.Vgx.Rect(t.insertPointX+h,t.insertPointY+c,l-h,a-c)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Arc=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var i=this,t=0;Object.defineProperty(this,"radius",{get:function(){return t},set:function(n){t!=n&&(t=n,i.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawCircle(i)}});Object.defineProperty(this,"_getBounds",{value:function(){var r=i.insertPointX-t,u=i.insertPointY-t,f=t*2,e=t*2;return new n.Vgx.Rect(r,u,f,e)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Circle=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var f=this,t=new n.Extra.Collection,i=new n.Extra.Collection,r=new n.Extra.Collection,u=!1;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.length>0?t.at(0).x:0},set:function(n){var f=t.at(0),u=n-f.x;t.forEach(function(n){n.x+=u});i.forEach(function(n){n.x+=u});r.forEach(function(n){n.x+=u})}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.length>0?t.at(0).y:0},set:function(n){var f=t.at(0),u=n-f.y;t.forEach(function(n){n.y+=u});i.forEach(function(n){n.y+=u});r.forEach(function(n){n.y+=u})}});Object.defineProperty(this,"points",{get:function(){return t}});Object.defineProperty(this,"controlPoints1",{get:function(){return i}});Object.defineProperty(this,"controlPoints2",{get:function(){return r}});Object.defineProperty(this,"isClosed",{get:function(){return u},set:function(n){n=!!n;u!=n&&(u=n,f.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawCubicCurve(f)}});Object.defineProperty(this,"_getBounds",{value:function(){var u=[];return u.concat(t.toArray()),u.concat(i.toArray()),u.concat(r.toArray()),n.Vgx.MathUtils.getPointsBounds(u)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,Object.defineProperty(t,"fromPoints",{value:function(i,r){var o=n.Vgx.MathUtils.interpolatePointWithCubicCurves(i,r),u=new t,f,e;for(u.points.add(i[0]),f=0;f<o.length;f++)e=o[f],u.controlPoints1.add(e.firstControlPoint),u.controlPoints2.add(e.secondControlPoint),u.points.add(e.endPoint);return u}}),t}();n.Vgx.CubicCurve=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var h=.017453292519943295,t=this,f=0,i=0,e=0,o=0,r=0,u=0,s=!1;Object.defineProperty(this,"startRadius",{get:function(){return f},set:function(n){f!=n&&(f=n,t.geometryDirty=!0)}});Object.defineProperty(this,"endRadius",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngle",{get:function(){return e},set:function(n){e!=n&&(e=n,r=n*h,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngleRad",{get:function(){return r}});Object.defineProperty(this,"endAngle",{get:function(){return o},set:function(n){o!=n&&(o=n,u=n*h,t.geometryDirty=!0)}});Object.defineProperty(this,"endAngleRad",{get:function(){return u}});Object.defineProperty(this,"isAntiClockwise",{get:function(){return s},set:function(n){s!=n&&(s=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawDonut(t)}});Object.defineProperty(this,"_getBounds",{value:function(){var f=Math.cos(r)*i,e=Math.sin(r)*i,o=Math.cos(u)*i,s=Math.sin(u)*i,h=Math.min(f,o),c=Math.min(e,s),l=Math.max(f,o),a=Math.max(e,s);return new n.Vgx.Rect(t.insertPointX+h,t.insertPointY+c,l-h,a-c)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Donut=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var t=this,i=0,r=0;Object.defineProperty(this,"xRadius",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"yRadius",{get:function(){return r},set:function(n){r!=n&&(r=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawEllipse(t)}});Object.defineProperty(this,"_getBounds",{value:function(){var u=t.insertPointX-i,f=t.insertPointY-r,e=i*2,o=r*2;return new n.Vgx.Rect(u,f,e,o)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Ellipse=t}(library),function(n){var t=function(){function t(){function r(){i=new n.Extra.Collection;i.onItemsAdded.addHandler(function(){t.geometryDirty=!0});i.onItemsRemoved.addHandler(function(){t.geometryDirty=!0});i.onCollectionCleared.addHandler(function(){t.geometryDirty=!0})}n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var t=this,i;Object.defineProperty(this,"_getBounds",{value:function(){var r=new n.Vgx.Rect;return i.forEach(function(n){r.union(n.getBounds())}),r.x+=t.insertPointX,r.y+=t.insertPointY,r}});Object.defineProperty(this,"children",{get:function(){return i}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawGroup(t)}});r()}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Group=t}(library),function(n){var t=function(){function t(){function e(){u=new window.Image;u.onload=o}function o(){s();t.appearanceDirty=!0;t.drawing&&(t.drawing.isDirty=!0)}function s(){if(i<=0&&r<=0)i=u.naturalWidth,r=u.naturalHeight;else{var n=u.naturalHeight/u.naturalWidth;i<=0?i=r/n:r<=0&&(r=i*n)}}n.Vgx.Entity.call(this);var t=this,i=0,r=0,f=null,u=null;Object.defineProperty(this,"width",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"height",{get:function(){return r},set:function(n){r!=n&&(r=n,t.geometryDirty=!0)}});Object.defineProperty(this,"src",{get:function(){return f},set:function(n){if(f!=n){var t=f;f=n;u.src=f}}});Object.defineProperty(this,"image",{get:function(){return u}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawImage(t)}});Object.defineProperty(this,"_getBounds",{value:function(){return new n.Vgx.Rect(t.insertPointX,t.insertPointY,t.width,t.height)}});e()}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Image=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);var t=this,i={x:0,y:0},r={x:0,y:0},u=null;Object.defineProperty(this,"_getPath",{configurable:!1,value:function(){return(u==null||t.geometryDirty)&&(u=new Path2D,u.moveTo(0,0),u.lineTo(t.endPoint.x-t.insertPoint.x,t.endPoint.y-t.insertPoint.y)),u}});Object.defineProperty(this,"_getVertices",{configurable:!1,value:function(){return[t.insertPoint,t.endPoint]}});Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return i.x},set:function(n){var t=n-i.x;i.x=n;r.x+=t}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return i.y},set:function(n){var t=n-i.y;i.y=n;r.y+=t}});Object.defineProperty(this,"startPoint",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"endPoint",{get:function(){return r},set:function(n){r!=n&&(r=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawLine(t)}});Object.defineProperty(this,"_getBounds",{value:function(){var i=Math.min(t.startPoint.x,t.endPoint.x),r=Math.min(t.startPoint.y,t.endPoint.y),u=Math.max(t.startPoint.x,t.endPoint.x),f=Math.max(t.startPoint.y,t.endPoint.y);return new n.Vgx.Rect(i,r,u-i,f-r)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Line=t}(library),function(n){var t=function(){function t(){function c(n){return typeof n=="string"?{path:new Path2D(n),isEmpty:!1}:{path:new Path2D,isEmpty:!0}}function e(){t==null||t.isEmpty||h.push(t.path);t=null}function o(n){var i;typeof n=="string"&&(i=c(n));t!=null&&(t.isEmpty||e());i||(i=c());t=i}function f(){t||o()}n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var i=this,r=0,u=0,s="nonzero",h=[],t=null;Object.defineProperty(this,"figures",{get:function(){return h.slice(0)}});this.clear=function(){h.length=0;t=null;i.geometryDirty=!0};this.beginNewFigure=function(){o();i.geometryDirty=!0};this.moveTo=function(n,i){f();t.path.moveTo(n,i);t.isEmpty=!1;r=n;u=i};this.lineTo=function(n,i){f();t.path.lineTo(n,i);t.isEmpty=!1;r=n;u=i};this.horizontalLineTo=function(n){f();t.path.lineTo(n,u);t.isEmpty=!1;r=n};this.verticalLineTo=function(n){f();t.path.lineTo(r,n);t.isEmpty=!1;u=n};this.arcTo=function(n,i,e,o,s){f();t.path.arcTo(n,i,e,o,s);t.isEmpty=!1;r=e;u=o};this.bezierCurveTo=function(n,i,e,o,s,h){f();t.path.bezierCurveTo(n,i,e,o,s,h);t.isEmpty=!1;r=s;u=h};this.quadraticCurveTo=function(n,i,e,o){f();t.path.quadraticCurveTo(n,i,e,o);t.isEmpty=!1;r=e;u=o};this.closeFigure=function(){t&&(t.path.closePath(),i.beginNewFigure())};this.endFigure=function(){e();i.geometryDirty=!0};this.addFigure=function(n){o(n);e();i.geometryDirty=!0};this.addRect=function(n,r,u,f){o();t.path.rect(n,r,u,f);t.isEmpty=!1;e();i.geometryDirty=!0};this.addEllipse=function(n,r,u,f,s,h,c,l){l=!!l;o();t.path.ellipse(n,r,u,f,s,h,c,l);t.isEmpty=!1;e();i.geometryDirty=!0};this.addArc=function(n,r,u,f,s,h){h=!!h;o();t.path.arc(n,r,u,f,s,h);t.isEmpty=!1;e();i.geometryDirty=!0};Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawPath(i)}});Object.defineProperty(this,"fillRule",{get:function(){return s},set:function(n){(typeof n=="string"||n==="nonzero"||n==="evenodd")&&s!=n&&(s=n,i.appearanceDirty=!0)}});Object.defineProperty(this,"_getBounds",{value:function(){var t=new n.Vgx.Rect;return t.x=i.insertPointX,t.y=i.insertPointY,t}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Path=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var s=.017453292519943295,t=this,i=0,f=0,e=0,r=0,u=0,o=!1;Object.defineProperty(this,"radius",{get:function(){return i},set:function(n){i!=n&&(i=n,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngle",{get:function(){return f},set:function(n){f!=n&&(f=n,r=n*s,t.geometryDirty=!0)}});Object.defineProperty(this,"startAngleRad",{get:function(){return r}});Object.defineProperty(this,"endAngle",{get:function(){return e},set:function(n){e!=n&&(e=n,u=n*s,t.geometryDirty=!0)}});Object.defineProperty(this,"endAngleRad",{get:function(){return u}});Object.defineProperty(this,"isAntiClockwise",{get:function(){return o},set:function(n){o!=n&&(o=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawPie(t)}});Object.defineProperty(this,"_getBounds",{value:function(){var f=Math.cos(r)*i,e=Math.sin(r)*i,o=Math.cos(u)*i,s=Math.sin(u)*i,h=Math.min(f,o),c=Math.min(e,s),l=Math.max(f,o),a=Math.max(e,s);return new n.Vgx.Rect(t.insertPointX+h,t.insertPointY+c,l-h,a-c)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Pie=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var i=this,t=new n.Extra.Collection;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.at(0).x},set:function(n){var i=t.at(0),r=n-i.x;t.forEach(function(n){n.x+=r})}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.at(0).y},set:function(n){var i=t.at(0),r=n-i.y;t.forEach(function(n){n.y+=r})}});Object.defineProperty(this,"points",{get:function(){return t}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawPolygon(i)}});Object.defineProperty(this,"_getBounds",{value:function(){return n.Vgx.MathUtils.getPointsBounds(t.toArray())}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Polygon=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);var i=this,t=new n.Extra.Collection;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.at(0).x},set:function(n){var i=t.at(0),r=n-i.x;t.forEach(function(n){n.x+=r})}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.at(0).y},set:function(n){var i=t.at(0),r=n-i.y;t.forEach(function(n){n.y+=r})}});Object.defineProperty(this,"points",{get:function(){return t}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawPolyline(i)}});Object.defineProperty(this,"_getBounds",{value:function(){return n.Vgx.MathUtils.getPointsBounds(t.toArray())}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Polyline=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var f=this,t,i,r,u;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.x},set:function(n){var f=n-t.x;t.x=n;i.x+=f;r.x+=f;u.x+=f}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.y},set:function(n){var f=n-t.y;t.y=n;i.y+=f;r.y+=f;u.y+=f}});Object.defineProperty(this,"point1",{get:function(){return t},set:function(n){t!=n&&(t=n,f.geometryDirty=!0)}});Object.defineProperty(this,"point2",{get:function(){return i},set:function(n){i!=n&&(i=n,f.geometryDirty=!0)}});Object.defineProperty(this,"point3",{get:function(){return r},set:function(n){r!=n&&(r=n,f.geometryDirty=!0)}});Object.defineProperty(this,"point4",{get:function(){return u},set:function(n){u!=n&&(u=n,f.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawQuad(f)}});Object.defineProperty(this,"_getBounds",{value:function(){for(var f,e=Number.MAX_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,h=Number.MIN_VALUE,l=[t,i,r,u],c=0;c<l.length;c++)f=l[c],e=Math.min(e,f.x),o=Math.min(o,f.y),s=Math.max(s,f.x),h=Math.max(h,f.y);return new n.Vgx.Rect(e,o,s-e,h-o)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Quad=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var u=this,t=new n.Extra.Collection,i=new n.Extra.Collection,r=!1;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.length>0?t.at(0).x:0},set:function(n){var u=t.at(0),r=n-u.x;t.forEach(function(n){n.x+=r});i.forEach(function(n){n.x+=r})}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.length>0?t.at(0).y:0},set:function(n){var u=t.at(0),r=n-u.y;t.forEach(function(n){n.y+=r});i.forEach(function(n){n.y+=r})}});Object.defineProperty(this,"points",{get:function(){return t}});Object.defineProperty(this,"controlPoints",{get:function(){return i}});Object.defineProperty(this,"isClosed",{get:function(){return r},set:function(n){n=!!n;r!=n&&(r=n,u.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawQuadraticCurve(u)}});Object.defineProperty(this,"_getBounds",{value:function(){var r=[];return r.concat(t.toArray()),r.concat(i.toArray()),n.Vgx.MathUtils.getPointsBounds(r)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.QuadraticCurve=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var t=this,r=0,u=0,f=0,i=null,e=new n.Vgx.Rect;Object.defineProperty(this,"_getPath",{configurable:!1,value:function(){return(i==null||t.geometryDirty)&&(i=new Path2D,i.rect(0,0,t.width,t.height)),i}});Object.defineProperty(this,"_getBounds",{value:function(){return new n.Vgx.Rect(t.insertPointX,t.insertPointY,t.width,t.height)}});Object.defineProperty(this,"_getVertices",{configurable:!1,value:function(){return[{x:t.insertPointX,y:t.insertPointY},{x:t.insertPointX+t.width,y:t.insertPointY+t.height}]}});Object.defineProperty(this,"width",{get:function(){return t._getValue("width",r)},set:function(n){r!=n&&(r=n,t.geometryDirty=!0)}});Object.defineProperty(this,"height",{get:function(){return t._getValue("height",u)},set:function(n){u!=n&&(u=n,t.geometryDirty=!0)}});Object.defineProperty(this,"cornersRadius",{get:function(){return t._getValue("cornersRadius",f)},set:function(n){f!=n&&(f=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawRectangle(t)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Rectangle=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var t=this,r=0,u=0,i=null;Object.defineProperty(this,"_getPath",{configurable:!1,value:function(){return(i==null||t.geometryDirty)&&(i=new Path2D,i.rect(0,0,t.size,t.size)),i}});Object.defineProperty(this,"_getVertices",{configurable:!1,value:function(){return[t.insertPoint,{x:t.insertPoint.x+t.size,y:t.insertPoint.y+t.size}]}});Object.defineProperty(this,"size",{get:function(){return t._getValue("size",r)},set:function(n){r!=n&&(r=n,t.geometryDirty=!0)}});Object.defineProperty(this,"cornersRadius",{get:function(){return t._getValue("cornersRadius",u)},set:function(n){u!=n&&(u=n,t.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawSquare(t)}});Object.defineProperty(this,"_getBounds",{value:function(){return new n.Vgx.Rect(t.insertPointX,t.insertPointY,t.size,t.size)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Square=t}(library),function(n){var t=function(){function t(){function s(n){switch(r){case"top":return 0;case"hanging":return n.height*.1951;case"middle":return n.height*.5;case"alphabetic":return n.height*.8;case"ideographic":case"bottom":return n.height;default:throw new Error("invalid textBaseline");}}n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var t=this,u=n.Vgx.Vars.fontFamily,f=n.Vgx.Vars.fontSize,e="",o="left",r="alphabetic",i=null;Object.defineProperty(this,"_getPath",{configurable:!1,value:function(){if(_path==null||t.geometryDirty)throw new Error("not implemented");return _path}});Object.defineProperty(this,"_getVertices",{configurable:!1,value:function(){return[{x:t.insertPointX,y:t.insertPointY}]}});Object.defineProperty(this,"fontFamily",{get:function(){return u},set:function(n){typeof n=="string"&&u!=n&&(u=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"fontSize",{get:function(){return f},set:function(n){typeof n=="number"&&f!=n&&(f=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"text",{get:function(){return e},set:function(n){(typeof n=="string"||typeof n=="undefined")&&e!=n&&(e=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"textAlign",{get:function(){return o},set:function(n){o!=n&&(o=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"textBaseline",{get:function(){return r},set:function(n){r!=n&&(r=n,t.appearanceDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawText(t,!0)}});Object.defineProperty(this,"_getBounds",{value:function(){i=n.Vgx.TextUtils.measureText(t.text,t.fontFamily,t.fontSize);var r=s(i);return new n.Vgx.Rect(t.insertPointX,t.insertPointY-r,i?i.width:0,i?i.height:0)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Text=t}(library),function(n){var t=function(){function t(){n.Vgx.Entity.call(this);n.Vgx.IFillable.call(this);var u=this,t,i,r;Object.defineProperty(this,"insertPointX",{configurable:!1,get:function(){return t.x},set:function(n){var u=n-t.x;t.x=n;i.x+=u;r.x+=u}});Object.defineProperty(this,"insertPointY",{configurable:!1,get:function(){return t.y},set:function(n){var u=n-t.y;t.y=n;i.y+=u;r.y+=u}});Object.defineProperty(this,"point1",{get:function(){return t},set:function(n){t!=n&&(t=n,u.geometryDirty=!0)}});Object.defineProperty(this,"point2",{get:function(){return i},set:function(n){i!=n&&(i=n,u.geometryDirty=!0)}});Object.defineProperty(this,"point3",{get:function(){return r},set:function(n){r!=n&&(r=n,u.geometryDirty=!0)}});Object.defineProperty(this,"draw",{configurable:!1,value:function(n){n.drawTriangle(u)}});Object.defineProperty(this,"_getBounds",{value:function(){for(var u,f=Number.MAX_VALUE,e=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,c=[t,i,r],h=0;h<c.length;h++)u=c[h],f=Math.min(f,u.x),e=Math.min(e,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y);return new n.Vgx.Rect(f,e,o-f,s-e)}})}return t.prototype=Object.create(n.Vgx.Entity.prototype),t.prototype.constructor=t,t}();n.Vgx.Triangle=t}(library),function(n){var t=function(){function t(t,i){function st(){var s;u=window.document.createElement("div");f=t instanceof HTMLCanvasElement?t:window.document.createElement("canvas");u.appendChild(f);s=i instanceof n.Vgx.Drawing?i:new n.Vgx.Drawing;o=new n.Vgx.DrawingContext(e,f,r);l.drawing=s;ht();window.addEventListener("resize",b);r.setViewTarget(0,0);requestAnimationFrame(nt)}function ht(){f.addEventListener("mousedown",at);f.addEventListener("mousemove",vt);f.addEventListener("mouseup",yt);f.addEventListener("wheel",pt)}function ct(){v=a;e&&e.isDirty&&(v=!0,e.isDirty=!1);a=!1}function h(){a=!0}function lt(){var i,n,t;if(et(),v){if(c){for(e.background?o.clear(e.background):o.clear(),o._beginRender(),i=e.getChildren(),n=0;n<i.length;n++)t=i[n],t&&t.visible&&t.draw(o);o._endRender()}l.drawAxes&&o.drawAxes()}v=!1}function w(){it.raise("onViewChanged",{rect:ft()})}function ft(){return r.getViewBounds()}function et(){u.parentElement&&rt&&(rt=!1,b(null))}function nt(){u.parentElement!=null&&(ct(),v&&lt());requestAnimationFrame(nt)}function ot(){h()}function at(n){c&&(k=n.x,d=n.y,g=!0)}function vt(n){if(c){if(g){var t=r.localToGlobalPoint(n.x,n.y),i=r.localToGlobalPoint(k,d),u=t.x-i.x,f=t.y-i.y;l.move(-u,-f)}k=n.x;d=n.y}}function yt(){c&&(g=!1)}function pt(n){c&&(n.deltaY>0?l.zoom(tt):l.zoom(1/tt))}function b(){(s&&u.parentElement?(u.style.width=u.parentElement.clientWidth+"px",u.style.height=u.parentElement.clientHeight+"px"):(u.style.width=y+"px",u.style.height=p+"px"),f.width=u.clientWidth,f.height=u.clientHeight,a=!0,r.setViewPixelSize(f.width,f.height),e)&&h()}function wt(n,t){n!=null&&n._unregisterDirtyEventHandler(ot);c=!1;t!=null&&(c=!0,o.drawing=t,t._registerDirtyEventHandler(ot));et()}const tt=.85;var l=this,it=new n.Extra.Events(this),u,f,e,o,r=new n.Vgx.ViewTransform,a=!0,v=!0,g,k,d,rt=!0,s=!0,y=800,p=600,c=!1,ut=!1;Object.defineProperty(this,"autosize",{get:function(){return s},set:function(n){if(n=!!n,s!=n){var t=s;s=n;b(null)}}});Object.defineProperty(this,"canvas",{get:function(){return f}});Object.defineProperty(this,"currentZoom",{get:function(){return r.viewZoom}});Object.defineProperty(this,"currentTargetX",{get:function(){return r.viewTargetX}});Object.defineProperty(this,"currentTargetY",{get:function(){return r.viewTargetY}});Object.defineProperty(this,"drawAxes",{get:function(){return ut},set:function(n){ut=n;h()}});Object.defineProperty(this,"drawing",{get:function(){return e},set:function(n){if(e!=n){var t=e;e=n;wt(t,e)}}});Object.defineProperty(this,"height",{get:function(){return s?u.height:p},set:function(n){s?p=n:p!=n&&(p=n,b(null))}});Object.defineProperty(this,"htmlElement",{get:function(){return u}});Object.defineProperty(this,"scaleStyles",{get:function(){return o.scaleStyles},set:function(n){o.scaleStyles=n;h()}});Object.defineProperty(this,"width",{get:function(){return s?u.width:y},set:function(n){s?y=n:y!=n&&(y=n,b(null))}});Object.defineProperty(this,"getCursorPosition",{value:function(){return r.localToGlobalPoint(k,d)}});Object.defineProperty(this,"getCurrentViewBounds",{value:function(){return ft()}});Object.defineProperty(this,"redraw",{value:function(){a=!0;nt()}});Object.defineProperty(this,"move",{value:function(n,t){r.moveViewTarget(n,t);w();h()}});Object.defineProperty(this,"moveTo",{value:function(n,t){r.setViewTarget(n,t);w();h()}});Object.defineProperty(this,"zoom",{value:function(n){r.setViewZoom(r.viewZoom*n);w();h()}});Object.defineProperty(this,"zoomTo",{value:function(n,t,i){r.setViewZoomTo(r.viewZoom*n,t,i);w();h()}});Object.defineProperty(this,"zoomAt",{value:function(n,t,i){r.setViewZoomTo(n,t,i);w();h()}});Object.defineProperty(this,"zoomAll",{value:function(){var t=this.drawing.getBounds(),h,c;if(t.width!=0&&t.height!=0){var l=t.height/t.width,e=f.width,o=f.height,u=new n.Vgx.Rect(0,0,e,o),a=o/e,v=r.viewZoom,s=r.localToGlobalRect(u.x,u.y,u.width,u.height),i=1;i=l>a?s.height/t.height:s.width/t.width;h=t.x+t.width*.5;c=t.y+t.height*.5;i*=.9;n.Vgx.MathUtils.isZero(i)&&(i=.1);this.zoomAt(i,h,c)}}});it.create("onViewChanged");st()}return t}();n.Vgx.Viewport=t}(library),function(n){var t=function(){function t(){function v(){i=window.document.createElement("div");i.classList.add("VectorGraphicsView");i.style.width="100%";i.style.height="100%";c();window.addEventListener("resize",function(){return e()})}function e(){var o,h;if(i.parentElement){switch(f){case n.Vgx.ViewportsLayout.TWO_VERTICAL:var r=(i.offsetWidth-u)*.5,e=i.offsetHeight,c=t[0];c.width=r;c.height=e;o=t[1];o.width=r;o.height=e;o.htmlElement.style.left=r+u+"px";o.htmlElement.style.top="0px";break;case n.Vgx.ViewportsLayout.TWO_HORIZONTAL:var r=i.offsetWidth,e=(i.offsetHeight-u)*.5,l=t[0];l.width=r;l.height=e;h=t[1];h.width=r;h.height=e;h.htmlElement.style.left="0px";h.htmlElement.style.top=e+u+"px"}s=!1}}function c(){var t=new n.Vgx.Viewport;r!=null&&(t.drawing=r);y(t)}function y(n){t.indexOf(n)==-1&&(n.htmlElement.classList.add("viewport"),t.push(n),i.appendChild(n.htmlElement),w(n),e())}function p(){var n=t.pop();n.htmlElement.remove();o==n&&(o=t[t.length-1])}function w(n){o=n}function l(n){if(n>t.length)while(t.length<n)c();else if(n<t.length)while(t.length>n)p()}function b(){s&&e()}function k(n,i){if(n!=null,a=!1,i!=null)for(var r=0;r<t.length;r++)t[r].drawing=i;b()}function d(n,i){s=!0;switch(i){case 1:l(1);t[0].htmlElement.style.position="relative";t[0].autosize=!0;break;case 2:case 3:l(2);t[0].htmlElement.style.position="absolute";t[0].autosize=!1;t[1].htmlElement.style.position="absolute";t[1].autosize=!1}e();h.raise("onViewportsLayoutChanged",{layout:i})}var g=this,h=new n.Extra.Events(this),i,t=[],o,r,a=!1,f=n.Vgx.ViewportsLayout.ONE,u=2,s=!0;Object.defineProperty(this,"htmlElement",{get:function(){return i}});Object.defineProperty(this,"drawing",{get:function(){return r},set:function(n){if(r!=n){var t=r;r=n;k(t,r)}}});Object.defineProperty(this,"viewportsLayout",{get:function(){return f},set:function(n){if(f!=n){var t=f;f=n;d(t,f)}}});Object.defineProperty(this,"viewportsSpace",{get:function(){return u},set:function(n){u!=n&&(u=n,e())}});Object.defineProperty(this,"viewportsCount",{get:function(){return t.length}});Object.defineProperty(this,"currentViewport",{get:function(){return o}});Object.defineProperty(this,"getViewport",{value:function(n){return n<0||n>=t.length?null:t[n]}});h.create("onViewportsLayoutChanged");v()}return t}();n.Vgx.VectorGraphicsView=t}(library),function(n){var t;(function(n){n[n.ONE=1]="ONE";n[n.TWO_VERTICAL=2]="TWO_VERTICAL";n[n.TWO_HORIZONTAL=3]="TWO_HORIZONTAL"})(t||(t={}));n.Vgx.ViewportsLayout=t}(library),function(n,t){var i={};Object.defineProperty(i,"LinearGradientBrush",{value:t.Cgx.LinearGradientBrush});Object.defineProperty(i,"RadialGradientBrush",{value:t.Cgx.RadialGradientBrush});Object.defineProperty(i,"PatternBrush",{value:t.Cgx.PatternBrush});Object.defineProperty(i,"CoreGraphics",{value:t.Cgx.CoreGraphics});Object.defineProperty(i,"Matrix",{value:t.Cgx.Matrix});Object.defineProperty(i,"Transform",{value:t.Cgx.Transform});Object.defineProperty(i,"Collection",{value:t.Extra.Collection});Object.defineProperty(i,"HttpClient",{value:t.Extra.HttpClient});Object.defineProperty(i,"DrawingContext",{value:t.Vgx.DrawingContext});Object.defineProperty(i,"Point2D",{value:t.Vgx.Point2D});Object.defineProperty(i,"PointDefinition",{value:t.Vgx.PointDefinition});Object.defineProperty(i,"PointDefinitions",{value:t.Vgx.PointDefinitions});Object.defineProperty(i,"Rect",{value:t.Vgx.Rect});Object.defineProperty(i,"Vars",{value:t.Vgx.Vars});Object.defineProperty(i,"ViewTransform",{value:t.Vgx.ViewTransform});Object.defineProperty(i,"VgxObject",{value:t.Vgx.Object});Object.defineProperty(i,"Drawable",{value:t.Vgx.Drawable});Object.defineProperty(i,"Entity",{value:t.Vgx.Entity});Object.defineProperty(i,"Arc",{value:t.Vgx.Arc});Object.defineProperty(i,"Circle",{value:t.Vgx.Circle});Object.defineProperty(i,"CubicCurve",{value:t.Vgx.CubicCurve});Object.defineProperty(i,"Drawing",{value:t.Vgx.Drawing});Object.defineProperty(i,"Donut",{value:t.Vgx.Donut});Object.defineProperty(i,"Ellipse",{value:t.Vgx.Ellipse});Object.defineProperty(i,"Group",{value:t.Vgx.Group});Object.defineProperty(i,"Image",{value:t.Vgx.Image});Object.defineProperty(i,"Line",{value:t.Vgx.Line});Object.defineProperty(i,"Path",{value:t.Vgx.Path});Object.defineProperty(i,"Pie",{value:t.Vgx.Pie});Object.defineProperty(i,"Point",{value:t.Vgx.Point});Object.defineProperty(i,"Polygon",{value:t.Vgx.Polygon});Object.defineProperty(i,"Polyline",{value:t.Vgx.Polyline});Object.defineProperty(i,"Quad",{value:t.Vgx.Quad});Object.defineProperty(i,"QuadraticCurve",{value:t.Vgx.QuadraticCurve});Object.defineProperty(i,"Rectangle",{value:t.Vgx.Rectangle});Object.defineProperty(i,"Square",{value:t.Vgx.Square});Object.defineProperty(i,"Symbol",{value:t.Vgx.Symbol});Object.defineProperty(i,"Text",{value:t.Vgx.Text});Object.defineProperty(i,"Triangle",{value:t.Vgx.Triangle});Object.defineProperty(i,"VectorGraphicsView",{value:t.Vgx.VectorGraphicsView});Object.defineProperty(i,"Viewport",{value:t.Vgx.Viewport});Object.defineProperty(i,"ViewportOrientation",{value:t.Vgx.ViewportOrientation});Object.defineProperty(i,"ViewportsLayout",{value:t.Vgx.ViewportsLayout});Object.defineProperty(n,"Vgx",{value:i})}(window,library);delete library;